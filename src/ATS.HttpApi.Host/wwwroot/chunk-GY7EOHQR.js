import{a as st,b as ct,c as lt,d as pt,h as Ie,i as dt,l as mt,n as ut,o as Ne,p as Ee,q as Te}from"./chunk-NKMSGKPA.js";import{A as et,F as tt,H as it,V as nt,X as K,Y as ot,_ as rt,ba as Y,ha as at,oa as ee}from"./chunk-2KNHXYM4.js";import{A as T,C as N,Ja as Z,Ma as y,N as U,Na as _e,P as X,Pa as se,Q as F,R as ye,Ta as Ze,W as Pe,X as q,Ya as E,c as Xe,d as j,ea as He,f as A,ha as Je,i as V,j as B,ja as Qe,l as Ye,n as z,pa as xe,q as G,s as $}from"./chunk-BDOQTSQV.js";import{$ as D,A as ve,Ba as I,Ca as Se,Ga as Ce,Hb as Ae,I as L,Jb as J,N as $e,Oa as we,Ob as l,P as oe,Pb as p,Qa as C,Ra as w,Sc as ae,T as M,U as he,V as re,W as ge,Wa as b,Wc as We,X as u,Xa as a,Xc as Q,Ya as r,Za as v,Zc as k,_ as R,aa as _,bb as W,gb as P,hb as g,k as be,lc as Ue,o as H,ra as o,rc as qe,vc as Ke,wb as s,x as Ge,xa as f,xb as m,yb as h}from"./chunk-KHY5JWQN.js";import{a as fe,b as ze}from"./chunk-R3EWYZZD.js";var ft=(function(e){return e[e.Success=1]="Success",e[e.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",e[e.NotAllowed=3]="NotAllowed",e[e.LockedOut=4]="LockedOut",e[e.RequiresTwoFactor=5]="RequiresTwoFactor",e})(ft||{}),ni=Qe(ft);var ce=(()=>{let t=class t{constructor(n){this.restService=n,this.apiName="AbpAccount",this.register=i=>this.restService.request({method:"POST",url:"/api/account/register",body:i},{apiName:this.apiName}),this.resetPassword=i=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:i},{apiName:this.apiName}),this.sendPasswordResetCode=i=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:i},{apiName:this.apiName})}};t.\u0275fac=function(i){return new(i||t)(ge(xe))},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),te=(()=>{let t=class t{constructor(n){this.restService=n,this.apiName="AbpAccount",this.changePassword=i=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:i},{apiName:this.apiName}),this.get=()=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName}),this.update=i=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:i},{apiName:this.apiName})}};t.\u0275fac=function(i){return new(i||t)(ge(xe))},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ft(e,t){e&1&&(a(0,"div",1)(1,"label",7),s(2),l(3,"abpLocalization"),r(),a(4,"span"),s(5," * "),r(),v(6,"input",8),r()),e&2&&(o(2),m(p(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function Ot(e,t){if(e&1){let d=W();a(0,"form",1),P("ngSubmit",function(){R(d);let i=g();return D(i.onSubmit())}),a(1,"p"),s(2),l(3,"abpLocalization"),r(),a(4,"div",2)(5,"label",3),s(6),l(7,"abpLocalization"),r(),a(8,"span"),s(9," * "),r(),v(10,"input",4),r(),a(11,"abp-button",5),s(12),l(13,"abpLocalization"),r(),a(14,"a",6),v(15,"i",7),s(16),l(17,"abpLocalization"),r()()}if(e&2){let d=g();b("formGroup",d.form)("validateOnSubmit",!0),o(2),m(p(3,8,"AbpAccount::SendPasswordResetLink_Information")),o(4),m(p(7,10,"AbpAccount::EmailAddress")),o(5),b("loading",d.inProgress)("disabled",d.form==null?null:d.form.invalid),o(),h(" ",p(13,12,"AbpAccount::Submit")," "),o(4),m(p(17,14,"AbpAccount::Login"))}}function Lt(e,t){e&1&&(a(0,"p"),s(1),l(2,"abpLocalization"),r(),a(3,"a",6)(4,"button",8),v(5,"i",7),s(6),l(7,"abpLocalization"),r()()),e&2&&(o(),h(" ",p(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),o(5),h(" ",p(7,4,"AbpAccount::BackToLogin")," "))}function Mt(e,t){e&1&&(a(0,"strong"),s(1),l(2,"abpLocalization"),a(3,"a",14),s(4),l(5,"abpLocalization"),r()()),e&2&&(o(),h(" ",p(2,2,"AbpAccount::AreYouANewUser")," "),o(3),m(p(5,4,"AbpAccount::Register")))}function Rt(e,t){if(e&1){let d=W();a(0,"form",1),P("ngSubmit",function(){R(d);let i=g();return D(i.submit())}),v(1,"abp-extensible-form",2),a(2,"abp-button",3),s(3),l(4,"abpLocalization"),r()()}if(e&2){let d=g();b("formGroup",d.form),o(),b("selectedRecord",d.selected),o(),b("loading",d.inProgress),o(),h(" ",p(4,4,"AbpIdentity::Save"))}}var wt=e=>({active:e}),At=e=>({componentKey:e});function Dt(e,t){if(e&1){let d=W();a(0,"li",10),P("click",function(){R(d);let i=g();return D(i.selectedTab=0)}),a(1,"a",8),s(2),l(3,"abpLocalization"),r()()}if(e&2){let d=g();o(),b("ngClass",J(4,wt,d.selectedTab===0)),o(),m(p(3,2,"AbpUi::ChangePassword"))}}function kt(e,t){e&1&&v(0,"abp-change-password-form")}function jt(e,t){if(e&1&&(a(0,"div",11)(1,"div",12)(2,"h4"),s(3),l(4,"abpLocalization"),v(5,"hr"),r(),Ce(6,kt,1,0,"abp-change-password-form",13),r()()),e&2){let d=g(2);b("@fadeIn",void 0),o(3),h(" ",p(4,3,"AbpIdentity::ChangePassword")," "),o(3),b("abpReplaceableTemplate",J(5,At,d.changePasswordKey))}}function Vt(e,t){e&1&&v(0,"abp-personal-settings-form")}function Bt(e,t){if(e&1&&(a(0,"div",11)(1,"div",12)(2,"h4"),s(3),l(4,"abpLocalization"),v(5,"hr"),r(),Ce(6,Vt,1,0,"abp-personal-settings-form",13),r()()),e&2){let d=g(2);b("@fadeIn",void 0),o(3),h(" ",p(4,3,"AbpIdentity::PersonalSettings")," "),o(3),b("abpReplaceableTemplate",J(5,At,d.personalSettingsKey))}}function zt(e,t){if(e&1&&(a(0,"div",9),C(1,jt,7,7,"div",11),C(2,Bt,7,7,"div",11),r()),e&2){let d=g();o(),w(d.selectedTab===0?1:-1),o(),w(d.selectedTab===1?2:-1)}}function Gt(e,t){if(e&1){let d=W();a(0,"form",2),P("ngSubmit",function(){R(d);let i=g();return D(i.onSubmit())}),a(1,"div",3)(2,"label",4),s(3),l(4,"abpLocalization"),r(),a(5,"span"),s(6," * "),r(),v(7,"input",5),r(),a(8,"div",3)(9,"label",6),s(10),l(11,"abpLocalization"),r(),a(12,"span"),s(13," * "),r(),v(14,"input",7),r(),a(15,"div",3)(16,"label",8),s(17),l(18,"abpLocalization"),r(),a(19,"span"),s(20," * "),r(),v(21,"input",9),r(),a(22,"abp-button",10),s(23),l(24,"abpLocalization"),r()()}if(e&2){let d=g();b("formGroup",d.form),o(3),m(p(4,6,"AbpAccount::UserName")),o(7),m(p(11,8,"AbpAccount::EmailAddress")),o(7),m(p(18,10,"AbpAccount::Password")),o(5),b("loading",d.inProgress),o(),h(" ",p(24,12,"AbpAccount::Register")," ")}}function $t(e,t){if(e&1){let d=W();a(0,"form",1),P("ngSubmit",function(){R(d);let i=g();return D(i.onSubmit())}),a(1,"p"),s(2),l(3,"abpLocalization"),r(),a(4,"div",2)(5,"label",3),s(6),l(7,"abpLocalization"),r(),a(8,"span"),s(9," * "),r(),v(10,"input",4),r(),a(11,"div",2)(12,"label",5),s(13),l(14,"abpLocalization"),r(),a(15,"span"),s(16," * "),r(),v(17,"input",6),r(),a(18,"button",7),s(19),l(20,"abpLocalization"),r(),a(21,"abp-button",8),P("click",function(){R(d);let i=g();return D(i.onSubmit())}),s(22),l(23,"abpLocalization"),r()()}if(e&2){let d=g();b("formGroup",d.form)("mapErrorsFn",d.mapErrorsFn),o(2),m(p(3,8,"AbpAccount::ResetPassword_Information")),o(4),m(p(7,10,"AbpAccount::Password")),o(7),m(p(14,12,"AbpAccount::ConfirmPassword")),o(6),h(" ",p(20,14,"AbpAccount::Cancel")," "),o(2),b("loading",d.inProgress),o(),h(" ",p(23,16,"AbpAccount::Submit")," ")}}function Ut(e,t){e&1&&(a(0,"p"),s(1),l(2,"abpLocalization"),r(),a(3,"a",9)(4,"button",10),s(5),l(6,"abpLocalization"),r()()),e&2&&(o(),h(" ",p(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),o(4),h(" ",p(6,4,"AbpAccount::BackToLogin")," "))}var ne=new re("ACCOUNT_CONFIG_OPTIONS");function yt(e){return fe({redirectUrl:"/"},e)}var qt=(()=>{let t=class t{constructor(){this.authService=u(q)}canActivate(){return this.authService.isInternalAuth?!0:(this.authService.navigateToLogin(),!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac});let e=t;return e})(),Pt=()=>{let e=u(q);return e.isInternalAuth?!0:(e.navigateToLogin(),!1)},Me=new re("RE_LOGIN_CONFIRMATION_TOKEN"),bt=(()=>{let t=class t{constructor(n){this.propData=n,this.displayName=n.displayName,this.name=n.name,this.id=n.id||""}};t.\u0275fac=function(i){return new(i||t)(f(ct))},t.\u0275cmp=I({type:t,selectors:[["abp-personal-settings-half-row"]],features:[Ae([],[mt])],decls:5,vars:7,consts:[[1,"w-50","d-inline"],[1,"form-label"],["type","text",1,"form-control",3,"formControlName"]],template:function(i,c){i&1&&(a(0,"div",0)(1,"label",1),s(2),l(3,"abpLocalization"),r(),v(4,"input",2),r()),i&2&&(o(),we("for",c.name),o(),h("",p(3,5,c.displayName)," "),o(2),b("formControlName",c.name),we("id",c.id)("name",c.name))},dependencies:[N,j,V,$,E],encapsulation:2});let e=t;return e})(),{maxLength:ie,required:vt,email:Kt}=A,Wt=lt.createMany([{type:"string",name:"userName",displayName:"AbpIdentity::DisplayName:UserName",id:"username",validators:()=>[vt,ie(256)]},{type:"string",name:"name",displayName:"AbpIdentity::DisplayName:Name",id:"name",validators:()=>[ie(64)],template:bt,className:"d-inline-block w-50"},{type:"string",name:"surname",displayName:"AbpIdentity::DisplayName:Surname",id:"surname",validators:()=>[ie(64)],className:"d-inline-block w-50 ps-4",template:bt},{type:"string",name:"email",displayName:"AbpIdentity::DisplayName:Email",id:"email-address",validators:()=>[vt,Kt,ie(256)]},{type:"string",name:"phoneNumber",displayName:"AbpIdentity::DisplayName:PhoneNumber",id:"phone-number",validators:()=>[ie(16)]}]),xt={"Account.PersonalSettingsComponent":Wt},pe=new re("ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS"),Xt=(()=>{let t=class t{constructor(){this.injector=u(_),this.extensions=u(Ie)}canActivate(){let i=u(pe,{optional:!0})||{};return Ee(this.injector,"Identity").pipe(H(c=>({"Account.PersonalSettingsComponent":c.User})),Te(this.injector,"AbpIdentity"),oe(c=>{Ne(this.extensions.editFormProps,xt,c.editForm,i)}),H(()=>!0))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac});let e=t;return e})(),Re=(()=>{let t=class t{constructor(){this.store=new He({})}get createOnUpdateStream(){return this.store.sliceUpdate}getProfile$(){return this.store.sliceState(n=>n.profile)}getProfile(){return this.store.state.profile}setProfile(n){this.store.patch({profile:n})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),{required:le}=A,ht=["newPassword","repeatNewPassword"],Yt=(()=>{let t=class t{constructor(n,i,c,S,x){this.fb=n,this.injector=i,this.toasterService=c,this.profileService=S,this.manageProfileState=x,this.mapErrorsFn=(O,de,me)=>ht.indexOf(String(me?.name))<0?O:O.concat(de.filter(({key:ue})=>ue==="passwordMismatch"))}ngOnInit(){this.hideCurrentPassword=!this.manageProfileState.getProfile()?.hasPassword;let n=ee(this.injector);this.form=this.fb.group({password:["",le],newPassword:["",{validators:[le,...n]}],repeatNewPassword:["",{validators:[le,...n]}]},{validators:[ye(ht)]}),this.hideCurrentPassword&&this.form.removeControl("password")}onSubmit(){this.form.invalid||(this.inProgress=!0,this.profileService.changePassword(ze(fe({},!this.hideCurrentPassword&&{currentPassword:this.form.get("password")?.value}),{newPassword:this.form.get("newPassword")?.value})).pipe(L(()=>this.inProgress=!1)).subscribe({next:()=>{this.form.reset(),this.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),this.hideCurrentPassword&&(this.hideCurrentPassword=!1,this.form.addControl("password",new Ye("",[le])))},error:n=>{this.toasterService.error(n.error?.error?.message||"AbpAccount::DefaultErrorMessage")}}))}};t.\u0275fac=function(i){return new(i||t)(f(T),f(_),f(Y),f(te),f(Re))},t.\u0275cmp=I({type:t,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],decls:19,vars:15,consts:[[1,"abp-md-form",3,"ngSubmit","formGroup","mapErrorsFn","validateOnSubmit"],[1,"mb-3","form-group"],["for","new-password",1,"form-label"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password",1,"form-label"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password",1,"form-label"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(i,c){i&1&&(a(0,"form",0),P("ngSubmit",function(){return c.onSubmit()}),C(1,Ft,7,3,"div",1),a(2,"div",1)(3,"label",2),s(4),l(5,"abpLocalization"),r(),a(6,"span"),s(7," * "),r(),v(8,"input",3),r(),a(9,"div",1)(10,"label",4),s(11),l(12,"abpLocalization"),r(),a(13,"span"),s(14," * "),r(),v(15,"input",5),r(),a(16,"abp-button",6),s(17),l(18,"abpLocalization"),r()()),i&2&&(b("formGroup",c.form)("mapErrorsFn",c.mapErrorsFn)("validateOnSubmit",!0),o(),w(c.hideCurrentPassword?-1:1),o(3),m(p(5,9,"AbpIdentity::DisplayName:NewPassword")),o(7),m(p(12,11,"AbpIdentity::DisplayName:NewPasswordConfirm")),o(5),b("loading",c.inProgress)("disabled",c.form==null?null:c.form.invalid),o(),m(p(18,13,"AbpIdentity::Save")))},dependencies:[N,z,j,V,B,G,$,E,K,F,U,X,se],encapsulation:2});let e=t;return e})(),De=(()=>{let t=class t{constructor(n,i){this.fb=n,this.accountService=i,this.isEmailSent=!1,this.form=this.fb.group({email:["",[A.required,A.email]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email")?.value,appName:"Angular"}).pipe(L(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}};t.\u0275fac=function(i){return new(i||t)(f(T),f(ce))},t.\u0275cmp=I({type:t,selectors:[["abp-forgot-password"]],decls:5,vars:4,consts:[[3,"formGroup","validateOnSubmit"],[3,"ngSubmit","formGroup","validateOnSubmit"],[1,"mb-3","form-group"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["buttonClass","mt-2 mb-3 btn btn-primary btn-block","buttonType","submit",1,"d-block",3,"loading","disabled"],["routerLink","/account/login"],["aria-hidden","true",1,"fa","fa-long-arrow-left","me-1"],[1,"d-block","mt-2","mb-3","btn","btn-primary","btn-block"]],template:function(i,c){i&1&&(a(0,"h4"),s(1),l(2,"abpLocalization"),r(),C(3,Ot,18,16,"form",0)(4,Lt,8,6)),i&2&&(o(),m(p(2,2,"AbpAccount::ForgotPassword")),o(2),w(c.isEmailSent?4:3))},dependencies:[N,z,j,V,B,G,$,k,Q,E,K,F,U,X],encapsulation:2});let e=t;return e})();function _t(e){let t=e.get(ae),d=e.get(ne);return t.snapshot.queryParams.returnUrl||d.redirectUrl||"/"}var{maxLength:gt,required:St}=A,ke=(()=>{let t=class t{constructor(){this.injector=u(_),this.fb=u(T),this.toasterService=u(Y),this.authService=u(q),this.configState=u(Z),this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled=(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()!=="false"}buildForm(){this.form=this.fb.group({username:["",[St,gt(255)]],password:["",[St,gt(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;let{username:n,password:i,rememberMe:c}=this.form.value,S=_t(this.injector);this.authService.login({username:n,password:i,rememberMe:c,redirectUrl:S}).pipe(ve(x=>(this.toasterService.error(x.error?.error_description||x.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),be(x))),L(()=>this.inProgress=!1)).subscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=I({type:t,selectors:[["abp-login"]],decls:29,vars:21,consts:[["validateOnSubmit","",1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","login-input-user-name-or-email-address",1,"form-label"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password",1,"form-label"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],[1,"row"],[1,"col"],[1,"form-check"],["for","login-input-remember-me",1,"form-check-label","mb-2"],["type","checkbox","id","login-input-remember-me","formControlName","rememberMe",1,"form-check-input"],[1,"text-end","col"],["routerLink","/account/forgot-password"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(i,c){i&1&&(a(0,"h4"),s(1),l(2,"abpLocalization"),r(),C(3,Mt,6,6,"strong"),a(4,"form",0),P("ngSubmit",function(){return c.onSubmit()}),a(5,"div",1)(6,"label",2),s(7),l(8,"abpLocalization"),r(),v(9,"input",3),r(),a(10,"div",1)(11,"label",4),s(12),l(13,"abpLocalization"),r(),v(14,"input",5),r(),a(15,"div",6)(16,"div",7)(17,"div",8)(18,"label",9),v(19,"input",10),s(20),l(21,"abpLocalization"),r()()(),a(22,"div",11)(23,"a",12),s(24),l(25,"abpLocalization"),r()()(),a(26,"abp-button",13),s(27),l(28,"abpLocalization"),r()()),i&2&&(o(),m(p(2,9,"AbpAccount::Login")),o(2),w(c.isSelfRegistrationEnabled?3:-1),o(),b("formGroup",c.form),o(3),m(p(8,11,"AbpAccount::UserNameOrEmailAddress")),o(5),m(p(13,13,"AbpAccount::Password")),o(8),h(" ",p(21,15,"AbpAccount::RememberMe")," "),o(4),m(p(25,17,"AbpAccount::ForgotPassword")),o(2),b("loading",c.inProgress),o(),h(" ",p(28,19,"AbpAccount::Login")," "))},dependencies:[N,z,j,Xe,V,B,G,$,k,Q,E,K,F,U,X,se],encapsulation:2});let e=t;return e})(),Ht=(()=>{let t=class t{constructor(){this.fb=u(T),this.toasterService=u(Y),this.profileService=u(te),this.manageProfileState=u(Re),this.authService=u(q),this.confirmationService=u(rt),this.configState=u(Z),this.isPersonalSettingsChangedConfirmationActive=u(Me),this.injector=u(_),this.logoutConfirmation=()=>{this.authService.logout().subscribe()}}buildForm(){if(this.selected=this.manageProfileState.getProfile(),!this.selected)return;let n=new pt(this.injector,this.selected);this.form=ut(n)}ngOnInit(){this.buildForm()}submit(){if(this.form.invalid)return;let n=this.isLogoutConfirmMessageActive(),i=this.authService.getRefreshToken();this.inProgress=!0,this.profileService.update(this.form.value).pipe(L(()=>this.inProgress=!1)).subscribe(c=>{if(this.manageProfileState.setProfile(c),this.configState.refreshAppState(),this.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3}),i)return this.authService.refreshToken();n&&this.showLogoutConfirmMessage()})}isLogoutConfirmMessageActive(){return this.isPersonalSettingsChangedConfirmationActive}showLogoutConfirmMessage(){this.confirmationService.info("AbpAccount::PersonalSettingsChangedConfirmationModalDescription","AbpAccount::PersonalSettingsChangedConfirmationModalTitle").pipe(Ge(n=>n===ot.Status.confirm)).subscribe(this.logoutConfirmation)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=I({type:t,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],features:[Ae([{provide:st,useValue:"Account.PersonalSettingsComponent"}])],decls:1,vars:1,consts:[["validateOnSubmit","",1,"abp-md-form",3,"formGroup"],["validateOnSubmit","",1,"abp-md-form",3,"ngSubmit","formGroup"],[3,"selectedRecord"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading"]],template:function(i,c){i&1&&C(0,Rt,5,6,"form",0),i&2&&w(c.form?0:-1)},dependencies:[N,z,B,G,dt,F,U,K,E],encapsulation:2});let e=t;return e})(),je=(()=>{let t=class t{constructor(n,i){this.profileService=n,this.manageProfileState=i,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent",this.profile$=this.manageProfileState.getProfile$()}ngOnInit(){this.profileService.get().subscribe(n=>{this.manageProfileState.setProfile(n),n.isExternal&&(this.hideChangePasswordTab=!0,this.selectedTab=1)})}};t.\u0275fac=function(i){return new(i||t)(f(te),f(Re))},t.\u0275cmp=I({type:t,selectors:[["abp-manage-profile"]],decls:15,vars:15,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],[1,"nav-item"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],[1,"col-12","col-md-9"],[1,"nav-item",3,"click"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(i,c){if(i&1&&(v(0,"div",0),a(1,"div",1),l(2,"async"),a(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),C(7,Dt,4,6,"li",6),l(8,"async"),a(9,"li",7),P("click",function(){return c.selectedTab=1}),a(10,"a",8),s(11),l(12,"abpLocalization"),r()()()(),C(13,zt,3,2,"div",9),l(14,"async"),r()()()),i&2){let S;o(),b("abpLoading",!((S=p(2,5,c.profile$))!=null&&S.userName)),o(6),w(!c.hideChangePasswordTab&&p(8,7,c.profile$)?7:-1),o(3),b("ngClass",J(13,wt,c.selectedTab===1)),o(),m(p(12,9,"AbpAccount::PersonalSettings")),o(2),w(p(14,11,c.profile$)?13:-1)}},dependencies:[Ke,Ue,qe,N,Ht,Yt,E,Ze,at],styles:[".min-h-400[_ngcontent-%COMP%]{min-height:400px}"],data:{animation:[et("fadeIn",[tt(":enter",it(nt))])]}});let e=t;return e})(),{maxLength:Jt,required:Fe,email:Qt}=A,Ve=(()=>{let t=class t{constructor(n,i,c,S,x,O){this.fb=n,this.accountService=i,this.configState=c,this.toasterService=S,this.authService=x,this.injector=O,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){if(this.isSelfRegistrationEnabled=(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()!=="false",!this.isSelfRegistrationEnabled){this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},"",{life:1e4});return}}buildForm(){this.form=this.fb.group({username:["",[Fe,Jt(255)]],password:["",[Fe,...ee(this.injector)]],email:["",[Fe,Qt]]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;let n={userName:this.form.get("username")?.value,password:this.form.get("password")?.value,emailAddress:this.form.get("email")?.value,appName:"Angular"};this.accountService.register(n).pipe($e(()=>this.authService.login({username:n.userName,password:n.password,redirectUrl:_t(this.injector)})),ve(i=>(this.toasterService.error(i.error?.error_description||i.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),be(i))),L(()=>this.inProgress=!1)).subscribe()}};t.\u0275fac=function(i){return new(i||t)(f(T),f(ce),f(Z),f(Y),f(q),f(_))},t.\u0275cmp=I({type:t,selectors:[["abp-register"]],decls:10,vars:10,consts:[["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","",1,"mt-4",3,"formGroup"],["validateOnSubmit","",1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","input-user-name",1,"form-label"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(i,c){i&1&&(a(0,"h4"),s(1),l(2,"abpLocalization"),r(),a(3,"strong"),s(4),l(5,"abpLocalization"),a(6,"a",0),s(7),l(8,"abpLocalization"),r()(),C(9,Gt,25,14,"form",1)),i&2&&(o(),m(p(2,4,"AbpAccount::Register")),o(3),h(" ",p(5,6,"AbpAccount::AlreadyRegistered")," "),o(3),m(p(8,8,"AbpAccount::Login")),o(2),w(c.isSelfRegistrationEnabled?9:-1))},dependencies:[N,z,j,V,B,G,$,k,Q,F,U,X,E,K,se],encapsulation:2});let e=t;return e})(),Ct=["password","confirmPassword"],Be=(()=>{let t=class t{constructor(n,i,c,S,x){this.fb=n,this.accountService=i,this.route=c,this.router=S,this.injector=x,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(O,de,me)=>Ct.indexOf(String(me?.name))<0?O:O.concat(de.filter(({key:ue})=>ue==="passwordMismatch"))}ngOnInit(){this.route.queryParams.subscribe(({userId:n,resetToken:i})=>{(!n||!i)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[n,[A.required]],resetToken:[i,[A.required]],password:["",[A.required,...ee(this.injector)]],confirmPassword:["",[A.required,...ee(this.injector)]]},{validators:[ye(Ct)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId")?.value,resetToken:this.form.get("resetToken")?.value,password:this.form.get("password")?.value}).pipe(L(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}};t.\u0275fac=function(i){return new(i||t)(f(T),f(ce),f(ae),f(We),f(_))},t.\u0275cmp=I({type:t,selectors:[["abp-reset-password"]],decls:5,vars:4,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn"],["validateOnSubmit","",3,"ngSubmit","formGroup","mapErrorsFn"],[1,"mb-3","form-group"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button","routerLink","/account/login",1,"me-2","btn","btn-outline-primary"],["buttonType","submit","buttonClass","me-2 btn btn-primary",3,"click","loading"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(i,c){i&1&&(a(0,"h4"),s(1),l(2,"abpLocalization"),r(),C(3,$t,24,18,"form",0)(4,Ut,7,6)),i&2&&(o(),m(p(2,2,"AbpAccount::ResetPassword")),o(2),w(c.isPasswordReset?4:3))},dependencies:[N,z,j,V,B,G,$,k,Q,F,U,X,E,K],encapsulation:2});let e=t;return e})(),It=()=>{let e=u(_),t=u(Ie),n=u(pe,{optional:!0})||{};return Ee(e,"Identity").pipe(H(i=>({"Account.PersonalSettingsComponent":i.User})),Te(e,"AbpIdentity"),oe(i=>{Ne(t.editFormProps,xt,i.editForm,n)}))},Oe=[Pt],Zt=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:_e,children:[{path:"login",component:y,canActivate:Oe,data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:ke}},title:"AbpAccount::Login"},{path:"register",component:y,canActivate:Oe,data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:Ve}},title:"AbpAccount::Register"},{path:"forgot-password",component:y,canActivate:Oe,data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:De}},title:"AbpAccount::ForgotPassword"},{path:"reset-password",component:y,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:Be}},title:"AbpAccount::ResetPassword"},{path:"manage",component:y,canActivate:[Pe],resolve:[It],data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:je}},title:"AbpAccount::MyAccount"}]}],ei=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Se({type:t}),t.\u0275inj=he({imports:[k.forChild(Zt),k]});let e=t;return e})(),xi=(()=>{let t=class t{static forChild(n={}){return{ngModule:t,providers:[qt,{provide:ne,useValue:n},{provide:"ACCOUNT_OPTIONS",useFactory:yt,deps:[ne]},{provide:Me,useValue:n.isPersonalSettingsChangedConfirmationActive??!0},{provide:pe,useValue:n.editFormPropContributors},Xt]}}static forLazy(n={}){return new Je(t.forChild(n))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Se({type:t}),t.\u0275inj=he({imports:[ke,Ve,De,Be,je,ei]});let e=t;return e})();function ti(e={}){return[{provide:ne,useValue:e},{provide:"ACCOUNT_OPTIONS",useFactory:yt,deps:[ne]},{provide:Me,useValue:e.isPersonalSettingsChangedConfirmationActive??!0},{provide:pe,useValue:e.editFormPropContributors}]}var Le=[Pt],_i=(e={})=>[{path:"",component:_e,providers:ti(e),children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:y,canActivate:Le,data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:ke}},title:"AbpAccount::Login"},{path:"register",component:y,canActivate:Le,data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:Ve}},title:"AbpAccount::Register"},{path:"forgot-password",component:y,canActivate:Le,data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:De}},title:"AbpAccount::ForgotPassword"},{path:"reset-password",component:y,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:Be}},title:"AbpAccount::ResetPassword"},{path:"manage",component:y,canActivate:[Pe],resolve:[It],data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:je}},title:"AbpAccount::MyAccount"}]}];export{ne as ACCOUNT_CONFIG_OPTIONS,pe as ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS,Xt as AccountExtensionsGuard,xi as AccountModule,qt as AuthenticationFlowGuard,Yt as ChangePasswordComponent,xt as DEFAULT_ACCOUNT_FORM_PROPS,De as ForgotPasswordComponent,ke as LoginComponent,je as ManageProfileComponent,Re as ManageProfileStateService,Ht as PersonalSettingsComponent,bt as PersonalSettingsHalfRowComponent,Me as RE_LOGIN_CONFIRMATION_TOKEN,Ve as RegisterComponent,Be as ResetPasswordComponent,yt as accountConfigOptionsFactory,It as accountExtensionsResolver,Pt as authenticationFlowGuard,_i as createRoutes,_t as getRedirectUrl,ti as provideAccount};
