import{a as H}from"./chunk-YGFJLGMQ.js";import"./chunk-NS3BAJ2F.js";import{ba as N}from"./chunk-2KNHXYM4.js";import"./chunk-BDOQTSQV.js";import{$ as _,Ba as T,Ga as b,Ib as E,Jb as y,Ob as h,Pb as I,Qb as k,Sc as V,Wa as r,Xa as n,Xc as A,Ya as t,Za as s,Zc as q,_ as v,bb as j,gb as f,hb as m,lc as C,na as x,nc as D,oc as M,ra as o,sc as L,tc as F,vc as P,wb as a,xa as S,xb as p,yb as g,zb as w}from"./chunk-KHY5JWQN.js";import"./chunk-R3EWYZZD.js";var R=i=>["/jobs",i,"edit"],J=i=>({jobId:i}),U=()=>["/applications"],B=()=>["/pipeline"];function $(i,d){i&1&&(n(0,"div",4),s(1,"div",5),t())}function z(i,d){i&1&&(n(0,"span",16),s(1,"i",39),a(2," Remote "),t())}function O(i,d){if(i&1&&(n(0,"div",27)(1,"h4",28),a(2,"Responsibilities"),t(),s(3,"div",29),t()),i&2){let e=m(2);o(3),r("innerHTML",e.job.responsibilities,x)}}function G(i,d){if(i&1&&(n(0,"div",27)(1,"h4",28),a(2,"Benefits"),t(),s(3,"div",29),t()),i&2){let e=m(2);o(3),r("innerHTML",e.job.benefits,x)}}function K(i,d){i&1&&(n(0,"dt",33),a(1,"Salary Range"),t())}function Q(i,d){if(i&1&&(n(0,"dd",33),a(1),h(2,"number"),h(3,"number"),t()),i&2){let e=m(2);o(),w(" $",I(2,2,e.job.minSalary)," - $",I(3,4,e.job.maxSalary)," ")}}function W(i,d){i&1&&(n(0,"dt",33),a(1,"Application Deadline"),t())}function X(i,d){if(i&1&&(n(0,"dd",33),a(1),h(2,"date"),t()),i&2){let e=m(2);o(),p(k(2,1,e.job.closingDate,"MMM d, y"))}}function Y(i,d){if(i&1&&(n(0,"span",42),a(1),t()),i&2){let e=d.$implicit;o(),g(" ",e," ")}}function Z(i,d){if(i&1&&(n(0,"div",27)(1,"h4",28),a(2,"Required Skills"),t(),n(3,"div",40),b(4,Y,2,1,"span",41),t()()),i&2){let e=m(2);o(4),r("ngForOf",e.job.requiredSkills)}}function ee(i,d){if(i&1&&(n(0,"div",27)(1,"h4",28),a(2,"Hiring Manager"),t(),n(3,"p",43),a(4),t()()),i&2){let e=m(2);o(4),p(e.job.hiringManagerName||"N/A")}}function te(i,d){if(i&1){let e=j();n(0,"div",27)(1,"h4",28),s(2,"i",44),a(3,"Public Application Link "),t(),n(4,"p",45),a(5,"Share this link with candidates to apply directly"),t(),n(6,"div",46),s(7,"input",47),n(8,"button",48),f("click",function(){v(e);let c=m(2);return _(c.copyPublicLink())}),s(9,"i",49),t()(),n(10,"button",50),f("click",function(){v(e);let c=m(2);return _(c.copyPublicLink())}),s(11,"i",51),a(12," Copy Link "),t()()}if(i&2){let e=m(2);o(7),r("value",e.publicUrl)}}function ie(i,d){if(i&1){let e=j();n(0,"button",54),f("click",function(){v(e);let c=m(3);return _(c.publishJob())}),s(1,"i",55),a(2," Publish Job "),t()}if(i&2){let e=m(3);r("disabled",e.loading)}}function ne(i,d){if(i&1){let e=j();n(0,"button",56),f("click",function(){v(e);let c=m(3);return _(c.closeJob())}),s(1,"i",57),a(2," Close Job "),t()}if(i&2){let e=m(3);r("disabled",e.loading)}}function ae(i,d){if(i&1&&(n(0,"div",27)(1,"h4",28),a(2,"Job Status"),t(),n(3,"div",35),b(4,ie,3,1,"button",52)(5,ne,3,1,"button",53),t()()),i&2){let e=m(2);o(4),r("ngIf",e.canPublish()),o(),r("ngIf",e.canClose())}}function oe(i,d){if(i&1&&(n(0,"div")(1,"div",6)(2,"div",7)(3,"nav",8)(4,"ol",9)(5,"li",10)(6,"a",11),a(7,"Jobs"),t()(),n(8,"li",12),a(9),t()()(),n(10,"h1",13),a(11),t(),n(12,"div",14)(13,"span",15),a(14),t(),n(15,"span",16),s(16,"i",17),a(17),t(),n(18,"span",16),s(19,"i",18),a(20),t(),b(21,z,3,0,"span",19),t()(),n(22,"div",20)(23,"button",21),s(24,"i",22),a(25," Edit Job "),t(),n(26,"button",23),s(27,"i",24),a(28," Add Application "),t()()(),n(29,"div",25)(30,"div",26)(31,"div",27)(32,"h4",28),a(33,"Job Description"),t(),s(34,"div",29),t(),n(35,"div",27)(36,"h4",28),a(37,"Requirements"),t(),s(38,"div",29),t(),b(39,O,4,1,"div",30)(40,G,4,1,"div",30),t(),n(41,"div",31)(42,"div",27)(43,"h4",28),a(44,"Job Details"),t(),n(45,"dl",32)(46,"dt",33),a(47,"Employment Type"),t(),n(48,"dd",33),a(49),t(),n(50,"dt",33),a(51,"Experience Level"),t(),n(52,"dd",33),a(53),t(),b(54,K,2,0,"dt",34)(55,Q,4,6,"dd",34),n(56,"dt",33),a(57,"Posted Date"),t(),n(58,"dd",33),a(59),h(60,"date"),t(),b(61,W,2,0,"dt",34)(62,X,3,4,"dd",34),n(63,"dt",33),a(64,"Applications"),t(),n(65,"dd",33),a(66),t(),n(67,"dt",33),a(68,"Views"),t(),n(69,"dd",33),a(70),t()()(),b(71,Z,5,1,"div",30)(72,ee,5,1,"div",30)(73,te,13,1,"div",30)(74,ae,6,2,"div",30),n(75,"div",27)(76,"h4",28),a(77,"Actions"),t(),n(78,"div",35)(79,"button",36),s(80,"i",37),a(81," View Applications "),t(),n(82,"button",36),s(83,"i",38),a(84," View in Pipeline "),t()()()()()()),i&2){let e=m();o(9),p(e.job.title),o(2),p(e.job.title),o(2),r("ngClass",e.getStatusClass(e.job.status)),o(),g(" ",e.getStatusText(e.job.status)," "),o(3),g(" ",e.job.departmentName||"N/A"," "),o(3),g(" ",e.job.location||"N/A"," "),o(),r("ngIf",e.job.isRemote),o(2),r("routerLink",y(33,R,e.jobId)),o(3),r("queryParams",y(35,J,e.jobId)),o(8),r("innerHTML",e.job.description||"No description available",x),o(4),r("innerHTML",e.job.requirements||"No requirements specified",x),o(),r("ngIf",e.job.responsibilities),o(),r("ngIf",e.job.benefits),o(9),p(e.getEmploymentTypeText(e.job.employmentType)),o(4),p(e.getExperienceLevelText(e.job.experienceLevel)),o(),r("ngIf",e.job.minSalary),o(),r("ngIf",e.job.minSalary),o(4),p(k(60,30,e.job.postedDate,"MMM d, y")),o(2),r("ngIf",e.job.closingDate),o(),r("ngIf",e.job.closingDate),o(4),p(e.job.applicationCount||0),o(4),p(e.job.viewCount||0),o(),r("ngIf",e.job.requiredSkills&&e.job.requiredSkills.length>0),o(),r("ngIf",e.job.hiringManagerId),o(),r("ngIf",e.publicUrl),o(),r("ngIf",e.canPublish()||e.canClose()),o(5),r("routerLink",E(37,U))("queryParams",y(38,J,e.jobId)),o(3),r("routerLink",E(40,B))("queryParams",y(41,J,e.jobId))}}function le(i,d){i&1&&(n(0,"div",58)(1,"div",59),s(2,"i",60),t(),n(3,"div",61),a(4,"Job Not Found"),t(),n(5,"div",62),a(6,"The requested job could not be found"),t(),n(7,"button",63),s(8,"i",64),a(9," Back to Jobs "),t()())}var ue=(()=>{let d=class d{constructor(l,c,u){this.jobService=l,this.route=c,this.toaster=u,this.job=null,this.loading=!1,this.jobId="",this.publicUrl=""}ngOnInit(){this.route.params.subscribe(l=>{this.jobId=l.id,this.jobId&&this.loadJob()})}loadJob(){this.loading=!0,this.jobService.get(this.jobId).subscribe({next:l=>{this.job=l,this.loading=!1,l.publicSlug&&(this.publicUrl=`${window.location.origin}/apply/${l.publicSlug}`),this.jobService.incrementViewCount(this.jobId).subscribe()},error:l=>{console.error("Failed to load job:",l),this.loading=!1}})}copyPublicLink(){if(!this.publicUrl){this.toaster.warn("Public link is not available for this job");return}navigator.clipboard.writeText(this.publicUrl).then(()=>{this.toaster.success("Public application link copied to clipboard!")}).catch(l=>{console.error("Failed to copy:",l),this.toaster.error("Failed to copy link to clipboard")})}getStatusClass(l){return{0:"badge-custom badge-draft",1:"badge-custom badge-active",2:"badge-custom badge-closed"}[l]||"badge-custom"}getStatusText(l){return{0:"Draft",1:"Active",2:"Closed"}[l]||"Unknown"}getEmploymentTypeText(l){return{0:"Full-Time",1:"Part-Time",2:"Contract",3:"Internship"}[l]||"Unknown"}getExperienceLevelText(l){return{0:"Entry Level",1:"Junior",2:"Mid Level",3:"Senior",4:"Lead",5:"Executive"}[l]||"Unknown"}publishJob(){confirm("Are you sure you want to publish this job? It will become publicly visible.")&&(this.loading=!0,this.jobService.publish({jobId:this.jobId}).subscribe({next:l=>{this.toaster.success("Job published successfully!"),this.loadJob()},error:l=>{console.error("Failed to publish job:",l),this.toaster.error("Failed to publish job"),this.loading=!1}}))}closeJob(){confirm("Are you sure you want to close this job? It will stop accepting applications.")&&(this.loading=!0,this.jobService.close(this.jobId).subscribe({next:l=>{this.toaster.success("Job closed successfully!"),this.loadJob()},error:l=>{console.error("Failed to close job:",l),this.toaster.error("Failed to close job"),this.loading=!1}}))}canPublish(){return this.job?.status===0}canClose(){return this.job?.status===1}};d.\u0275fac=function(c){return new(c||d)(S(H),S(V),S(N))},d.\u0275cmp=T({type:d,selectors:[["app-job-detail"]],decls:4,vars:3,consts:[[1,"container-fluid","py-4"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"row","mb-4"],[1,"col"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/jobs"],[1,"breadcrumb-item","active"],[1,"h2","mb-2"],[1,"d-flex","flex-wrap","gap-2","mb-3"],[3,"ngClass"],[1,"badge","bg-light","text-dark"],[1,"fas","fa-building","me-1"],[1,"fas","fa-map-marker-alt","me-1"],["class","badge bg-light text-dark",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-outline-primary","me-2",3,"routerLink"],[1,"fas","fa-edit","me-2"],["routerLink","/applications/new",1,"btn","btn-primary",3,"queryParams"],[1,"fas","fa-plus","me-2"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"form-section"],[1,"section-title"],[3,"innerHTML"],["class","form-section",4,"ngIf"],[1,"col-12","col-lg-4"],[1,"row","mb-0"],[1,"col-sm-6","mb-2"],["class","col-sm-6 mb-2",4,"ngIf"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-primary",3,"routerLink","queryParams"],[1,"fas","fa-users","me-2"],[1,"fas","fa-tasks","me-2"],[1,"fas","fa-laptop-house","me-1"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-primary",4,"ngFor","ngForOf"],[1,"badge","bg-primary"],[1,"mb-0"],[1,"fas","fa-link","me-2"],[1,"text-muted","small","mb-2"],[1,"input-group","mb-2"],["type","text","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-copy"],[1,"btn","btn-sm","btn-outline-success","w-100",3,"click"],[1,"fas","fa-clipboard","me-2"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-warning",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-check-circle","me-2"],[1,"btn","btn-warning",3,"click","disabled"],[1,"fas","fa-times-circle","me-2"],[1,"empty-state"],[1,"empty-icon"],[1,"fas","fa-exclamation-triangle"],[1,"empty-title"],[1,"empty-message"],["routerLink","/jobs",1,"btn","btn-primary","mt-3"],[1,"fas","fa-arrow-left","me-2"]],template:function(c,u){c&1&&(n(0,"div",0),b(1,$,2,0,"div",1)(2,oe,85,43,"div",2)(3,le,10,0,"div",3),t()),c&2&&(o(),r("ngIf",u.loading),o(),r("ngIf",!u.loading&&u.job),o(),r("ngIf",!u.loading&&!u.job))},dependencies:[P,C,D,M,F,L,q,A],encapsulation:2});let i=d;return i})();export{ue as JobDetail};
