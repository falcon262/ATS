import{a as Q}from"./chunk-FMX7EPKG.js";import{a as K}from"./chunk-YGFJLGMQ.js";import"./chunk-E54DX6ID.js";import{C as z,c as R,d as k,f as b,i as L,j as w,n as A,o as O,q as V,s as $,t as G,u as P,v as B,y as H,z as U}from"./chunk-BDOQTSQV.js";import{Ba as M,Ga as c,Sc as j,Wa as m,Wc as C,Xa as i,Xc as T,Ya as e,Za as d,Zc as J,gb as I,hb as F,nc as q,oc as D,ra as a,vc as N,wb as n,xa as v,xb as f,yb as E}from"./chunk-KHY5JWQN.js";import"./chunk-R3EWYZZD.js";function W(r,o){r&1&&(i(0,"div",54),n(1," Job title is required "),e())}function X(r,o){if(r&1&&(i(0,"option",55),n(1),e()),r&2){let p=o.$implicit;m("value",p.id),a(),f(p.name)}}function Y(r,o){r&1&&(i(0,"div",54),n(1," Department is required "),e())}function Z(r,o){r&1&&(i(0,"div",54),n(1," Location is required "),e())}function ee(r,o){if(r&1&&(i(0,"option",55),n(1),e()),r&2){let p=o.$implicit;m("value",p.value),a(),f(p.label)}}function te(r,o){if(r&1&&(i(0,"option",55),n(1),e()),r&2){let p=o.$implicit;m("value",p.value),a(),f(p.label)}}function ie(r,o){r&1&&(i(0,"div",54),n(1," Description is required "),e())}function ne(r,o){r&1&&(i(0,"div",54),n(1," Requirements are required "),e())}function le(r,o){if(r&1&&(i(0,"span"),d(1,"i",56),n(2),e()),r&2){let p=F();a(2),E(" ",p.isEditMode?"Update Job":"Create Job"," ")}}function re(r,o){r&1&&(i(0,"span"),d(1,"i",57),n(2," Saving... "),e())}var fe=(()=>{let o=class o{constructor(t,u,l,s,g){this.fb=t,this.jobService=u,this.departmentService=l,this.route=s,this.router=g,this.loading=!1,this.isEditMode=!1,this.jobId=null,this.departments=[],this.loadingDepartments=!1,this.employmentTypes=[{value:0,label:"Full-Time"},{value:1,label:"Part-Time"},{value:2,label:"Contract"},{value:3,label:"Internship"}],this.experienceLevels=[{value:0,label:"Entry Level"},{value:1,label:"Junior"},{value:2,label:"Mid Level"},{value:3,label:"Senior"},{value:4,label:"Lead"},{value:5,label:"Executive"}],this.jobForm=this.fb.group({title:["",b.required],departmentId:["",b.required],location:["",b.required],isRemote:[!1],employmentType:[0,b.required],experienceLevel:[0,b.required],description:["",b.required],requirements:["",b.required],responsibilities:[""],benefits:[""],salaryRangeMin:[null],salaryRangeMax:[null],applicationDeadline:[""],requiredSkills:[""],hiringManagerId:[""],hiringManagerName:[""],hiringManagerEmail:[""]})}ngOnInit(){this.loadDepartments(),this.route.params.subscribe(t=>{this.jobId=t.id,this.isEditMode=!!this.jobId,this.isEditMode&&this.loadJob()})}loadDepartments(){this.loadingDepartments=!0,this.departmentService.getAllActive().subscribe({next:t=>{this.departments=t,this.loadingDepartments=!1},error:t=>{console.error("Failed to load departments:",t),this.loadingDepartments=!1}})}loadJob(){this.jobId&&(this.loading=!0,this.jobService.get(this.jobId).subscribe({next:t=>{this.jobForm.patchValue({title:t.title,departmentId:t.departmentId,location:t.location,isRemote:t.isRemote,employmentType:t.employmentType,experienceLevel:t.experienceLevel,description:t.description,requirements:t.requirements,responsibilities:t.responsibilities,benefits:t.benefits||"",salaryRangeMin:t.minSalary,salaryRangeMax:t.maxSalary,applicationDeadline:t.closingDate?new Date(t.closingDate).toISOString().split("T")[0]:"",requiredSkills:t.requiredSkills?.join(", ")||"",hiringManagerId:t.hiringManagerId,hiringManagerName:t.hiringManagerName,hiringManagerEmail:t.hiringManagerEmail}),this.loading=!1},error:t=>{console.error("Failed to load job:",t),this.loading=!1}}))}onSubmit(){if(this.jobForm.invalid){this.jobForm.markAllAsTouched();return}this.loading=!0;let t=this.jobForm.value,u={title:t.title,description:t.description,requirements:t.requirements,responsibilities:t.responsibilities,benefits:t.benefits,departmentId:t.departmentId,location:t.location,isRemote:t.isRemote,employmentType:t.employmentType,experienceLevel:t.experienceLevel,minSalary:t.salaryRangeMin,maxSalary:t.salaryRangeMax,currency:"USD",requiredSkills:t.requiredSkills?t.requiredSkills.split(",").map(s=>s.trim()):[],preferredSkills:[],closingDate:t.applicationDeadline?new Date(t.applicationDeadline).toISOString():void 0,hiringManagerId:t.hiringManagerId,hiringManagerName:t.hiringManagerName,hiringManagerEmail:t.hiringManagerEmail};(this.isEditMode&&this.jobId?this.jobService.update(this.jobId,u):this.jobService.create(u)).subscribe({next:s=>{this.loading=!1,this.router.navigate(["/jobs",s.id])},error:s=>{console.error("Failed to save job:",s),this.loading=!1}})}cancel(){this.isEditMode&&this.jobId?this.router.navigate(["/jobs",this.jobId]):this.router.navigate(["/jobs"])}};o.\u0275fac=function(u){return new(u||o)(v(U),v(K),v(Q),v(j),v(C))},o.\u0275cmp=M({type:o,selectors:[["app-job-form"]],decls:125,vars:19,consts:[[1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/jobs"],[1,"breadcrumb-item","active"],[1,"h2"],[3,"ngSubmit","formGroup"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"form-section"],[1,"section-title"],[1,"mb-3"],[1,"form-label","required"],["type","text","formControlName","title","placeholder","e.g. Senior Software Engineer",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-3"],["formControlName","departmentId",1,"form-select",3,"disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","location","placeholder","e.g. San Francisco, CA",1,"form-control"],[1,"form-check"],["type","checkbox","formControlName","isRemote","id","isRemote",1,"form-check-input"],["for","isRemote",1,"form-check-label"],["for","employmentType",1,"form-label","required"],["formControlName","employmentType","id","employmentType",1,"form-select"],["for","experienceLevel",1,"form-label","required"],["formControlName","experienceLevel","id","experienceLevel",1,"form-select"],["formControlName","description","rows","6","placeholder","Provide a detailed description of the job...",1,"form-control"],["formControlName","requirements","rows","6","maxlength","1000","placeholder","List the requirements for this position...",1,"form-control"],[1,"form-text","text-muted"],[1,"form-label"],["formControlName","responsibilities","rows","6","maxlength","1000","placeholder","Describe the key responsibilities...",1,"form-control"],["formControlName","benefits","rows","4","placeholder","List benefits and perks...",1,"form-control"],[1,"col-12","col-lg-4"],[1,"input-group","mb-2"],[1,"input-group-text"],["type","number","formControlName","salaryRangeMin","placeholder","Min",1,"form-control"],[1,"input-group"],["type","number","formControlName","salaryRangeMax","placeholder","Max",1,"form-control"],["for","applicationDeadline",1,"form-label"],["type","date","formControlName","applicationDeadline","id","applicationDeadline",1,"form-control"],["type","text","formControlName","requiredSkills","placeholder","e.g. JavaScript, React, Node.js (comma-separated)",1,"form-control"],["type","text","formControlName","hiringManagerId","placeholder","Optional",1,"form-control"],["type","text","formControlName","hiringManagerName","maxlength","100","placeholder","e.g. John Doe",1,"form-control"],["type","email","formControlName","hiringManagerEmail","maxlength","100","placeholder","e.g. john.doe@company.com",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-gradient",3,"disabled"],[4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-times","me-2"],[1,"text-danger","small","mt-1"],[3,"value"],[1,"fas","fa-save","me-2"],[1,"fas","fa-spinner","fa-spin","me-2"]],template:function(u,l){if(u&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),n(7,"Jobs"),e()(),i(8,"li",7),n(9),e()()(),i(10,"h1",8),n(11),e()()(),i(12,"form",9),I("ngSubmit",function(){return l.onSubmit()}),i(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),n(17,"Basic Information"),e(),i(18,"div",14)(19,"label",15),n(20,"Job Title"),e(),d(21,"input",16),c(22,W,2,0,"div",17),e(),i(23,"div",18)(24,"div",19)(25,"label",15),n(26,"Department"),e(),i(27,"select",20)(28,"option",21),n(29),e(),c(30,X,2,2,"option",22),e(),c(31,Y,2,0,"div",17),e(),i(32,"div",19)(33,"label",15),n(34,"Location"),e(),d(35,"input",23),c(36,Z,2,0,"div",17),e()(),i(37,"div",14)(38,"div",24),d(39,"input",25),i(40,"label",26),n(41," Remote Position "),e()()(),i(42,"div",18)(43,"div",19)(44,"label",27),n(45,"Employment Type"),e(),i(46,"select",28),c(47,ee,2,2,"option",22),e()(),i(48,"div",19)(49,"label",29),n(50,"Experience Level"),e(),i(51,"select",30),c(52,te,2,2,"option",22),e()()()(),i(53,"div",12)(54,"h4",13),n(55,"Job Description"),e(),i(56,"div",14)(57,"label",15),n(58,"Description"),e(),d(59,"textarea",31),c(60,ie,2,0,"div",17),e(),i(61,"div",14)(62,"label",15),n(63,"Requirements"),e(),d(64,"textarea",32),i(65,"small",33),n(66),e(),c(67,ne,2,0,"div",17),e(),i(68,"div",14)(69,"label",34),n(70,"Responsibilities"),e(),d(71,"textarea",35),i(72,"small",33),n(73),e()(),i(74,"div",14)(75,"label",34),n(76,"Benefits"),e(),d(77,"textarea",36),e()()(),i(78,"div",37)(79,"div",12)(80,"h4",13),n(81,"Additional Details"),e(),i(82,"div",14)(83,"label",34),n(84,"Salary Range"),e(),i(85,"div",38)(86,"span",39),n(87,"$"),e(),d(88,"input",40),e(),i(89,"div",41)(90,"span",39),n(91,"$"),e(),d(92,"input",42),e()(),i(93,"div",14)(94,"label",43),n(95,"Application Deadline"),e(),d(96,"input",44),e(),i(97,"div",14)(98,"label",34),n(99,"Required Skills"),e(),d(100,"input",45),i(101,"small",33),n(102,"Separate skills with commas"),e()(),i(103,"div",14)(104,"label",34),n(105,"Hiring Manager ID"),e(),d(106,"input",46),e(),i(107,"div",14)(108,"label",34),n(109,"Hiring Manager Name"),e(),d(110,"input",47),e(),i(111,"div",14)(112,"label",34),n(113,"Hiring Manager Email"),e(),d(114,"input",48),e()(),i(115,"div",12)(116,"h4",13),n(117,"Actions"),e(),i(118,"div",49)(119,"button",50),c(120,le,3,1,"span",51)(121,re,3,0,"span",51),e(),i(122,"button",52),I("click",function(){return l.cancel()}),d(123,"i",53),n(124," Cancel "),e()()()()()()()),u&2){let s,g,h,S,y,x,_;a(9),f(l.isEditMode?"Edit Job":"New Job"),a(2),f(l.isEditMode?"Edit Job":"Post New Job"),a(),m("formGroup",l.jobForm),a(10),m("ngIf",((s=l.jobForm.get("title"))==null?null:s.touched)&&((s=l.jobForm.get("title"))==null?null:s.errors)),a(5),m("disabled",l.loadingDepartments),a(2),f(l.loadingDepartments?"Loading departments...":"Select a department"),a(),m("ngForOf",l.departments),a(),m("ngIf",((g=l.jobForm.get("departmentId"))==null?null:g.touched)&&((g=l.jobForm.get("departmentId"))==null?null:g.errors)),a(5),m("ngIf",((h=l.jobForm.get("location"))==null?null:h.touched)&&((h=l.jobForm.get("location"))==null?null:h.errors)),a(11),m("ngForOf",l.employmentTypes),a(5),m("ngForOf",l.experienceLevels),a(8),m("ngIf",((S=l.jobForm.get("description"))==null?null:S.touched)&&((S=l.jobForm.get("description"))==null?null:S.errors)),a(6),E("",((y=l.jobForm.get("requirements"))==null||y.value==null?null:y.value.length)||0,"/1000 characters"),a(),m("ngIf",((x=l.jobForm.get("requirements"))==null?null:x.touched)&&((x=l.jobForm.get("requirements"))==null?null:x.errors)),a(6),E("",((_=l.jobForm.get("responsibilities"))==null||_.value==null?null:_.value.length)||0,"/1000 characters"),a(46),m("disabled",l.loading),a(),m("ngIf",!l.loading),a(),m("ngIf",l.loading),a(),m("disabled",l.loading)}},dependencies:[N,q,D,z,A,P,B,k,O,R,G,L,w,H,V,$,J,T],encapsulation:2});let r=o;return r})();export{fe as JobForm};
