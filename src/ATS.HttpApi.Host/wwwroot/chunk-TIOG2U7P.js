import{a as O}from"./chunk-AFABU5UD.js";import{ba as A}from"./chunk-2KNHXYM4.js";import{C as R,c as I,d as F,f as c,i as x,j as k,n as E,q as M,s as T,z as N}from"./chunk-BDOQTSQV.js";import{Ba as h,Ga as g,Sc as C,Wa as l,Wc as P,Xa as t,Xc as S,Ya as i,Za as m,Zc as _,gb as v,lc as b,oc as w,ra as a,tb as f,vc as y,wb as r,xa as u}from"./chunk-KHY5JWQN.js";import"./chunk-R3EWYZZD.js";function q(s,d){s&1&&(t(0,"div",34),r(1," Password must be at least 6 characters "),i())}function D(s,d){s&1&&(t(0,"div",34),r(1," Passwords do not match "),i())}function V(s,d){s&1&&(t(0,"span"),m(1,"i",35),r(2,"Create Account "),i())}function Y(s,d){s&1&&(t(0,"span"),m(1,"span",36),r(2," Creating Account... "),i())}var Q=(()=>{let d=class d{constructor(o,n,e,p,j){this.fb=o,this.route=n,this.router=e,this.candidatePortalService=p,this.toaster=j,this.submitting=!1,this.showPassword=!1,this.showConfirmPassword=!1,this.applicationId=""}ngOnInit(){if(this.applicationId=this.route.snapshot.queryParamMap.get("applicationId")||"",!this.applicationId){this.toaster.warn("No application ID provided. Please apply to a job first."),this.router.navigate(["/"]);return}this.registerForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required],acceptTerms:[!1,c.requiredTrue]})}isFieldInvalid(o){let n=this.registerForm.get(o);return!!(n&&n.invalid&&(n.dirty||n.touched))}passwordMismatch(){let o=this.registerForm.get("password")?.value,n=this.registerForm.get("confirmPassword")?.value;return o!==n&&!!n}onSubmit(){if(this.registerForm.invalid){Object.keys(this.registerForm.controls).forEach(e=>{this.registerForm.get(e)?.markAsTouched()});return}if(this.passwordMismatch()){this.toaster.warn("Passwords do not match");return}this.submitting=!0;let o=this.registerForm.value,n={email:o.email,password:o.password,confirmPassword:o.confirmPassword,applicationId:this.applicationId,acceptTerms:o.acceptTerms};this.candidatePortalService.registerFromApplication(n).subscribe({next:()=>{this.toaster.success("Account created successfully! Please log in.","Welcome!"),this.router.navigate(["/account/login"],{queryParams:{returnUrl:"/candidate/dashboard"}})},error:e=>{console.error("Registration error:",e),this.toaster.error(e.error?.error?.message||"Failed to create account. Please try again."),this.submitting=!1}})}};d.\u0275fac=function(n){return new(n||d)(u(N),u(C),u(P),u(O),u(A))},d.\u0275cmp=h({type:d,selectors:[["app-candidate-register"]],decls:54,vars:17,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow-lg","border-0"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fw-bold"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control","form-control-lg"],[1,"invalid-feedback"],["for","password",1,"form-label"],[1,"input-group"],["id","password","formControlName","password",1,"form-control","form-control-lg",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas",3,"ngClass"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-text"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","formControlName","confirmPassword",1,"form-control","form-control-lg",3,"type"],[1,"form-check","mb-4"],["type","checkbox","id","acceptTerms","formControlName","acceptTerms",1,"form-check-input"],["for","acceptTerms",1,"form-check-label"],["href","#",1,"text-decoration-none"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/account/login",1,"text-decoration-none","fw-bold"],[1,"mt-4","p-3","bg-light","rounded"],[1,"text-muted","small","mb-0"],[1,"fas","fa-shield-alt","text-success","me-2"],[1,"invalid-feedback","d-block"],[1,"fas","fa-user-plus","me-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,e){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),r(7,"Create Your Account"),i(),t(8,"p",7),r(9,"Track your application and receive updates"),i()(),t(10,"form",8),v("ngSubmit",function(){return e.onSubmit()}),t(11,"div",9)(12,"label",10),r(13,"Email Address"),i(),m(14,"input",11),t(15,"div",12),r(16,"Valid email is required"),i()(),t(17,"div",9)(18,"label",13),r(19,"Password"),i(),t(20,"div",14),m(21,"input",15),t(22,"button",16),v("click",function(){return e.showPassword=!e.showPassword}),m(23,"i",17),i()(),g(24,q,2,0,"div",18),t(25,"div",19)(26,"small"),r(27,"Minimum 6 characters"),i()()(),t(28,"div",9)(29,"label",20),r(30,"Confirm Password"),i(),m(31,"input",21),g(32,D,2,0,"div",18),i(),t(33,"div",22),m(34,"input",23),t(35,"label",24),r(36," I accept the "),t(37,"a",25),r(38,"Terms and Conditions"),i()(),t(39,"div",12),r(40,"You must accept the terms and conditions"),i()(),t(41,"div",26)(42,"button",27),g(43,V,3,0,"span",28)(44,Y,3,0,"span",28),i()()(),t(45,"div",29)(46,"p",7),r(47," Already have an account? "),t(48,"a",30),r(49,"Sign In"),i()()(),t(50,"div",31)(51,"p",32),m(52,"i",33),r(53," Your information is secure and will only be used for recruitment purposes. "),i()()()()()()()),n&2){let p;a(10),l("formGroup",e.registerForm),a(4),f("is-invalid",e.isFieldInvalid("email")),a(7),f("is-invalid",e.isFieldInvalid("password")),l("type",e.showPassword?"text":"password"),a(2),l("ngClass",e.showPassword?"fa-eye-slash":"fa-eye"),a(),l("ngIf",e.isFieldInvalid("password")),a(7),f("is-invalid",e.isFieldInvalid("confirmPassword")||e.passwordMismatch()),l("type",e.showConfirmPassword?"text":"password"),a(),l("ngIf",e.passwordMismatch()&&((p=e.registerForm.get("confirmPassword"))==null?null:p.touched)),a(2),f("is-invalid",e.isFieldInvalid("acceptTerms")),a(8),l("disabled",e.submitting||e.registerForm.invalid),a(),l("ngIf",!e.submitting),a(),l("ngIf",e.submitting)}},dependencies:[y,b,w,R,E,F,I,x,k,M,T,_,S],styles:[".card[_ngcontent-%COMP%]{border-radius:16px;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;font-weight:600;padding:.75rem}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.form-control-lg[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:#ced4da}"]});let s=d;return s})();export{Q as CandidateRegisterComponent};
