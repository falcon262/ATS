import{b as cs}from"./chunk-KZDH5EJJ.js";import{b as ls}from"./chunk-S6PFZDJB.js";import{a as us,b as ds}from"./chunk-2RWPLSVX.js";import"./chunk-NKMSGKPA.js";import{a as ai}from"./chunk-R7J4LH2F.js";import{$ as zi,A as Bi,B as Ct,C as ns,D as de,E as Tt,F as St,G as wt,H as xt,I as Et,J as Hi,K as si,Z as rs,aa as os,ca as Ki,d as ji,e as ts,f as Ui,g as $i,h as Vi,i as is,na as ss,pa as as,y as F,z as Be}from"./chunk-2KNHXYM4.js";import{$ as Bo,Aa as yt,Ba as Wo,E as Lo,Ea as Ne,F as Do,H as Ro,Ha as Yo,Ja as bt,Ka as Ht,L as Fo,La as Xo,Oa as Jo,T as Oo,Ta as zt,V as jo,Va as zn,W as Xe,Wa as Zo,X as st,Xa as es,Y as Uo,Ya as Je,Z as $o,_ as Vo,a as No,da as Ho,fa as Vt,ga as zo,la as Fi,ma as Bt,na as Hn,oa as Ko,ra as qo,ua as Qo,wa as Go,xa as Oi}from"./chunk-BDOQTSQV.js";import{$ as G,$a as Te,A as Ot,Ac as Ye,B as no,Ba as $,Bc as $t,C as je,Ca as Ge,Da as ae,E as xi,Ea as Ii,F as Ei,Fa as fo,Fc as Ao,G as ro,Ga as y,Gb as vo,Gc as Li,Ha as ni,Hb as yo,I as oo,Ia as Mi,Ib as bo,J as ki,Jb as B,Kb as Pi,Lc as Io,M as so,Ma as z,N as Me,Ob as D,Oc as Di,P as Pe,Pb as R,Qa as A,Qb as ri,R as U,Ra as I,Sa as le,Sb as Z,T as L,Tc as Ri,U as qe,Ua as ce,Uc as Mo,V as oe,Va as ue,W as E,Wa as g,Wb as Co,Wc as Ve,X as v,Xa as b,Xc as ot,Y as J,Ya as C,Yc as Po,Za as M,Zb as Ni,Zc as oi,_ as Q,_a as Ce,a as Wr,aa as Qe,ab as P,b as Yr,ba as dt,bb as pe,bc as To,c as ei,cc as So,d as ti,da as Ai,e as Ti,g as Si,gb as W,ha as jt,hb as h,i as Oe,ib as Vn,j as q,ja as ao,jb as Bn,jc as wo,k as wi,ka as lo,kb as ge,l as Xr,la as $n,lc as pt,ma as co,mb as _e,mc as vt,n as Jr,na as Ut,nb as ve,o as re,oa as uo,p as Ft,q as Zr,qa as po,qc as We,ra as f,rb as ie,rc as he,sa as se,sb as go,t as eo,tb as nt,v as to,va as mo,vb as _o,vc as mt,wb as Y,x as j,xa as H,xb as rt,xc as xo,y as io,ya as ii,yb as me,yc as Eo,za as ho,zc as ko}from"./chunk-KHY5JWQN.js";import{a as V,b as $e,c as qr,d as Zt,e as Qr,f as Gr,h as Un,i as fe}from"./chunk-R3EWYZZD.js";var ps=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(r,o){r&1&&M(0,"abp-loader-bar")(1,"abp-dynamic-layout")},dependencies:[rs,Xo],encapsulation:2});let i=e;return i})();var qi=class{validateSignature(e){return Promise.resolve(null)}validateAtHash(e){return Promise.resolve(!0)}},Qi=class{};var li=class{},bl=(()=>{let e=class e extends li{now(){return Date.now()}new(){return new Date}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=jt(e)))(o||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();var Gi=class{},qt=class{},Cl=(()=>{let e=class e{constructor(){this.data=new Map}getItem(t){return this.data.get(t)}removeItem(t){this.data.delete(t)}setItem(t,r){this.data.set(t,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();var ci=class{constructor(e){this.type=e}},we=class extends ci{constructor(e,n=null){super(e),this.info=n}},Le=class extends ci{constructor(e,n=null){super(e),this.info=n}},X=class extends ci{constructor(e,n,t=null){super(e),this.reason=n,this.params=t}};function ms(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(e).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function hs(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var Kt=class{constructor(e){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.redirectUriAsPostLogoutRedirectUriFallback=!0,this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=1e3*20,this.silentRefreshTimeout=1e3*20,this.dummyClientSecret="",this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3*1e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.decreaseExpirationBySec=0,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.preserveRequestedRoute=!1,this.disableIdTokenTimer=!1,this.checkOrigin=!1,this.openUri=n=>{location.href=n},e&&Object.assign(this,e)}},kt=class{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}},Wi=class{};var fs=(()=>{let e=class e{getHashFragmentParams(t){let r=t||window.location.hash;if(r=decodeURIComponent(r),r.indexOf("#")!==0)return{};let o=r.indexOf("?");return o>-1?r=r.substr(o+1):r=r.substr(1),this.parseQueryString(r)}parseQueryString(t){let r={},o,s,a,l,c,d;if(t===null)return r;let m=t.split("&");for(let u=0;u<m.length;u++)o=m[u],s=o.indexOf("="),s===-1?(a=o,l=null):(a=o.substr(0,s),l=o.substr(s+1)),c=decodeURIComponent(a),d=decodeURIComponent(l),c.substr(0,1)==="/"&&(c=c.substr(1)),r[c]=d;return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),gs=32,Tl=64,Sl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Kn(i,e,n,t,r){let o,s,a,l,c,d,m,u,_,p,T,N,K;for(;r>=64;){for(o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],d=e[5],m=e[6],u=e[7],p=0;p<16;p++)T=t+p*4,i[p]=(n[T]&255)<<24|(n[T+1]&255)<<16|(n[T+2]&255)<<8|n[T+3]&255;for(p=16;p<64;p++)_=i[p-2],N=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,_=i[p-15],K=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,i[p]=(N+i[p-7]|0)+(K+i[p-16]|0);for(p=0;p<64;p++)N=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&d^~c&m)|0)+(u+(Sl[p]+i[p]|0)|0)|0,K=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0,u=m,m=d,d=c,c=l+N|0,l=a,a=s,s=o,o=N+K|0;e[0]+=o,e[1]+=s,e[2]+=a,e[3]+=l,e[4]+=c,e[5]+=d,e[6]+=m,e[7]+=u,t+=64,r-=64}return t}var qn=class{constructor(){this.digestLength=gs,this.blockSize=Tl,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,n=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let t=0;if(this.bytesHashed+=n,this.bufferLength>0){for(;this.bufferLength<64&&n>0;)this.buffer[this.bufferLength++]=e[t++],n--;this.bufferLength===64&&(Kn(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(n>=64&&(t=Kn(this.temp,this.state,e,t,n),n%=64);n>0;)this.buffer[this.bufferLength++]=e[t++],n--;return this}finish(e){if(!this.finished){let n=this.bytesHashed,t=this.bufferLength,r=n/536870912|0,o=n<<3,s=n%64<56?64:128;this.buffer[t]=128;for(let a=t+1;a<s-8;a++)this.buffer[a]=0;this.buffer[s-8]=r>>>24&255,this.buffer[s-7]=r>>>16&255,this.buffer[s-6]=r>>>8&255,this.buffer[s-5]=r>>>0&255,this.buffer[s-4]=o>>>24&255,this.buffer[s-3]=o>>>16&255,this.buffer[s-2]=o>>>8&255,this.buffer[s-1]=o>>>0&255,Kn(this.temp,this.state,this.buffer,0,s),this.finished=!0}for(let n=0;n<8;n++)e[n*4+0]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return this}digest(){let e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let n=0;n<this.state.length;n++)e[n]=this.state[n]}_restoreState(e,n){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=n,this.finished=!1,this.bufferLength=0}};function wl(i){let e=new qn().update(i),n=e.digest();return e.clean(),n}var qh=new Uint8Array(gs);var Yi=class{};function xl(i){if(typeof i!="string")throw new TypeError("expected string");let e=i,n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}function El(i){let e=[];for(let n=0;n<i.length;n++)e.push(String.fromCharCode(i[n]));return e.join("")}var kl=(()=>{let e=class e{calcHash(t,r){return fe(this,null,function*(){return El(wl(xl(t)))})}toHashString2(t){let r="";for(let o of t)r+=String.fromCharCode(o);return r}toHashString(t){let r=new Uint8Array(t),o="";for(let s of r)o+=String.fromCharCode(s);return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),De=(()=>{let e=class e extends Kt{constructor(t,r,o,s,a,l,c,d,m,u){super(),this.ngZone=t,this.http=r,this.config=a,this.urlHelper=l,this.logger=c,this.crypto=d,this.dateTimeService=u,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new ti,this.discoveryDocumentLoadedSubject=new ti,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.saveNoncesInLocalStorage=!1,this.debug("angular-oauth2-oidc v10"),this.document=m,a||(a={}),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),s&&(this.tokenValidationHandler=s),a&&this.configure(a);try{o?this.setStorage(o):typeof sessionStorage<"u"&&this.setStorage(sessionStorage)}catch(_){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",_)}if(this.checkLocalStorageAccessable()){let _=window?.navigator?.userAgent;(_?.includes("MSIE ")||_?.includes("Trident"))&&(this.saveNoncesInLocalStorage=!0)}this.setupRefreshTimer()}checkLocalStorageAccessable(){if(typeof window>"u")return!1;let t="test";try{return typeof window.localStorage>"u"?!1:(localStorage.setItem(t,t),localStorage.removeItem(t),!0)}catch{return!1}}configure(t){Object.assign(this,new Kt,t),this.config=Object.assign({},new Kt,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe(j(t=>t.type==="token_received")).subscribe(()=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(t={},r,o=!0){let s=!0;this.clearAutomaticRefreshTimer(),this.automaticRefreshSubscription=this.events.pipe(Pe(a=>{a.type==="token_received"?s=!0:a.type==="logout"&&(s=!1)}),j(a=>a.type==="token_expires"&&(r==null||r==="any"||a.info===r)),no(1e3)).subscribe(()=>{s&&this.refreshInternal(t,o).catch(()=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(t,r){return!this.useSilentRefresh&&this.responseType==="code"?this.refreshToken():this.silentRefresh(t,r)}loadDiscoveryDocumentAndTryLogin(t=null){return this.loadDiscoveryDocument().then(()=>this.tryLogin(t))}loadDiscoveryDocumentAndLogin(t=null){return t=t||{},this.loadDiscoveryDocumentAndTryLogin(t).then(()=>{if(!this.hasValidIdToken()||!this.hasValidAccessToken()){let r=typeof t.state=="string"?t.state:"";return this.initLoginFlow(r),!1}else return!0})}debug(...t){this.showDebugInformation&&this.logger.debug(...t)}validateUrlFromDiscoveryDocument(t){let r=[],o=this.validateUrlForHttps(t),s=this.validateUrlAgainstIssuer(t);return o||r.push("https for all urls required. Also for urls received by discovery."),s||r.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),r}validateUrlForHttps(t){if(!t)return!0;let r=t.toLowerCase();return this.requireHttps===!1||(r.match(/^http:\/\/localhost($|[:/])/)||r.match(/^http:\/\/localhost($|[:/])/))&&this.requireHttps==="remoteOnly"?!0:r.startsWith("https://")}assertUrlNotNullAndCorrectProtocol(t,r){if(!t)throw new Error(`'${r}' should not be null`);if(!this.validateUrlForHttps(t))throw new Error(`'${r}' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).`)}validateUrlAgainstIssuer(t){return!this.strictDiscoveryDocumentValidation||!t?!0:t.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){if(typeof window>"u"){this.debug("timer not supported on this plattform");return}(this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe(j(t=>t.type==="token_received")).subscribe(()=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()})}setupExpirationTimers(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),!this.disableIdTokenTimer&&this.hasValidIdToken()&&this.setupIdTokenTimer()}setupAccessTokenTimer(){let t=this.getAccessTokenExpiration(),r=this.getAccessTokenStoredAt(),o=this.calcTimeout(r,t);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=q(new Le("token_expires","access_token")).pipe(xi(o)).subscribe(s=>{this.ngZone.run(()=>{this.eventsSubject.next(s)})})})}setupIdTokenTimer(){let t=this.getIdTokenExpiration(),r=this.getIdTokenStoredAt(),o=this.calcTimeout(r,t);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=q(new Le("token_expires","id_token")).pipe(xi(o)).subscribe(s=>{this.ngZone.run(()=>{this.eventsSubject.next(s)})})})}stopAutomaticRefresh(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.clearAutomaticRefreshTimer()}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}clearAutomaticRefreshTimer(){this.automaticRefreshSubscription&&this.automaticRefreshSubscription.unsubscribe()}calcTimeout(t,r){let o=this.dateTimeService.now(),s=(r-t)*this.timeoutFactor-(o-t),a=Math.max(0,s),l=2147483647;return a>l?l:a}setStorage(t){this._storage=t,this.configChanged()}loadDiscoveryDocument(t=null){return new Promise((r,o)=>{if(t||(t=this.issuer||"",t.endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),!this.validateUrlForHttps(t)){o("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return}this.http.get(t).subscribe(s=>{if(!this.validateDiscoveryDocument(s)){this.eventsSubject.next(new X("discovery_document_validation_error",null)),o("discovery_document_validation_error");return}this.loginUrl=s.authorization_endpoint,this.logoutUrl=s.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=s.grant_types_supported,this.issuer=s.issuer,this.tokenEndpoint=s.token_endpoint,this.userinfoEndpoint=s.userinfo_endpoint||this.userinfoEndpoint,this.jwksUri=s.jwks_uri,this.sessionCheckIFrameUrl=s.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(s),this.revocationEndpoint=s.revocation_endpoint||this.revocationEndpoint,this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(a=>{let l={discoveryDocument:s,jwks:a},c=new we("discovery_document_loaded",l);this.eventsSubject.next(c),r(c)}).catch(a=>{this.eventsSubject.next(new X("discovery_document_load_error",a)),o(a)})},s=>{this.logger.error("error loading discovery document",s),this.eventsSubject.next(new X("discovery_document_load_error",s)),o(s)})})}loadJwks(){return new Promise((t,r)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(o=>{this.jwks=o,t(o)},o=>{this.logger.error("error loading jwks",o),this.eventsSubject.next(new X("jwks_load_error",o)),r(o)}):t(null)})}validateDiscoveryDocument(t){let r;return!this.skipIssuerCheck&&t.issuer!==this.issuer?(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1):(r=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint),r.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint),r.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.token_endpoint),r.length>0&&this.logger.error("error validating token_endpoint in discovery document",r),r=this.validateUrlFromDiscoveryDocument(t.revocation_endpoint),r.length>0&&this.logger.error("error validating revocation_endpoint in discovery document",r),r=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint),r.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",r),!1):(r=this.validateUrlFromDiscoveryDocument(t.jwks_uri),r.length>0?(this.logger.error("error validating jwks_uri in discovery document",r),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)))))}fetchTokenUsingPasswordFlowAndLoadUserProfile(t,r,o=new Ye){return this.fetchTokenUsingPasswordFlow(t,r,o).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((t,r)=>{let o=new Ye().set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:o,observe:"response",responseType:"text"}).subscribe(s=>{if(this.debug("userinfo received",JSON.stringify(s)),s.headers.get("content-type").startsWith("application/json")){let a=JSON.parse(s.body),l=this.getIdentityClaims()||{};if(!this.skipSubjectCheck&&this.oidc&&(!l.sub||a.sub!==l.sub)){r(`if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.
if you are not using oidc but just oauth2 password flow set oidc to false`);return}a=Object.assign({},l,a),this._storage.setItem("id_token_claims_obj",JSON.stringify(a)),this.eventsSubject.next(new we("user_profile_loaded")),t({info:a})}else this.debug("userinfo is not JSON, treating it as JWE/JWS"),this.eventsSubject.next(new we("user_profile_loaded")),t(JSON.parse(s.body))},s=>{this.logger.error("error loading user info",s),this.eventsSubject.next(new X("user_profile_load_error",s)),r(s)})})}fetchTokenUsingPasswordFlow(t,r,o=new Ye){let s={username:t,password:r};return this.fetchTokenUsingGrant("password",s,o)}fetchTokenUsingGrant(t,r,o=new Ye){this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let s=new $t({encoder:new kt}).set("grant_type",t).set("scope",this.scope);if(this.useHttpBasicAuth){let a=btoa(`${this.clientId}:${this.dummyClientSecret}`);o=o.set("Authorization","Basic "+a)}if(this.useHttpBasicAuth||(s=s.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(s=s.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(let a of Object.getOwnPropertyNames(this.customQueryParams))s=s.set(a,this.customQueryParams[a]);for(let a of Object.keys(r))s=s.set(a,r[a]);return o=o.set("Content-Type","application/x-www-form-urlencoded"),new Promise((a,l)=>{this.http.post(this.tokenEndpoint,s,{headers:o}).subscribe(c=>{this.debug("tokenResponse",c),this.storeAccessTokenResponse(c.access_token,c.refresh_token,c.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c.scope,this.extractRecognizedCustomParameters(c)),this.oidc&&c.id_token&&this.processIdToken(c.id_token,c.access_token).then(d=>{this.storeIdToken(d),a(c)}),this.eventsSubject.next(new we("token_received")),a(c)},c=>{this.logger.error("Error performing ${grantType} flow",c),this.eventsSubject.next(new X("token_error",c)),l(c)})})}refreshToken(){return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((t,r)=>{let o=new $t({encoder:new kt}).set("grant_type","refresh_token").set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token")),s=new Ye().set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){let a=btoa(`${this.clientId}:${this.dummyClientSecret}`);s=s.set("Authorization","Basic "+a)}if(this.useHttpBasicAuth||(o=o.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(o=o.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(let a of Object.getOwnPropertyNames(this.customQueryParams))o=o.set(a,this.customQueryParams[a]);this.http.post(this.tokenEndpoint,o,{headers:s}).pipe(Me(a=>this.oidc&&a.id_token?Oe(this.processIdToken(a.id_token,a.access_token,!0)).pipe(Pe(l=>this.storeIdToken(l)),re(()=>a)):q(a))).subscribe(a=>{this.debug("refresh tokenResponse",a),this.storeAccessTokenResponse(a.access_token,a.refresh_token,a.expires_in||this.fallbackAccessTokenExpirationTimeInSec,a.scope,this.extractRecognizedCustomParameters(a)),this.eventsSubject.next(new we("token_received")),this.eventsSubject.next(new we("token_refreshed")),t(a)},a=>{this.logger.error("Error refreshing token",a),this.eventsSubject.next(new X("token_refresh_error",a)),r(a)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=t=>{let r=this.processMessageEventMessage(t);this.checkOrigin&&t.origin!==location.origin&&console.error("wrong origin requested silent refresh!"),this.tryLogin({customHashFragment:r,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri||this.redirectUri}).catch(o=>this.debug("tryLogin during silent refresh failed",o))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(t={},r=!0){let o=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(typeof this.document>"u")throw new Error("silent refresh is not supported on this platform");let s=this.document.getElementById(this.silentRefreshIFrameName);s&&this.document.body.removeChild(s),this.silentRefreshSubject=o.sub;let a=this.document.createElement("iframe");a.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener();let l=this.silentRefreshRedirectUri||this.redirectUri;this.createLoginUrl(null,null,l,r,t).then(u=>{a.setAttribute("src",u),this.silentRefreshShowIFrame||(a.style.display="none"),this.document.body.appendChild(a)});let c=this.events.pipe(j(u=>u instanceof X),ki()),d=this.events.pipe(j(u=>u.type==="token_received"),ki()),m=q(new X("silent_refresh_timeout",null)).pipe(xi(this.silentRefreshTimeout));return io([c,d,m]).pipe(re(u=>{if(u instanceof X)throw u.type==="silent_refresh_timeout"?this.eventsSubject.next(u):(u=new X("silent_refresh_error",u),this.eventsSubject.next(u)),u;return u.type==="token_received"&&(u=new we("silently_refreshed"),this.eventsSubject.next(u)),u})).toPromise()}initImplicitFlowInPopup(t){return this.initLoginFlowInPopup(t)}initLoginFlowInPopup(t){return t=t||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(r=>new Promise((o,s)=>{let l=null;t.windowRef?t.windowRef&&!t.windowRef.closed&&(l=t.windowRef,l.location.href=r):l=window.open(r,"ngx-oauth2-oidc-login",this.calculatePopupFeatures(t));let c,d=T=>{this.tryLogin({customHashFragment:T,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri}).then(()=>{u(),o(!0)},N=>{u(),s(N)})},m=()=>{(!l||l.closed)&&(u(),s(new X("popup_closed",{})))};l?c=window.setInterval(m,500):s(new X("popup_blocked",{}));let u=()=>{window.clearInterval(c),window.removeEventListener("storage",p),window.removeEventListener("message",_),l!==null&&l.close(),l=null},_=T=>{let N=this.processMessageEventMessage(T);N&&N!==null?(window.removeEventListener("storage",p),d(N)):console.log("false event firing")},p=T=>{T.key==="auth_hash"&&(window.removeEventListener("message",_),d(T.newValue))};window.addEventListener("message",_),window.addEventListener("storage",p)}))}calculatePopupFeatures(t){let r=t.height||470,o=t.width||500,s=window.screenLeft+(window.outerWidth-o)/2,a=window.screenTop+(window.outerHeight-r)/2;return`location=no,toolbar=no,width=${o},height=${r},top=${a},left=${s}`}processMessageEventMessage(t){let r="#";if(this.silentRefreshMessagePrefix&&(r+=this.silentRefreshMessagePrefix),!t||!t.data||typeof t.data!="string")return;let o=t.data;if(o.startsWith(r))return"#"+o.substr(r.length)}canPerformSessionCheck(){return this.sessionChecksEnabled?this.sessionCheckIFrameUrl?this.getSessionState()?!(typeof this.document>"u"):(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1):!1}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=t=>{let r=t.origin.toLowerCase(),o=this.issuer.toLowerCase();if(this.debug("sessionCheckEventListener"),!o.startsWith(r)){this.debug("sessionCheckEventListener","wrong origin",r,"expected",o,"event",t);return}switch(t.data){case"unchanged":this.ngZone.run(()=>{this.handleSessionUnchanged()});break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()});break}this.debug("got info from session check inframe",t)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged"),this.eventsSubject.next(new Le("session_unchanged"))}handleSessionChange(){this.eventsSubject.next(new Le("session_changed")),this.stopSessionCheckTimer(),!this.useSilentRefresh&&this.responseType==="code"?this.refreshToken().then(()=>{this.debug("token refresh after session change worked")}).catch(()=>{this.debug("token refresh did not work after session changed"),this.eventsSubject.next(new Le("session_terminated")),this.logOut(!0)}):this.silentRefreshRedirectUri?(this.silentRefresh().catch(()=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new Le("session_terminated")),this.logOut(!0))}waitForSilentRefreshAfterSessionChange(){this.events.pipe(j(t=>t.type==="silently_refreshed"||t.type==="silent_refresh_timeout"||t.type==="silent_refresh_error"),ki()).subscribe(t=>{t.type!=="silently_refreshed"&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new Le("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new Le("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;let t=this.document.getElementById(this.sessionCheckIFrameName);t&&this.document.body.removeChild(t);let r=this.document.createElement("iframe");r.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener();let o=this.sessionCheckIFrameUrl;r.setAttribute("src",o),r.style.display="none",this.document.body.appendChild(r),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){let t=this.document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);let r=this.getSessionState();r||this.stopSessionCheckTimer();let o=this.clientId+" "+r;t.contentWindow.postMessage(o,this.issuer)}createLoginUrl(){return fe(this,arguments,function*(t="",r="",o="",s=!1,a={}){let l=this,c;o?c=o:c=this.redirectUri;let d=yield this.createAndSaveNonce();if(t?t=d+this.config.nonceStateSeparator+encodeURIComponent(t):t=d,!this.requestAccessToken&&!this.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");this.config.responseType?this.responseType=this.config.responseType:this.oidc&&this.requestAccessToken?this.responseType="id_token token":this.oidc&&!this.requestAccessToken?this.responseType="id_token":this.responseType="token";let m=l.loginUrl.indexOf("?")>-1?"&":"?",u=l.scope;this.oidc&&!u.match(/(^|\s)openid($|\s)/)&&(u="openid "+u);let _=l.loginUrl+m+"response_type="+encodeURIComponent(l.responseType)+"&client_id="+encodeURIComponent(l.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(c)+"&scope="+encodeURIComponent(u);if(this.responseType.includes("code")&&!this.disablePKCE){let[p,T]=yield this.createChallangeVerifierPairForPKCE();this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("PKCE_verifier",T):this._storage.setItem("PKCE_verifier",T),_+="&code_challenge="+p,_+="&code_challenge_method=S256"}r&&(_+="&login_hint="+encodeURIComponent(r)),l.resource&&(_+="&resource="+encodeURIComponent(l.resource)),l.oidc&&(_+="&nonce="+encodeURIComponent(d)),s&&(_+="&prompt=none");for(let p of Object.keys(a))_+="&"+encodeURIComponent(p)+"="+encodeURIComponent(a[p]);if(this.customQueryParams)for(let p of Object.getOwnPropertyNames(this.customQueryParams))_+="&"+p+"="+encodeURIComponent(this.customQueryParams[p]);return _})}initImplicitFlowInternal(t="",r=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let o={},s=null;typeof r=="string"?s=r:typeof r=="object"&&(o=r),this.createLoginUrl(t,s,null,!1,o).then(this.config.openUri).catch(a=>{console.error("Error in initImplicitFlow",a),this.inImplicitFlow=!1})}initImplicitFlow(t="",r=""){this.loginUrl!==""?this.initImplicitFlowInternal(t,r):this.events.pipe(j(o=>o.type==="discovery_document_loaded")).subscribe(()=>this.initImplicitFlowInternal(t,r))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(t){let r=this;if(t.onTokenReceived){let o={idClaims:r.getIdentityClaims(),idToken:r.getIdToken(),accessToken:r.getAccessToken(),state:r.state};t.onTokenReceived(o)}}storeAccessTokenResponse(t,r,o,s,a){if(this._storage.setItem("access_token",t),s&&!Array.isArray(s)?this._storage.setItem("granted_scopes",JSON.stringify(s.split(" "))):s&&Array.isArray(s)&&this._storage.setItem("granted_scopes",JSON.stringify(s)),this._storage.setItem("access_token_stored_at",""+this.dateTimeService.now()),o){let l=o*1e3,d=this.dateTimeService.new().getTime()+l;this._storage.setItem("expires_at",""+d)}r&&this._storage.setItem("refresh_token",r),a&&a.forEach((l,c)=>{this._storage.setItem(c,l)})}tryLogin(t=null){return this.config.responseType==="code"?this.tryLoginCodeFlow(t).then(()=>!0):this.tryLoginImplicitFlow(t)}parseQueryString(t){return!t||t.length===0?{}:(t.charAt(0)==="?"&&(t=t.substr(1)),this.urlHelper.parseQueryString(t))}tryLoginCodeFlow(t=null){return fe(this,null,function*(){t=t||{};let r=t.customHashFragment?t.customHashFragment.substring(1):window.location.search,o=this.getCodePartsFromUrl(r),s=o.code,a=o.state,l=o.session_state;if(!t.preventClearHashAfterLogin){let m=location.origin+location.pathname+location.search.replace(/code=[^&$]*/,"").replace(/scope=[^&$]*/,"").replace(/state=[^&$]*/,"").replace(/session_state=[^&$]*/,"").replace(/^\?&/,"?").replace(/&$/,"").replace(/^\?$/,"").replace(/&+/g,"&").replace(/\?&/,"?").replace(/\?$/,"")+location.hash;history.replaceState(null,window.name,m)}let[c,d]=this.parseState(a);if(this.state=d,o.error){this.debug("error trying to login"),this.handleLoginError(t,o);let m=new X("code_error",{},o);return this.eventsSubject.next(m),Promise.reject(m)}if(!t.disableNonceCheck){if(!c)return this.saveRequestedRoute(),Promise.resolve();if(!t.disableOAuth2StateCheck&&!this.validateNonce(c)){let u=new X("invalid_nonce_in_state",null);return this.eventsSubject.next(u),Promise.reject(u)}}return this.storeSessionState(l),s&&(yield this.getTokenFromCode(s,t),this.restoreRequestedRoute()),Promise.resolve()})}saveRequestedRoute(){this.config.preserveRequestedRoute&&this._storage.setItem("requested_route",window.location.pathname+window.location.search)}restoreRequestedRoute(){let t=this._storage.getItem("requested_route");t&&history.replaceState(null,"",window.location.origin+t)}getCodePartsFromUrl(t){return!t||t.length===0?this.urlHelper.getHashFragmentParams():(t.charAt(0)==="?"&&(t=t.substr(1)),this.urlHelper.parseQueryString(t))}getTokenFromCode(t,r){let o=new $t({encoder:new kt}).set("grant_type","authorization_code").set("code",t).set("redirect_uri",r.customRedirectUri||this.redirectUri);if(!this.disablePKCE){let s;this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?s=localStorage.getItem("PKCE_verifier"):s=this._storage.getItem("PKCE_verifier"),s?o=o.set("code_verifier",s):console.warn("No PKCE verifier found in oauth storage!")}return this.fetchAndProcessToken(o,r)}fetchAndProcessToken(t,r){r=r||{},this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let o=new Ye().set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){let s=btoa(`${this.clientId}:${this.dummyClientSecret}`);o=o.set("Authorization","Basic "+s)}return this.useHttpBasicAuth||(t=t.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(t=t.set("client_secret",this.dummyClientSecret)),new Promise((s,a)=>{if(this.customQueryParams)for(let l of Object.getOwnPropertyNames(this.customQueryParams))t=t.set(l,this.customQueryParams[l]);this.http.post(this.tokenEndpoint,t,{headers:o}).subscribe(l=>{this.debug("refresh tokenResponse",l),this.storeAccessTokenResponse(l.access_token,l.refresh_token,l.expires_in||this.fallbackAccessTokenExpirationTimeInSec,l.scope,this.extractRecognizedCustomParameters(l)),this.oidc&&l.id_token?this.processIdToken(l.id_token,l.access_token,r.disableNonceCheck).then(c=>{this.storeIdToken(c),this.eventsSubject.next(new we("token_received")),this.eventsSubject.next(new we("token_refreshed")),s(l)}).catch(c=>{this.eventsSubject.next(new X("token_validation_error",c)),console.error("Error validating tokens"),console.error(c),a(c)}):(this.eventsSubject.next(new we("token_received")),this.eventsSubject.next(new we("token_refreshed")),s(l))},l=>{console.error("Error getting token",l),this.eventsSubject.next(new X("token_error",l)),a(l)})})}tryLoginImplicitFlow(t=null){t=t||{};let r;t.customHashFragment?r=this.urlHelper.getHashFragmentParams(t.customHashFragment):r=this.urlHelper.getHashFragmentParams(),this.debug("parsed url",r);let o=r.state,[s,a]=this.parseState(o);if(this.state=a,r.error){this.debug("error trying to login"),this.handleLoginError(t,r);let u=new X("token_error",{},r);return this.eventsSubject.next(u),Promise.reject(u)}let l=r.access_token,c=r.id_token,d=r.session_state,m=r.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!l||this.requestAccessToken&&!t.disableOAuth2StateCheck&&!o||this.oidc&&!c)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!d&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableNonceCheck&&!this.validateNonce(s)){let _=new X("invalid_nonce_in_state",null);return this.eventsSubject.next(_),Promise.reject(_)}return this.requestAccessToken&&this.storeAccessTokenResponse(l,null,r.expires_in||this.fallbackAccessTokenExpirationTimeInSec,m),this.oidc?this.processIdToken(c,l,t.disableNonceCheck).then(u=>t.validationHandler?t.validationHandler({accessToken:l,idClaims:u.idTokenClaims,idToken:u.idToken,state:o}).then(()=>u):u).then(u=>(this.storeIdToken(u),this.storeSessionState(d),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.eventsSubject.next(new we("token_received")),this.callOnTokenReceivedIfExists(t),this.inImplicitFlow=!1,!0)).catch(u=>(this.eventsSubject.next(new X("token_validation_error",u)),this.logger.error("Error validating tokens"),this.logger.error(u),Promise.reject(u))):(this.eventsSubject.next(new we("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))}parseState(t){let r=t,o="";if(t){let s=t.indexOf(this.config.nonceStateSeparator);s>-1&&(r=t.substr(0,s),o=t.substr(s+this.config.nonceStateSeparator.length))}return[r,o]}validateNonce(t){let r;return this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?r=localStorage.getItem("nonce"):r=this._storage.getItem("nonce"),r!==t?(console.error("Validating access_token failed, wrong state/nonce.",r,t),!1):!0}storeIdToken(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+this.dateTimeService.now())}storeSessionState(t){this._storage.setItem("session_state",t)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(t,r){t.onLoginError&&t.onLoginError(r),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash()}getClockSkewInMsec(t=6e5){return!this.clockSkewInSec&&this.clockSkewInSec!==0?t:this.clockSkewInSec*1e3}processIdToken(t,r,o=!1){let s=t.split("."),a=this.padBase64(s[0]),l=ms(a),c=JSON.parse(l),d=this.padBase64(s[1]),m=ms(d),u=JSON.parse(m),_;if(this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?_=localStorage.getItem("nonce"):_=this._storage.getItem("nonce"),Array.isArray(u.aud)){if(u.aud.every(k=>k!==this.clientId)){let k="Wrong audience: "+u.aud.join(",");return this.logger.warn(k),Promise.reject(k)}}else if(u.aud!==this.clientId){let k="Wrong audience: "+u.aud;return this.logger.warn(k),Promise.reject(k)}if(!u.sub){let k="No sub claim in id_token";return this.logger.warn(k),Promise.reject(k)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==u.sub){let k=`After refreshing, we got an id_token for another user (sub). Expected sub: ${this.silentRefreshSubject}, received sub: ${u.sub}`;return this.logger.warn(k),Promise.reject(k)}if(!u.iat){let k="No iat claim in id_token";return this.logger.warn(k),Promise.reject(k)}if(!this.skipIssuerCheck&&u.iss!==this.issuer){let k="Wrong issuer: "+u.iss;return this.logger.warn(k),Promise.reject(k)}if(!o&&u.nonce!==_){let k="Wrong nonce: "+u.nonce;return this.logger.warn(k),Promise.reject(k)}if(Object.prototype.hasOwnProperty.call(this,"responseType")&&(this.responseType==="code"||this.responseType==="id_token")&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!u.at_hash){let k="An at_hash is needed!";return this.logger.warn(k),Promise.reject(k)}let p=this.dateTimeService.now(),T=u.iat*1e3,N=u.exp*1e3,K=this.getClockSkewInMsec();if(T-K>=p||N+K-this.decreaseExpirationBySec<=p){let k="Token has expired";return console.error(k),console.error({now:p,issuedAtMSec:T,expiresAtMSec:N}),Promise.reject(k)}let ee={accessToken:r,idToken:t,jwks:this.jwks,idTokenClaims:u,idTokenHeader:c,loadKeys:()=>this.loadJwks()};return this.disableAtHashCheck?this.checkSignature(ee).then(()=>({idToken:t,idTokenClaims:u,idTokenClaimsJson:m,idTokenHeader:c,idTokenHeaderJson:l,idTokenExpiresAt:N})):this.checkAtHash(ee).then(k=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!k){let ne="Wrong at_hash";return this.logger.warn(ne),Promise.reject(ne)}return this.checkSignature(ee).then(()=>{let ne=!this.disableAtHashCheck,it={idToken:t,idTokenClaims:u,idTokenClaimsJson:m,idTokenHeader:c,idTokenHeaderJson:l,idTokenExpiresAt:N};return ne?this.checkAtHash(ee).then(Re=>{if(this.requestAccessToken&&!Re){let ye="Wrong at_hash";return this.logger.warn(ye),Promise.reject(ye)}else return it}):it})})}getIdentityClaims(){let t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null}getGrantedScopes(){let t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(t){for(;t.length%4!==0;)t+="=";return t}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){let t=this._storage.getItem("expires_at"),r=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<r.getTime()-this.getClockSkewInMsec())}return!1}hasValidIdToken(){if(this.getIdToken()){let t=this._storage.getItem("id_token_expires_at"),r=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<r.getTime()-this.getClockSkewInMsec())}return!1}getCustomTokenResponseProperty(t){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(t)>=0&&this._storage.getItem(t)!==null?JSON.parse(this._storage.getItem(t)):null}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(t={},r=""){let o=!1;typeof t=="boolean"&&(o=t,t={});let s=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach(l=>this._storage.removeItem(l)),this.silentRefreshSubject=null,this.eventsSubject.next(new Le("logout")),!this.logoutUrl||o)return;let a;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)a=this.logoutUrl.replace(/\{\{id_token\}\}/,encodeURIComponent(s)).replace(/\{\{client_id\}\}/,encodeURIComponent(this.clientId));else{let l=new $t({encoder:new kt});s&&(l=l.set("id_token_hint",s));let c=this.postLogoutRedirectUri||this.redirectUriAsPostLogoutRedirectUriFallback&&this.redirectUri||"";c&&(l=l.set("post_logout_redirect_uri",c),r&&(l=l.set("state",r)));for(let d in t)l=l.set(d,t[d]);a=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+l.toString()}this.config.openUri(a)}createAndSaveNonce(){let t=this;return this.createNonce().then(function(r){return t.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("nonce",r):t._storage.setItem("nonce",r),r})}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();let t=this.document.getElementById(this.silentRefreshIFrameName);t&&t.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();let r=this.document.getElementById(this.sessionCheckIFrameName);r&&r.remove()}createNonce(){return new Promise(t=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=45,s="",a=typeof self>"u"?null:self.crypto||self.msCrypto;if(a){let l=new Uint8Array(o);a.getRandomValues(l),l.map||(l.map=Array.prototype.map),l=l.map(c=>r.charCodeAt(c%r.length)),s=String.fromCharCode.apply(null,l)}else for(;0<o--;)s+=r[Math.random()*r.length|0];t(hs(s))})}checkAtHash(t){return fe(this,null,function*(){return this.tokenValidationHandler?this.tokenValidationHandler.validateAtHash(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)})}checkSignature(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(t="",r={}){return this.responseType==="code"?this.initCodeFlow(t,r):this.initImplicitFlow(t,r)}initCodeFlow(t="",r={}){this.loginUrl!==""?this.initCodeFlowInternal(t,r):this.events.pipe(j(o=>o.type==="discovery_document_loaded")).subscribe(()=>this.initCodeFlowInternal(t,r))}initCodeFlowInternal(t="",r={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let o={},s=null;typeof r=="string"?s=r:typeof r=="object"&&(o=r),this.createLoginUrl(t,s,null,!1,o).then(this.config.openUri).catch(a=>{console.error("Error in initAuthorizationCodeFlow"),console.error(a)})}createChallangeVerifierPairForPKCE(){return fe(this,null,function*(){if(!this.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");let t=yield this.createNonce(),r=yield this.crypto.calcHash(t,"sha-256");return[hs(r),t]})}extractRecognizedCustomParameters(t){let r=new Map;return this.config.customTokenParameters&&this.config.customTokenParameters.forEach(o=>{t[o]&&r.set(o,JSON.stringify(t[o]))}),r}revokeTokenAndLogout(t={},r=!1){let o=this.revocationEndpoint,s=this.getAccessToken(),a=this.getRefreshToken();if(!s)return Promise.resolve();let l=new $t({encoder:new kt}),c=new Ye().set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){let d=btoa(`${this.clientId}:${this.dummyClientSecret}`);c=c.set("Authorization","Basic "+d)}if(this.useHttpBasicAuth||(l=l.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(l=l.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(let d of Object.getOwnPropertyNames(this.customQueryParams))l=l.set(d,this.customQueryParams[d]);return new Promise((d,m)=>{let u,_;if(s){let p=l.set("token",s).set("token_type_hint","access_token");u=this.http.post(o,p,{headers:c})}else u=q(null);if(a){let p=l.set("token",a).set("token_type_hint","refresh_token");_=this.http.post(o,p,{headers:c})}else _=q(null);r&&(u=u.pipe(Ot(p=>p.status===0?q(null):wi(p))),_=_.pipe(Ot(p=>p.status===0?q(null):wi(p)))),Ft([u,_]).subscribe(p=>{this.logOut(t),d(p),this.logger.info("Token successfully revoked")},p=>{this.logger.error("Error revoking token",p),this.eventsSubject.next(new X("token_revoke_error",p)),m(p)})})}clearLocationHash(){location.hash!=""&&(location.hash="")}};e.\u0275fac=function(r){return new(r||e)(E(Mi),E(Ao),E(qt,8),E(Wi,8),E(Kt,8),E(fs),E(Gi),E(Yi,8),E(dt),E(li))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Xi=class{},Qn=class{handleError(e){return wi(e)}},Al=(()=>{let e=class e{constructor(t,r,o){this.oAuthService=t,this.errorHandler=r,this.moduleConfig=o}checkUrl(t){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(t):this.moduleConfig.resourceServer.allowedUrls?!!this.moduleConfig.resourceServer.allowedUrls.find(r=>t.toLowerCase().startsWith(r.toLowerCase())):!0}intercept(t,r){let o=t.url.toLowerCase();return!this.moduleConfig||!this.moduleConfig.resourceServer||!this.checkUrl(o)?r.handle(t):this.moduleConfig.resourceServer.sendAccessToken?to(q(this.oAuthService.getAccessToken()).pipe(j(a=>!!a)),this.oAuthService.events.pipe(j(a=>a.type==="token_received"),Jr(this.oAuthService.waitForTokenInMsec||0),Ot(()=>q(null)),re(()=>this.oAuthService.getAccessToken()))).pipe(je(1),Zr(a=>{if(a){let l="Bearer "+a,c=t.headers.set("Authorization",l);t=t.clone({headers:c})}return r.handle(t).pipe(Ot(l=>this.errorHandler.handleError(l)))})):r.handle(t).pipe(Ot(a=>this.errorHandler.handleError(a)))}};e.\u0275fac=function(r){return new(r||e)(E(De),E(Xi),E(Qi,8))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function Il(){return console}function Ml(){return typeof sessionStorage<"u"?sessionStorage:new Cl}function Pl(i=null,e=qi){return J([De,fs,{provide:Gi,useFactory:Il},{provide:qt,useFactory:Ml},{provide:Wi,useClass:e},{provide:Yi,useClass:kl},{provide:Xi,useClass:Qn},{provide:Qi,useValue:i},{provide:Li,useClass:Al,multi:!0},{provide:li,useClass:bl}])}var _s=(()=>{let e=class e{static forRoot(t=null,r=qi){return{ngModule:e,providers:[Pl(t,r)]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=qe({imports:[mt]});let i=e;return i})();var Ll={provide:yt,useFactory:()=>{let i=v(Vt);return()=>{let e=i.getEnvironment();if(!e.oAuthConfig){console.warn("The oAuthConfig env is missing on environment.ts");return}let{issuer:n}=e.oAuthConfig,t=n.endsWith("/")?n:`${n}/`;window.open(`${t}Account/Manage?returnUrl=${window.location.href}`,"_self")}}},Dl=(()=>{let e=class e{constructor(){this.oAuthService=v(De),this.authService=v(st)}canActivate(t,r){if(this.oAuthService.hasValidAccessToken())return!0;let s={returnUrl:r.url};return this.authService.navigateToLogin(s),!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Rl=(i,e)=>{let n=v(De),t=v(st);if(n.hasValidAccessToken())return!0;let o={returnUrl:e.url};return t.navigateToLogin(o),!1},Fl=(()=>{let e=class e{constructor(t,r,o){this.oAuthService=t,this.environmentService=r,this.options=o,this.listenToSetEnvironment()}listenToSetEnvironment(){this.environmentService.createOnUpdateStream(t=>t).pipe(re(t=>t.oAuthConfig),j(t=>!No(t,this.options.environment.oAuthConfig))).subscribe(t=>{this.oAuthService.configure(t)})}};e.\u0275fac=function(r){return new(r||e)(E(De),E(Vt),E(Vo))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Ol=(()=>{let e=class e{constructor(t,r,o,s){this.oAuthService=t,this.sessionState=r,this.httpWaitService=o,this.tenantKey=s}intercept(t,r){this.httpWaitService.addRequest(t);let s=t.context?.get(Ko)?t:t.clone({setHeaders:this.getAdditionalHeaders(t.headers)});return r.handle(s).pipe(oo(()=>this.httpWaitService.deleteRequest(t)))}getAdditionalHeaders(t){let r={},o=this.oAuthService.getAccessToken();!t?.has("Authorization")&&o&&(r.Authorization=`Bearer ${o}`);let s=this.sessionState.getLanguage();!t?.has("Accept-Language")&&s&&(r["Accept-Language"]=s);let a=this.sessionState.getTenant();return!t?.has(this.tenantKey)&&a?.id&&(r[this.tenantKey]=a.id),r["X-Requested-With"]="XMLHttpRequest",r}};e.\u0275fac=function(r){return new(r||e)(E(De),E(Bt),E(Qo),E(Hn))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Gn=localStorage;function ui(i=Gn){["access_token","id_token","refresh_token","nonce","PKCE_verifier","expires_at","id_token_claims_obj","id_token_expires_at","id_token_stored_at","access_token_stored_at","granted_scopes","session_state"].forEach(n=>i.removeItem(n))}var ys=(()=>{var e;let n=class n{constructor(){Qr(this,e);Gr(this,e,"remember_me"),this.localStorageService=v(Fi)}set(r){this.localStorageService.setItem(Zt(this,e),JSON.stringify(r))}remove(){this.localStorageService.removeItem(Zt(this,e))}get(){return!!JSON.parse(this.localStorageService.getItem(Zt(this,e))||"false")}getFromToken(r){let o=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");try{return!!JSON.parse(atob(o))[Zt(this,e)]}catch{return!1}}};e=new WeakMap,n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})(),bs=function(i,e){let n=e.get(bt),t=e.get(Ve),r=e.get(ys),o=e.get(st);return Yr(Me(()=>n.refreshAppState()),Pe(()=>{r.set(i.rememberMe||r.get()||r.getFromToken(o.getAccessToken())),i.redirectUrl&&t.navigate([i.redirectUrl])}))};function Jn(i){let e=new Date().getTime();return i<e}var jl=function(i){let e=i.get(bt);i.get(De).hasValidAccessToken()&&!e.getDeep("currentUser.id")&&ui()},Ji=class{constructor(e){this.injector=e,this.catchError=n=>(this.httpErrorReporter.reportError(n),q(null)),this.httpErrorReporter=e.get(zo),this.environment=e.get(Vt),this.configState=e.get(bt),this.oAuthService=e.get(De),this.sessionState=e.get(Bt),this.localStorageService=e.get(Fi),this.oAuthConfig=this.environment.getEnvironment().oAuthConfig||{},this.tenantKey=e.get(Hn),this.router=e.get(Ve),this.oAuthErrorFilterService=e.get(Cs),this.rememberMeService=e.get(ys),this.windowService=e.get(Yo),this.listenToOauthErrors()}init(){return fe(this,null,function*(){return this.oAuthConfig.clientId&&Ul(this.oAuthConfig.clientId,Gn)&&ui(Gn),this.oAuthService.configure(this.oAuthConfig),this.oAuthService.events.pipe(j(e=>e.type==="token_refresh_error")).subscribe(()=>this.navigateToLogin()),this.navigateToPreviousUrl(),this.oAuthService.loadDiscoveryDocument().then(()=>Jn(this.oAuthService.getAccessTokenExpiration())&&this.oAuthService.getRefreshToken()?this.refreshToken():Promise.resolve()).catch(this.catchError)})}navigateToPreviousUrl(){let{responseType:e}=this.oAuthConfig;e==="code"&&this.oAuthService.events.pipe(j(n=>n.type==="token_received"&&!!this.oAuthService.state),je(1),re(()=>{let n=decodeURIComponent(this.oAuthService.state);return n&&n!=="/"?n:"/"}),Me(n=>this.configState.getOne$("currentUser").pipe(j(t=>!!t?.isAuthenticated),Pe(()=>this.router.navigateByUrl(n))))).subscribe()}refreshToken(){return this.oAuthService.refreshToken().catch(()=>ui())}listenToOauthErrors(){this.oAuthService.events.pipe(j(e=>e instanceof X),Pe(e=>{this.oAuthErrorFilterService.run(e)||ui()}),Me(()=>this.configState.refreshAppState())).subscribe()}};function Ul(i,e){let n="abpOAuthClientId";if(!e.getItem(n))return e.setItem(n,i),!1;let t=e.getItem(n)!==i;return t&&e.setItem(n,i),t}var Wn=class i extends Ji{constructor(){super(...arguments),this.isInternalAuth=!1}init(){return fe(this,null,function*(){return this.checkRememberMeOption(),this.listenToTokenReceived(),Un(i.prototype,this,"init").call(this).then(()=>this.oAuthService.tryLogin().catch(Ho)).then(()=>this.oAuthService.setupAutomaticSilentRefresh())})}checkRememberMeOption(){let e=this.oAuthService.getAccessToken(),n=Jn(this.oAuthService.getAccessTokenExpiration()),t=this.rememberMeService.get();if(e&&!t){let r=this.rememberMeService.getFromToken(e);this.rememberMeService.set(!!r)}t=this.rememberMeService.get(),e&&n&&!t&&(this.rememberMeService.remove(),this.oAuthService.logOut())}getCultureParams(e){let n=this.sessionState.getLanguage();return V(V({},n&&{culture:n,"ui-culture":n}),e)}setUICulture(){let e=new URLSearchParams(window.location.search);this.configState.uiCultureFromAuthCodeFlow=e.get("ui-culture")}replaceURLParams(){let e=this.windowService.window.location,n=this.windowService.window.history,t=e.search.replace(/([?&])iss=[^&]*&?/,"$1").replace(/([?&])culture=[^&]*&?/,"$1").replace(/([?&])ui-culture=[^&]*&?/,"$1").replace(/[?&]+$/,""),r=e.origin+e.pathname+t+e.hash;n.replaceState(null,"",r)}listenToTokenReceived(){this.oAuthService.events.pipe(j(e=>e.type==="token_received"),Pe(()=>{this.setUICulture(),this.replaceURLParams()}),je(1)).subscribe()}navigateToLogin(e){let n="";e?.returnUrl&&(n=e.returnUrl);let t=this.getCultureParams(e);this.oAuthService.initCodeFlow(n,t)}checkIfInternalAuth(e){return this.oAuthService.initCodeFlow("",this.getCultureParams(e)),!1}logout(e){return this.rememberMeService.remove(),e?.noRedirectToLogoutUrl?(this.router.navigate(["/"]),Oe(this.oAuthService.revokeTokenAndLogout(!0))):Oe(this.oAuthService.revokeTokenAndLogout(this.getCultureParams(e)))}login(e){return this.oAuthService.initCodeFlow("",this.getCultureParams(e)),q(null)}},Yn=class i extends Ji{constructor(){super(...arguments),this.isInternalAuth=!0}listenToTokenExpiration(){this.oAuthService.events.pipe(j(e=>e instanceof Le&&e.type==="token_expires"&&e.info==="access_token")).subscribe(()=>{this.oAuthService.getRefreshToken()?this.refreshToken():(this.oAuthService.logOut(),this.rememberMeService.remove(),this.configState.refreshAppState().subscribe())})}init(){return fe(this,null,function*(){return this.checkRememberMeOption(),Un(i.prototype,this,"init").call(this).then(()=>this.listenToTokenExpiration())})}checkRememberMeOption(){let e=this.oAuthService.getAccessToken(),n=Jn(this.oAuthService.getAccessTokenExpiration()),t=this.rememberMeService.get();e&&n&&!t&&(this.rememberMeService.remove(),this.oAuthService.logOut())}navigateToLogin(e){return this.injector.get(Ve).navigate(["/account/login"],{queryParams:e})}checkIfInternalAuth(){return!0}login(e){let n=this.sessionState.getTenant();return Oe(this.oAuthService.fetchTokenUsingPasswordFlow(e.username,e.password,new Ye(V({},n&&n.id&&{[this.tenantKey]:n.id})))).pipe(bs(e,this.injector))}logout(){let e=this.injector.get(Ve);return Oe(this.oAuthService.revokeTokenAndLogout(!0)).pipe(Me(()=>this.configState.refreshAppState()),Pe(()=>{this.rememberMeService.remove(),e.navigateByUrl("/")}))}refreshToken(){return this.oAuthService.refreshToken().catch(()=>{ui(),this.rememberMeService.remove()})}},vs={Code(i){return new Wn(i)},Password(i){return new Yn(i)}},$l=(()=>{let e=class e{get oidc(){return this.oAuthService.oidc}set oidc(t){this.oAuthService.oidc=t}get isInternalAuth(){return this.strategy.isInternalAuth}constructor(t){this.injector=t,this.oAuthService=this.injector.get(De)}init(){return fe(this,null,function*(){let r=this.injector.get(Vt).getEnvironment$().pipe(re(o=>o?.oAuthConfig),j(Boolean),Pe(o=>{this.strategy=o.responseType==="code"?vs.Code(this.injector):vs.Password(this.injector)}),Me(()=>Oe(this.strategy.init())),je(1));return yield Xr(r)})}logout(t){return this.strategy?this.strategy.logout(t):Si}navigateToLogin(t){this.strategy.navigateToLogin(t)}login(t){return this.strategy.login(t)}get isAuthenticated(){return this.oAuthService.hasValidAccessToken()}loginUsingGrant(t,r,o){let{clientId:s,dummyClientSecret:a}=this.oAuthService,l=this.oAuthService.getAccessToken(),c=V({access_token:l,grant_type:t,client_id:s},r);return a&&(c.client_secret=a),this.oAuthService.fetchTokenUsingGrant(t,c,o)}getRefreshToken(){return this.oAuthService.getRefreshToken()}getAccessToken(){return this.oAuthService.getAccessToken()}refreshToken(){return this.oAuthService.refreshToken()}getAccessTokenExpiration(){return this.oAuthService.getAccessTokenExpiration()}};e.\u0275fac=function(r){return new(r||e)(E(Qe))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Cs=(()=>{let e=class e extends Uo{constructor(){super(...arguments),this._filters=Ai([]),this.filters=this._filters.asReadonly()}get(t){return this._filters().find(({id:r})=>r===t)}add(t){this._filters.update(r=>[...r,t])}patch(t){let r=this.filters().find(({id:o})=>o===t.id);r&&Object.assign(r,t)}remove(t){this.filters().find(({id:o})=>o===t)&&this._filters.update(o=>o.filter(({id:s})=>s!==t))}run(t){return this.filters().filter(({executable:r})=>!!r).map(({execute:r})=>r(t)).some(r=>r)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=jt(e)))(o||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Ts(){let i=[{provide:st,useClass:$l},{provide:jo,useClass:Dl},{provide:Xe,useValue:Rl},{provide:zn,useClass:Ol},{provide:Wo,useValue:bs},{provide:qo,useValue:jl},{provide:Li,useExisting:zn,multi:!0},Ll,z(()=>{v(Fl)}),_s.forRoot().providers,{provide:qt,useClass:Fi},{provide:$o,useExisting:Cs}];return J(i)}var Vl=[z(()=>{Bl()})];function Bl(){v(Ne).add([{path:void 0,name:"AbpIdentity::Menu:IdentityManagement",parentName:"AbpUiNavigation::Menu:Administration",requiredPolicy:"AbpIdentity.Roles || AbpIdentity.Users",iconClass:"fa fa-id-card-o",layout:"application",order:1},{path:"/identity/roles",name:"AbpIdentity::Roles",parentName:"AbpIdentity::Menu:IdentityManagement",requiredPolicy:"AbpIdentity.Roles",order:1},{path:"/identity/users",name:"AbpIdentity::Users",parentName:"AbpIdentity::Menu:IdentityManagement",requiredPolicy:"AbpIdentity.Users",order:2}])}function Ss(){return J([Vl])}var Hl=[z(()=>{zl()})];function zl(){v(Ne).add([{path:void 0,name:"AbpAccount::Menu:Account",invisible:!0,layout:"account",breadcrumbText:"AbpAccount::Menu:Account",iconClass:"bi bi-person-fill-gear",order:1},{path:"/account/login",name:"AbpAccount::Login",parentName:"AbpAccount::Menu:Account",layout:"account",order:1},{path:"/account/register",name:"AbpAccount::Register",parentName:"AbpAccount::Menu:Account",layout:"account",order:2},{path:"/account/manage",name:"AbpAccount::MyAccount",parentName:"AbpAccount::Menu:Account",layout:"application",breadcrumbText:"AbpAccount::Manage",iconClass:"bi bi-kanban-fill",order:3},{path:"/account/forgot-password",parentName:"AbpAccount::Menu:Account",name:"AbpAccount::ForgotPassword",layout:"account",invisible:!0},{path:"/account/reset-password",parentName:"AbpAccount::Menu:Account",name:"AbpAccount::ResetPassword",layout:"account",invisible:!0}])}function Kl(i){return()=>{let e=i.get(Ve),n=i.get(Ne),{path:t}=n.find(r=>r.name==="AbpAccount::MyAccount");e.navigateByUrl(t)}}function ws(){return J([Hl,{provide:yt,useFactory:Kl,deps:[Qe]}])}var ql=[z(()=>{Ql()})];function Ql(){v(Ne).add([{path:void 0,name:"AbpTenantManagement::Menu:TenantManagement",parentName:"AbpUiNavigation::Menu:Administration",requiredPolicy:"AbpTenantManagement.Tenants",layout:"application",iconClass:"fa fa-users",order:2},{path:"/tenant-management/tenants",name:"AbpTenantManagement::Tenants",parentName:"AbpTenantManagement::Menu:TenantManagement",requiredPolicy:"AbpTenantManagement.Tenants",order:1}])}function xs(){return J([ql])}var Zn={};function ks({cultureNameLocaleFileMap:i={},errorHandlerFn:e=Gl}={}){return n=>{Zn=V(V({},Jo),i);let t=`/locales/${Zn[n]||n}`;return new Promise((r,o)=>import(`@angular/common${t}`).then(s=>{let a=s;for(;a.default;)a=a.default;r({default:a})}).catch(s=>{e({resolve:r,reject:o,error:s,locale:n})}))}}var Es={};function Gl(n){return fe(this,arguments,function*({locale:i,resolve:e}){if(Es[i]){e({default:Es[Zn[i]||i]});return}To()&&console.error(`Cannot find the ${i} locale file. You can check how can add new culture at https://abp.io/docs/latest/framework/ui/angular/localization#adding-a-new-culture`),e()})}function Wl(i,e){if(i&1&&M(0,"lpx-icon",1),i&2){let n=h(2);g("iconClass",n.avatar.source)}}function Yl(i,e){if(i&1&&M(0,"img",2),i&2){let n=h(2);g("src",n.avatar.source,uo)}}function Xl(i,e){if(i&1&&(b(0,"div",0),A(1,Wl,1,1,"lpx-icon",1)(2,Yl,1,1,"img",2),C()),i&2){let n,t=h();f(),I((n=t.avatar.type)==="icon"?1:n==="image"?2:-1)}}function Jl(i,e){if(i&1&&(b(0,"a",0),M(1,"div",2),C()),i&2){let n="url("+h().logoUrl+")";f(),go("background-image",n)}}function Zl(i,e){if(i&1&&(M(0,"div",4),b(1,"div",5),Y(2),C()),i&2){let n=h(2);f(2),me(" ",n.appName," ")}}function ec(i,e){if(i&1&&(b(0,"div",3),Y(1),C()),i&2){let n=h(2);f(),me(" ",n.appName," ")}}function tc(i,e){if(i&1&&(b(0,"a",1),A(1,Zl,3,1)(2,ec,2,1,"div",3),C()),i&2){let n,t=h();f(),I((n=t.layout())===t.layoutOptions.sideMenu?1:n===t.layoutOptions.topMenu?2:-1)}}var At=i=>({$implicit:i});function ic(i,e){if(i&1&&M(0,"lpx-icon",5),i&2){let n=h().$implicit;g("iconClass",n.icon)}}function nc(i,e){i&1&&P(0)}function rc(i,e){i&1&&(b(0,"li",7),M(1,"lpx-icon",8),C())}function oc(i,e){if(i&1){let n=pe();b(0,"li",4),W("click",function(){let r=Q(n).$implicit,o=h();return G(o.onClick(r))})("lpxClickOutside",function(){let r=Q(n).$implicit;return G(r.expanded=!1)}),A(1,ic,1,1,"lpx-icon",5),y(2,nc,1,0,"ng-container",6),C(),A(3,rc,2,0,"li",7)}if(i&2){let n=e.$implicit,t=e.$index,r=e.$count;h();let o=ie(6),s=ie(8);nt("expanded",n.expanded),f(),I(n.icon?1:-1),f(),g("ngTemplateOutlet",n.children!=null&&n.children.length?s:o)("ngTemplateOutletContext",B(6,At,n)),f(),I(t!==r-1?3:-1)}}function sc(i,e){if(i&1&&(b(0,"a",9),Y(1),D(2,"toObservable"),D(3,"async"),C()),i&2){let n=e.$implicit;g("routerLink",n.link),f(),me(" ",R(3,4,R(2,2,n.text))," ")}}function ac(i,e){if(i&1&&(b(0,"span",10),Y(1),D(2,"toObservable"),D(3,"async"),C()),i&2){let n=e.$implicit;f(),me(" ",R(3,3,R(2,1,n.text))," ")}}function lc(i,e){i&1&&P(0)}function cc(i,e){if(i&1&&y(0,lc,1,0,"ng-container",2),i&2){let n=h();g("ngComponentOutlet",n.item.component)("ngComponentOutletInjector",n.injector)}}function uc(i,e){i&1&&P(0)}function dc(i,e){if(i&1&&y(0,uc,1,0,"ng-container",3),i&2){h();let n=ie(3);g("ngTemplateOutlet",n)}}function pc(i,e){if(i&1&&M(0,"lpx-icon",5),i&2){let n=h(2);g("iconClass",n.item.icon)}}function mc(i,e){i&1&&P(0)}function hc(i,e){if(i&1&&(Y(0),D(1,"abpLocalization")),i&2){let n=h(4);me(" ",R(1,1,n.item.text)," ")}}function fc(i,e){if(i&1&&(Y(0),D(1,"lpxTranslate"),D(2,"async")),i&2){let n=h(4);me(" ",R(2,3,R(1,1,n.item.text))," ")}}function gc(i,e){if(i&1&&(b(0,"span",9),A(1,hc,2,3)(2,fc,3,5),C()),i&2){let n=h(3).item.text.split("::").length>1;f(),I(n?1:2)}}function _c(i,e){if(i&1&&A(0,gc,3,1,"span",9),i&2){let n=h(2);I(n.item.text?0:-1)}}function vc(i,e){if(i&1&&M(0,"lpx-icon",7),i&2){let n=h(2);g("iconClass",n.item.expanded?"chevronUp":"chevronDown")}}function yc(i,e){if(i&1){let n=pe();b(0,"li",11)(1,"lpx-sub-navbar",13),W("routeClick",function(r){Q(n);let o=h(4);return G(o.routeClick.emit(r))})("expand",function(r){Q(n);let o=h(4);return G(o.onChildExpand(r))}),C()()}if(i&2){let n=h().$implicit;f(),g("item",n)}}function bc(i,e){if(i&1&&y(0,yc,2,1,"li",12),i&2){let n=e.$implicit,t=h(3);g("lpxVisible",!n.visible||n.visible(n,t.injector))}}function Cc(i,e){if(i&1&&(b(0,"ul",10),ce(1,bc,1,1,"li",11,le),C()),i&2){let n=h(2);nt("collapsed",!n.item.expanded),f(),ue(n.item.children)}}function Tc(i,e){if(i&1){let n=pe();b(0,"a",4),W("click",function(){Q(n);let r=h();return G(r.onItemClick(r.item))}),A(1,pc,1,1,"lpx-icon",5),y(2,mc,1,0,"ng-container",6)(3,_c,1,1,"ng-template",null,1,Z),A(5,vc,1,1,"lpx-icon",7),C(),A(6,Cc,3,2,"ul",8)}if(i&2){let n=ie(4),t=h();nt("selected",t.item.selected)("expanded",(t.item.children==null?null:t.item.children.length)&&t.item.expanded),g("routerLink",t.item.link),f(),I(t.item.icon?1:-1),f(),g("ngTemplateOutlet",t.item.template||n)("ngTemplateOutletContext",B(10,At,t.item)),f(3),I(t.item.children!=null&&t.item.children.length?5:-1),f(),I(t.item.children!=null&&t.item.children.length?6:-1)}}function Sc(i,e){i&1&&P(0)}function wc(i,e){i&1&&P(0)}function xc(i,e){if(i&1&&y(0,wc,1,0,"ng-container",4),i&2){let n=e.$implicit;h(3);let t=ie(8);g("ngTemplateOutlet",t)("ngTemplateOutletContext",B(2,At,n))}}function Ec(i,e){if(i&1&&(y(0,Sc,1,0,"ng-container",4),ce(1,xc,1,4,"ng-container",null,le)),i&2){let n=e.$implicit;h(2);let t=ie(6);g("ngTemplateOutlet",t)("ngTemplateOutletContext",B(2,At,n)),f(),ue(n.items)}}function kc(i,e){if(i&1&&ce(0,Ec,3,4,null,null,le),i&2){let n=h();ue(n.groupedItems)}}function Ac(i,e){i&1&&P(0)}function Ic(i,e){if(i&1&&y(0,Ac,1,0,"ng-container",5),i&2){h();let n=ie(4);g("ngTemplateOutlet",n)}}function Mc(i,e){i&1&&P(0)}function Pc(i,e){if(i&1&&y(0,Mc,1,0,"ng-container",4),i&2){let n=e.$implicit;h(2);let t=ie(8);g("ngTemplateOutlet",t)("ngTemplateOutletContext",B(2,At,n))}}function Nc(i,e){if(i&1&&ce(0,Pc,1,4,"ng-container",null,le),i&2){let n=h();ue(n.navbarItems)}}function Lc(i,e){if(i&1&&(b(0,"li",6),Y(1),D(2,"lpxTranslate"),D(3,"async"),C()),i&2){let n=h().$implicit;f(),me(" ",R(3,3,R(2,1,n.group))," ")}}function Dc(i,e){if(i&1&&A(0,Lc,4,5,"li",6),i&2){let n=e.$implicit;I(n.items.length?0:-1)}}function Rc(i,e){if(i&1){let n=pe();b(0,"li",8)(1,"lpx-sub-navbar",9),W("expand",function(r){Q(n);let o=h(2);return G(o.onSubnavbarExpand(r,o.navbarItems))})("routeClick",function(r){Q(n);let o=h(2);return G(o.onRouteClick(r,o.navbarItems))}),C()()}if(i&2){let n=h().$implicit,t=h();f(),g("item",n)("routerItem",t.routerItem())}}function Fc(i,e){if(i&1&&y(0,Rc,2,2,"li",7),i&2){let n=e.$implicit,t=h();g("lpxVisible",!n.visible||n.visible(n,t.injector))}}var Oc=(i,e)=>({$implicit:i,groupItems:e});function jc(i,e){i&1&&P(0)}function Uc(i,e){i&1&&P(0)}function $c(i,e){if(i&1&&y(0,Uc,1,0,"ng-container",7),i&2){let n=h(),t=ie(13);g("ngTemplateOutlet",t)("ngTemplateOutletContext",B(2,At,n.contentBefore))}}function Vc(i,e){i&1&&P(0)}function Bc(i,e){i&1&&P(0)}function Hc(i,e){if(i&1&&M(0,"lpx-navbar-routes",8),i&2){let n=e.$implicit,t=e.groupItems;g("navbarItems",n)("groupedItems",t)("routerItem",!0)}}function zc(i,e){i&1&&P(0)}function Kc(i,e){if(i&1&&y(0,zc,1,0,"ng-container",9),i&2){let n=e.$implicit,t=h(2);g("ngComponentOutlet",n)("ngComponentOutletInjector",t.injector)}}function qc(i,e){if(i&1&&ce(0,Kc,1,2,"ng-container",null,le),i&2){let n=e.$implicit;ue(n)}}function Qc(i,e){i&1&&M(0,"lpx-brand-logo")}var As=i=>[i];function Gc(i,e){if(i&1&&(b(0,"a",2),Y(1),C()),i&2){let n=h();g("routerLink",B(2,As,n.descUrl)),f(),me(" ",n.desc)}}function Wc(i,e){if(i&1&&(b(0,"a"),Y(1),C()),i&2){let n=h();f(),me(" ",n.desc)}}function Yc(i,e){if(i&1&&(b(0,"a",2),Y(1),C()),i&2){let n=h().$implicit;g("routerLink",B(2,As,n.link)),f(),rt(n.text)}}function Xc(i,e){if(i&1&&A(0,Yc,2,4,"a",2),i&2){let n=e.$implicit;I(n?0:-1)}}function Jc(i,e){if(i&1&&(b(0,"div",0)(1,"div",1),A(2,Gc,2,4,"a",2)(3,Wc,2,1,"a"),C(),b(4,"div",3),ce(5,Xc,1,1,null,null,le),C()()),i&2){let n=e;f(2),I(n.descUrl?2:3),f(3),ue(n.footerLinks)}}var Zi=(()=>{let e=class e{set lpxVisible(t){this.condition$=Zc(t),this.subscribeToCondition()}constructor(t,r){this.viewContainerRef=t,this.templateRef=r,this.condition$=q(!1)}ngOnInit(){this.updateVisibility()}ngOnDestroy(){this.conditionSubscription?.unsubscribe()}subscribeToCondition(){this.conditionSubscription=this.condition$.subscribe(t=>{this.isVisible=t,this.updateVisibility()})}updateVisibility(){this.viewContainerRef.clear(),this.isVisible!==!1&&this.viewContainerRef.createEmbeddedView(this.templateRef)}};e.\u0275fac=function(r){return new(r||e)(H(ii),H(se))},e.\u0275dir=ae({type:e,selectors:[["","lpxVisible",""]],inputs:{lpxVisible:"lpxVisible"}});let i=e;return i})();function Zc(i){return i instanceof Promise?Oe(i):i instanceof ei?i:typeof i=="boolean"?q(i):i==null?q(!0):Si}var tr=(function(i){return i.SettingsTitle="language.settings.title",i})(tr||{}),eu={[tr.SettingsTitle]:"Language Options"};var at=class{get state(){return this.state$.value}constructor(e){this.initialState=e,this.state$=new Ti(this.initialState),this.update$=new ti,this.sliceState=(n,t=(r,o)=>r===o)=>this.state$.pipe(re(n),Ei(t)),this.sliceUpdate=(n,t=r=>r!==void 0)=>this.update$.pipe(re(n),j(t))}patch(e){let n=e;typeof e=="object"&&!Array.isArray(e)&&(n=V(V({},this.state),e)),this.state$.next(n),this.update$.next(n)}set(e){this.state$.next(e),this.update$.next(e)}reset(){this.set(this.initialState)}},Is=new oe("LPX_LANGUAGE"),lt=(()=>{let e=class e{get selectedLanguage(){return this.store.state.selectedLanguage}constructor(t){this.languages=t,this.store=new at({languages:[]}),this.id="languages",this.convertLanguageToNavbarItem=r=>r.map(o=>({icon:"",text:o.displayName,selected:o.selected,action:()=>(this.setSelectedLanguage(o),!0)})),this.selectedLanguage$=this.store.sliceState(({selectedLanguage:r})=>r),this.languageChange$=this.selectedLanguage$.pipe(j(r=>r!==void 0),Ei((r,o)=>r?.cultureName===o?.cultureName)),this.languages$=this.store.sliceState(r=>r.languages),this.languagesAsNavbarItems$=this.languages$.pipe(re(this.convertLanguageToNavbarItem)),this.languagesAsSettingsGroup$=this.languagesAsNavbarItems$.pipe(re(r=>({text:tr.SettingsTitle,icon:"bi bi-globe",id:this.id,children:r}))),this.init(this.languages)}setLanguages(t){this.init(t)}init(t){this.store.patch({languages:t,selectedLanguage:t.find(r=>r.selected)})}setSelectedLanguage(t){this.store.patch({selectedLanguage:t})}};e.\u0275fac=function(r){return new(r||e)(E(Is))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),ir=new oe("LPX_INITIAL_STYLES_TOKEN"),nr=new oe("LPX_STYLE_FINAL_TOKEN"),en=new oe("LPX_LAYOUT_STYLE_FINALIZE_TOKEN"),Ms=(()=>{let e=class e{constructor(t,r){this.initialStyles=t,this.document=r,this.lastInjectedStyle=null,this.initialized$=new Ti(!1)}initStyles(t){return fe(this,null,function*(){let r=t==="rtl"?".rtl":"";for(let o of this.initialStyles){let a=`
        link[rel="stylesheet"][href$="${`${o.bundleName}${r}.css`}"],
        link[rel="stylesheet"]#${o.bundleName}
      `;this.document.querySelector(a)||(yield this.loadStyle(o,t))}this.initialized$.next(!0)})}loadStyle(t,r){return fe(this,null,function*(){return new Promise(o=>{let s=this.createLinkElem(t,r,o),a=this.document.querySelector('link[rel="stylesheet"][href*="styles"]');a?a.insertAdjacentElement("beforebegin",s):this.document.head.appendChild(s),this.lastInjectedStyle=s,o(s)})})}replaceStyle(t,r){return fe(this,null,function*(){let o=this.document.querySelector(`link#${t.bundleName}`);return o&&o.remove(),this.loadStyle(t,r)})}reloadInitialStyles(t){return fe(this,null,function*(){for(let r of this.initialStyles)yield this.replaceStyle(r,t)})}createLinkElem(t,r,o){let s=document.createElement("link");return s.rel="stylesheet",s.id=t.bundleName,s.href=`${t.bundleName}${r==="rtl"?".rtl":""}.css`,s.onload=()=>{o(s)},s}};e.\u0275fac=function(r){return new(r||e)(E(nr),E(dt))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function tn(i){return i||(e=>e)}function tu(i){return z(()=>{i&&iu()})}function iu(){let i=v(lt),e=v(Ms);return new Promise(n=>{e.initialized$.pipe(j(Boolean),je(1),Me(()=>i.languageChange$),ro("isRTL")).subscribe(t=>fe(null,null,function*(){let r=t?.isRTL?"rtl":"ltr",o=document.documentElement;o.dir!==r&&(o.dir=r),yield e.reloadInitialStyles(r),n(null)}))})}var Ps=new oe("RESPONSIVE_BREAKPOINTS"),Ns=new oe("WINDOW"),nu=(()=>{let e=class e{constructor(t,r){this.providedBreakpoints=t,this.window=r,this.defaultBreakpoint={name:"all",width:0},this.breakpoints=this.buildBreakpoints(this.providedBreakpoints),this.getCurrentSize=()=>({height:this.window.innerHeight,width:this.window.innerWidth}),this.mapSizeToBreakpoint=({width:o}=this.getCurrentSize())=>this.breakpoints.find(s=>o>=s.width),this.currentSize$=new Ti(this.mapSizeToBreakpoint()),this.shouldRenderWithCurrentSize=o=>this.matchQuery(o),this.setupListener()}setupListener(){this.currentResolution$=eo(this.window,"resize").pipe(re(this.getCurrentSize)).pipe(so(this.getCurrentSize())),this.currentResolution$.pipe(re(this.mapSizeToBreakpoint),Ei()).subscribe(t=>{this.currentSize$.next(t)})}buildBreakpoints(t){return[...Object.keys(t).map(r=>({name:r,width:t[r]})).sort((r,o)=>o.width-r.width),this.defaultBreakpoint]}matchQuery(t){let{width:r}=this.getCurrentSize(),o=t.split(" "),s=l=>o.find(c=>c.split("-")[0]===l),a=this.breakpoints.find(l=>r>=l.width&&s(l.name));return a?!s(a.name)?.includes("none")===r>=a.width:!1}};e.\u0275fac=function(r){return new(r||e)(E(Ps),E(Ns))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Ls=(()=>{let e=class e{constructor(t,r,o,s){this.templateRef=t,this.viewContainer=r,this.service=o,this.parentCdr=s,this.hasRendered=!1,this.sub=new Wr,this.render=a=>{a&&!this.hasRendered?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasRendered=!0):!a&&this.hasRendered&&(this.viewContainer.clear(),this.hasRendered=!1),this.parentCdr.detectChanges()}}ngOnInit(){this.sub.add(this.service.currentSize$.pipe(re(t=>this.service.shouldRenderWithCurrentSize(this.query))).subscribe(this.render))}ngOnDestroy(){this.sub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(H(se),H(ii),H(nu),H(So,12))},e.\u0275dir=ae({type:e,selectors:[["","lpxResponsive",""]],inputs:{query:[0,"lpxResponsive","query"]}});let i=e;return i})();var ru={sm:480,md:768,lg:992,xl:1200};function ou(i){return{provide:Ps,useValue:i||ru}}var Qt=(()=>{let e=class e{constructor(){this.store=new at({}),this.user$=this.store.sliceState(t=>t)}setUser(t){this.store.set(t)}patchUser(t){this.store.patch(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var di=(()=>{let e=class e{constructor(){this.store=new at({containerClass:[""]}),this.containerClass$=this.store.sliceState(({containerClass:t})=>t||[])}setClass(t){let r=Array.isArray(t)?t:[t];this.patchStore(r)}addClass(t){let{containerClass:r}=this.store.state;this.patchStore([...r,t])}removeClass(t){let{containerClass:r}=this.store.state,o=r.findIndex(a=>a===t);if(o===-1)return;let s=[...r.slice(0,o),...r.slice(o+1)];this.patchStore(s)}removeClasses(t){let{containerClass:r}=this.store.state,o=r.filter(s=>!t.includes(s));this.patchStore(o)}toggleClass(t){let{containerClass:r}=this.store.state;r.findIndex(s=>s===t)===-1?this.addClass(t):this.removeClass(t)}patchStore(t){this.store.patch({containerClass:t})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),nn=new oe("LPX_TRANSLATE_SERVICE_TOKEN"),Ds=new oe("LPX_TRANSLATE_TOKEN");function su(i,e){return i.order?e.order?i.order-e.order:-1:1}function Rs(i){return i.reduce((e,n)=>V(V({},e),Array.isArray(n)?Rs(n):n),{})}function Fs(i){return i instanceof ei?i:i instanceof Promise?Oe(i):q(i)}function au(i){return Array.isArray(i)}var lu=(()=>{let e=class e{constructor(t,r){this.translateValues=t,this.translateService=r,this._content=Rs(this.translateValues)}translate$(t,...r){return this.translateService.get$(t,this._content[t])}};e.\u0275fac=function(r){return new(r||e)(E(Ds,8),E(nn))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),cu=(()=>{let e=class e{get$(t,r){return q(r||t||"")}get(t,r){return r||t||""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),uu={provide:nn,useClass:cu},du=[uu];var pu=(()=>{let e=class e{constructor(){this.router=v(Ve),this.location=v(wo),this.currentNavigation=Oo(this.router.events.pipe(j(t=>t instanceof Di),re(()=>this.location.path()||"/")),{initialValue:this.location.path()||"/"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),mu=[{provide:ir,useFactory:()=>[]},z(()=>hu())];function hu(){let i=v(Ms);return v(lt).languageChange$.pipe(je(1),Me(n=>Oe(i.initStyles(n.isRTL?"rtl":"ltr"))))}function fu(i){return{provide:Ns,useValue:i||window}}var Os=new oe("LOGO_URL_TOKEN"),js=new oe("LOGO_APP_NAME_TOKEN"),Us=(function(i){return i[i.Options=0]="Options",i})(Us||{});function gu(i,e){return{\u0275kind:i,\u0275providers:e}}function $s(i={}){let{name:e,logoUrl:n}=i.application||{};return gu(Us.Options,[{provide:Os,useValue:n||""},{provide:js,useValue:e||"ProjectName"}])}function Vs(...i){let e=[];return i.forEach(({\u0275providers:n})=>e.push(...n)),J(e)}var Bs={bagFill:"bi bi-bag-fill",bellFill:"bi bi-bell-fill",calendarWeek:"bi bi-calendar2-week",chatDots:"bi bi-chat-dots",chevronDown:"bi bi-chevron-down",chevronUp:"bi bi-chevron-up",gearConnected:"bi bi-gear-wide-connected",filter:"bi bi-filter",filterFill:"bi bi-filter-circle-fill",layoutThreeColumns:"bi bi-layout-three-columns",moon:"bi bi-moon",square:"bi bi-square",sunset:"bi bi-brightness-alt-high-fill",sunup:"bi bi-brightness-high-fill",star:"bi bi-star",x:"bi bi-x",xCircleFill:"bi bi-x-circle-fill"},Hs=new oe("LEPTON_X_ICON_SET"),et=(()=>{let e=class e{constructor(){this.iconSet=v(Hs)}get styleClass(){return this.iconSet[this.iconClass]||this.iconClass}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-icon"]],inputs:{iconClass:"iconClass"},decls:1,vars:1,consts:[["aria-hidden","true",1,"lpx-icon",3,"ngClass"]],template:function(r,o){r&1&&M(0,"i",0),r&2&&g("ngClass",o.styleClass)},dependencies:[pt],encapsulation:2});let i=e;return i})(),rn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-avatar"]],inputs:{avatar:"avatar"},decls:1,vars:1,consts:[[1,"lpx-avatar"],[1,"lpx-avatar-icon",3,"iconClass"],[1,"lpx-avatar-img",3,"src"]],template:function(r,o){r&1&&A(0,Xl,3,1,"div",0),r&2&&I(o.avatar&&o.avatar.source?0:-1)},dependencies:[et],encapsulation:2});let i=e;return i})();var er=(function(i){return i.sideMenu="side-menu",i.topMenu="top-menu",i})(er||{}),on=(()=>{let e=class e{constructor(){this.layout=Ni(er.sideMenu),this.layoutOptions=er,this.logoUrl=v(Os,{optional:!0}),this.appName=v(js,{optional:!0})??"ProjectName"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-brand-logo"]],inputs:{layout:[1,"layout"]},decls:2,vars:1,consts:[["routerLink","/"],["routerLink","/",1,"text-decoration-none"],["role","img","aria-label","App Logo",1,"lpx-brand-logo"],[1,"lpx-brand-name",2,"position","inherit"],[1,"lpx-brand-logo"],[1,"lpx-brand-name",2,"left","58px !important"]],template:function(r,o){r&1&&A(0,Jl,2,2,"a",0)(1,tc,3,1,"a",1),r&2&&I(o.logoUrl?0:1)},dependencies:[ot],encapsulation:2});let i=e;return i})();var _u=(()=>{let e=class e{constructor(){this.elementRef=v(ao),this.lpxClickOutside=new ni,this.exceptedRefs=[]}onDocumentClick(t){this.elementRef.nativeElement.contains(t.target)||this.exceptedRefs.some(r=>r.nativeElement.contains(t.target))||this.lpxClickOutside.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ae({type:e,selectors:[["","lpxClickOutside",""]],hostBindings:function(r,o){r&1&&W("click",function(a){return o.onDocumentClick(a)},po)},inputs:{exceptedRefs:"exceptedRefs"},outputs:{lpxClickOutside:"lpxClickOutside"}});let i=e;return i})(),vu=(()=>{let e=class e{transform(t){return t?Fs(t):q("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ii({name:"toObservable",type:e,pure:!0});let i=e;return i})(),zs=(()=>{let e=class e{constructor(){this.store=new at([]),this.items$=this.store.sliceState(t=>t)}add(t){let r=Array.isArray(t)?t:[t];this.store.set([...this.store.state,...r])}insert(t,r){let o=this.store.state,s=Array.isArray(t)?t:[t];this.store.set([...o.slice(0,r),...s,...o.slice(r)])}setItems(t){this.store.set(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Ks=(()=>{let e=class e{constructor(){this.service=v(zs),this.icon=Bs}onClick(t){t.children&&(t.expanded=!t.expanded)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-breadcrumb"]],decls:9,vars:2,consts:[["linkTemplate",""],["textTemplate",""],["aria-label","breadcrumb"],[1,"lpx-breadcrumb"],[1,"lpx-breadcrumb-item",3,"click","lpxClickOutside"],[1,"lpx-breadcrumb-item-icon",3,"iconClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"lpx-breadcrumb-separator"],["iconClass","bi bi-chevron-right"],[3,"routerLink"],[1,"lpx-breadcrumb-item-text"]],template:function(r,o){r&1&&(b(0,"nav",2)(1,"ol",3),ce(2,oc,4,8,null,null,le),D(4,"async"),C()(),y(5,sc,4,6,"ng-template",null,0,Z)(7,ac,4,5,"ng-template",null,1,Z)),r&2&&(f(2),ue(R(4,0,o.service.items$)))},dependencies:[_u,et,We,ot,he,vu],encapsulation:2});let i=e;return i})();var qs=new oe("CONTENT_BEFORE_ROUTES"),Qs=new oe("CONTENT_AFTER_ROUTES"),Gs=new oe("LPX_MENU_ITEMS");function yu(i,e,n=!1){if(!n&&(!au(i)||!i.some(r=>!!r.group)))return;let t=new Map;for(let r of i){let o=r?.group||e;if(typeof o!="string")throw new Error(`Invalid group: ${o}`);let s=t.get(o)||[];s.push(r),t.set(o,s)}return t}function bu(i,e){return i?.reduce((n,{items:t})=>[...n,...e?t.filter(e):t],[])}var Cu="AbpUi::OthersGroup",Gt=(()=>{let e=class e{constructor(){this.router=v(Ve),this.menuItems=v(Gs),this.store=new at(this.addContainerLinks(this.menuItems)),this.navbarItems$=this.store.sliceState(t=>t),this.groupedNavbarItems$=this.store.sliceState(t=>t).pipe(re(t=>{if(!t.some(o=>!!o.group))return;let r=yu(t,Cu)||[];return Array.from(r,([o,s])=>({group:o,items:s}))})),this.expandItemByLink$().pipe(je(1)).subscribe()}addNavbarItems(...t){this.store.set([...this.store.state,...this.addContainerLinks(t)])}setNavbarItems(...t){this.store.set([...this.addContainerLinks(t)])}addChildren(t,...r){let o=this.findById(t,this.store.state),s=(l,c,d="")=>{let m=c.shift();return l.reduce((u,_,p)=>[...u,...p===m?[$e(V({},_),{children:c.length?s(_.children||[],c,`${d}/${_.containerLink}`):[..._.children||[],...this.addContainerLinks(r,`${d}/${_.containerLink}`)]})]:[_]],[])},a=s(this.store.state,o.location);this.store.patch(a)}findByLink(t,r){return this.findByProp("link",t,r)}expandItemByLink$(){return this.router.events.pipe(j(t=>t instanceof Di),Pe(()=>this.expandItems()))}expandItems(){let t=this.getRouteItem();if(t?.item){let r=this.calculateExpandState(this.store.state,t.location);this.store.patch(r)}}getRouteItem(){return this.findByLink(this.router.url)}calculateExpandState(t,r){let o=r.shift();return t.reduce((s,a,l)=>{if(l===o)return[...s,$e(V({},a),{expanded:!0,selected:!0,children:this.calculateExpandState(a.children||[],r)})];let c=V(V({},a),a.children?{children:this.collapseChildren(a.children)}:{});return[...s,$e(V({},c),{expanded:!1,selected:!1})]},[])}collapseChildren(t){return[...t.map(r=>$e(V({},r),{expanded:!1,selected:!1,children:r.children?this.collapseChildren(r.children):[]}))]}findById(t,r){return this.findByProp("id",t,r)}findByProp(t,r,o,s=[]){let a=o||this.store.state,l=a.findIndex(d=>d[t]===r),c;return l===-1?a.forEach((d,m)=>{if(d.children){let u=this.findByProp(t,r,d.children,[...s,m]);u?.item&&(c=u.item,s=u.location)}}):(c=a[l],s.push(l)),{item:c,location:s}}addContainerLinks(t,r=""){return t.map(o=>$e(V(V({},o),o.link&&r?{link:`${r}/${o.link}`}:{}),{children:this.addContainerLinks(o.children||[],`${r?r+"/":""}${o.containerLink||""}`)}))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Tu=(()=>{let e=class e{constructor(){this.navbarService=v(Gt),this.router=v(Ve),this.routes=v(Ne),this.breadcrumbService=v(zs),this.localizationService=v(Ht)}subscribeRoute(){Ft([this.router.events.pipe(j(t=>t instanceof Di)),this.navbarService.navbarItems$.pipe(j(t=>!!t.length))]).subscribe(([t,r])=>{let o=this.router.url,s=this.navbarService.findByLink(o),a;if(!s.item){let l=this.findItemByTreeNode(o);if(l){a=this.createBreadcrumbTrail(l),this.breadcrumbService.setItems(a);return}s=this.navbarService.findByLink("/")}a=s.location.reduce((l,c)=>{let d=l[l.length-1]?.children||r,m=d[c];return[...l,$e(V({},m),{siblings:d})]},[]),this.breadcrumbService.setItems(this.mapNavbarItemToBreadcrumbItem(a))})}mapNavbarItemToBreadcrumbItem(t){return t.map(({breadcrumbText:r,text:o,link:s,icon:a,siblings:l})=>({text:r||o||"",link:s,icon:a,children:this.mapNavbarItemToBreadcrumbItem(l||[])}))}findItemByTreeNode(t){let{tree:r,search:o}={tree:this.routes.tree,search:this.routes.search.bind(this.routes)};return o({path:t},r)}createBreadcrumbTrail(t){let r=[],o=t;for(;o&&(o.breadcrumbText||o.name);)r.push({text:this.localizationService.instant(o.breadcrumbText||o.name),icon:o.iconClass}),o=o.parent;return r.reverse()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),It=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-logo-panel",""]]});let i=e;return i})(),sn=(()=>{let e=class e{constructor(){this.lpxThemeTranslateService=v(lu)}transform(t,...r){return this.lpxThemeTranslateService.translate$(t,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ii({name:"lpxTranslate",type:e,pure:!0});let i=e;return i})(),Su=wt([de({height:"*",overflow:"hidden","box-sizing":"border-box"}),Ct("{{ time }} {{ easing }}",de({height:"0",padding:"0px"}))],{params:{time:"350ms",easing:"ease"}}),Ws=wt([de({"margin-top":"0"}),Ct("{{ time }} {{ easing }}",de({"margin-left":"-100%"}))],{params:{time:"500ms",easing:"ease"}}),Qf=wt([de({width:"*",overflow:"hidden","box-sizing":"border-box"}),Ct("{{ time }} {{ easing }}",de({width:"0",padding:"0px"}))],{params:{time:"350ms",easing:"ease"}}),wu=wt([de({height:"0",overflow:"hidden","box-sizing":"border-box"}),Ct("{{ time }} {{ easing }}",de({height:"*",padding:"*"}))],{params:{time:"350ms",easing:"ease"}}),Ys=wt([de({"margin-top":"-100%"}),Ct("{{ time }} {{ easing }}",de({"margin-top":"0"}))],{params:{time:"500ms",easing:"ease"}}),Gf=wt([de({width:"0",overflow:"hidden","box-sizing":"border-box"}),Ct("{{ time }} {{ easing }}",de({width:"*",padding:"*"}))],{params:{time:"350ms",easing:"ease"}}),xu=Bi("collapse",[Tt("collapsed",de({height:"0",overflow:"hidden"})),Tt("expanded",de({height:"*",overflow:"hidden"})),St("expanded => collapsed",xt(Su)),St("collapsed => expanded",xt(wu))]),Wf=Bi("collapseWithMargin",[Tt("collapsed",de({"margin-top":"-100%"})),Tt("expanded",de({"margin-top":"0"})),St("expanded => collapsed",xt(Ws),{params:{time:"400ms",easing:"linear"}}),St("collapsed => expanded",xt(Ys))]),Yf=Bi("collapseLinearWithMargin",[Tt("collapsed",de({"margin-top":"-100vh"})),Tt("expanded",de({"margin-top":"0"})),St("expanded => collapsed",xt(Ws,{params:{time:"200ms",easing:"linear"}})),St("collapsed => expanded",xt(Ys,{params:{time:"250ms",easing:"linear"}}))]),Eu=(()=>{let e=class e{constructor(){this.injector=v(Qe),this.routerItem=Ni(),this.routeClick=new ni,this.expand=new ni}onItemClick(t){let r=q(!0);if(t.action){let o=t.action();r=Fs(o)}r.pipe(je(1)).subscribe(o=>{o&&this.processItemClick(t)})}onChildExpand(t){t.expanded&&this.item?.children?.filter(r=>r!==t).forEach(r=>{r.expanded=!1,r.selected=!1})}processItemClick(t){if(t.children?.length){t.expanded=!t.expanded,this.expand.emit(t);return}this.routeClick.emit(t),this.routerItem()||(t.selected=!0)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-sub-navbar"]],inputs:{item:"item",routerItem:[1,"routerItem"]},outputs:{routeClick:"routeClick",expand:"expand"},decls:4,vars:1,consts:[["defaultTemplate",""],["textTmpl",""],[4,"ngComponentOutlet","ngComponentOutletInjector"],[4,"ngTemplateOutlet"],[1,"lpx-menu-item-link",3,"click","routerLink"],[1,"lpx-menu-item-icon",3,"iconClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dd-icon","hidden-in-hover-trigger",3,"iconClass"],[1,"lpx-inner-menu","hidden-in-hover-trigger",3,"collapsed"],[1,"lpx-menu-item-text","hidden-in-hover-trigger"],[1,"lpx-inner-menu","hidden-in-hover-trigger"],[1,"lpx-inner-menu-item"],["class","lpx-inner-menu-item",4,"lpxVisible"],[3,"routeClick","expand","item"]],template:function(r,o){r&1&&(A(0,cc,1,2,"ng-container")(1,dc,1,1,"ng-container"),y(2,Tc,7,12,"ng-template",null,0,Z)),r&2&&I(o.item.component?0:1)},dependencies:[e,vt,We,ot,et,Zi,he,sn,Je],encapsulation:2,data:{animation:[xu]}});let i=e;return i})(),pi=(()=>{let e=class e{constructor(){this.injector=v(Qe),this.routesService=v(pu),this._sourceItems=Ai([]),this._processedItems=Co(()=>{let t=this.routesService.currentNavigation().split("?")[0],r=this._sourceItems();if(!r?.length||!t)return r;let o=[...r];return this.fixNavbarItems(t,r),o}),this.routerItem=Ni(),this.routeClick=new ni,this.isExpandedOrSelected=t=>!!(t.expanded||t.selected)}set navbarItems(t){this._sourceItems.set(t)}get navbarItems(){return this._processedItems()}get itemsFromGroup(){if(this.groupedItems)return bu(this.groupedItems)}onSubnavbarExpand(t,r){if(t.expanded){let o=this.itemsFromGroup||r;if(!o)return;o.filter(s=>s!==t).forEach(s=>s.expanded=!1)}}onRouteClick(t,r){let o=r?.filter(this.isExpandedOrSelected),a=this.itemsFromGroup?.filter(this.isExpandedOrSelected)||o;a&&a.filter(l=>l!==t).reduce((l,c)=>[...l,c,...this.flatChildren(c.children||[])],[])?.filter(l=>!this.checkChildrenIncludesItem(l,t)&&l!==t).forEach(l=>{l.selected=!1,l.expanded=!1}),this.routeClick.emit(t)}checkChildrenIncludesItem(t,r){return t.children?.reduce((o,s)=>o||s===r||this.checkChildrenIncludesItem(s,r),!1)||!1}flatChildren(t){return t?.reduce((r,o)=>[...r,o,...this.flatChildren(o.children||[])],[])||[]}fixNavbarItems(t,r){r.forEach(o=>{let{link:s,children:a}=o;if(a?.length){this.fixNavbarItems(t,a);let l=a.some(c=>c.selected||c.expanded||c.link===t);o.expanded||=l||s===t}else o.selected=s===t})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-navbar-routes"]],inputs:{navbarItems:"navbarItems",groupedItems:"groupedItems",routerItem:[1,"routerItem"]},outputs:{routeClick:"routeClick"},decls:9,vars:1,consts:[["defaultRoute",""],["groupText",""],["itemTemplate",""],[1,"lpx-nav-menu"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"group-menu-item","hidden-in-hover-trigger"],["class","outer-menu-item",4,"lpxVisible"],[1,"outer-menu-item"],[3,"expand","routeClick","item","routerItem"]],template:function(r,o){r&1&&(b(0,"ul",3),A(1,kc,2,0)(2,Ic,1,1,"ng-container"),C(),y(3,Nc,2,0,"ng-template",null,0,Z)(5,Dc,1,1,"ng-template",null,1,Z)(7,Fc,1,1,"ng-template",null,2,Z)),r&2&&(f(),I(o.groupedItems&&o.groupedItems.length?1:2))},dependencies:[We,Zi,Eu,he,sn],encapsulation:2});let i=e;return i})(),rr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ae({type:e,selectors:[["","lpx-navbar-routes",""],["","lpxNavbarRoutes",""]],exportAs:["lpxNavbarRoutes"]});let i=e;return i})(),an=(()=>{let e=class e{constructor(){this.layoutService=v(di),this.platformId=v(lo),this.service=v(Gt),this.injector=v(Qe),this.didResized=!1,this.initialHover=!1,this.showFilterMenu$=this.service.navbarItems$.pipe(re(t=>!!t.length)),this.contentBefore=this.flatContents(qs),this.contentAfter=this.flatContents(Qs)}toggleSidebarHover(){this.didResized=!0,this.layoutService.toggleClass("hover-trigger"),this.initialHover=!this.initialHover,this.initialHover?this.layoutService.addClass("initial-hover"):this.layoutService.removeClass("initial-hover")}handleInitialHover(){this.initialHover&&this.layoutService.removeClass("initial-hover")}ngAfterViewChecked(){xo(this.platformId)&&this.didResized&&(this.didResized=!1,window.dispatchEvent(new Event("resize")))}flatContents(t){return this.injector.get(t,[]).reduce((o,s)=>o.concat(s),[])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-navbar"]],contentQueries:function(r,o,s){if(r&1&&(ge(s,rr,5,se),ge(s,It,5)),r&2){let a;_e(a=ve())&&(o.routesTemplate=a.first),_e(a=ve())&&(o.logoPanel=a.first)}},decls:16,vars:17,consts:[["defaultRouteTemplate",""],["customContentTemplate",""],["defaultLogo",""],[1,"lpx-nav",3,"mouseenter"],[1,"lpx-logo-container"],[4,"ngTemplateOutlet"],["iconClass","bi bi-filter-left",1,"menu-collapse-icon","hidden-in-hover-trigger",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"navbarItems","groupedItems","routerItem"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(r,o){if(r&1){let s=pe();b(0,"nav",3),W("mouseenter",function(){return Q(s),G(o.handleInitialHover())}),b(1,"div",4),y(2,jc,1,0,"ng-container",5),b(3,"lpx-icon",6),W("click",function(){return Q(s),G(o.toggleSidebarHover())}),C()(),A(4,$c,1,4,"ng-container"),D(5,"async"),y(6,Vc,1,0,"ng-container",7),D(7,"async"),D(8,"async"),y(9,Bc,1,0,"ng-container",7),C(),y(10,Hc,1,3,"ng-template",null,0,Z)(12,qc,2,0,"ng-template",null,1,Z)(14,Qc,1,0,"ng-template",null,2,Z)}if(r&2){let s=ie(11),a=ie(13),l=ie(15);f(2),g("ngTemplateOutlet",(o.logoPanel==null?null:o.logoPanel.template)||l),f(2),I(R(5,6,o.showFilterMenu$)?4:-1),f(2),g("ngTemplateOutlet",o.routesTemplate||s)("ngTemplateOutletContext",Pi(12,Oc,R(7,8,o.service.navbarItems$),R(8,10,o.service.groupedNavbarItems$))),f(3),g("ngTemplateOutlet",a)("ngTemplateOutletContext",B(15,At,o.contentAfter))}},dependencies:[We,et,pi,vt,on,he],encapsulation:2});let i=e;return i})(),Xs=(()=>{let e=class e{constructor(){this.sanitizer=v(Io)}transform(t){return!t||typeof t!="string"?"":this.sanitizer.sanitize(co.HTML,t)||""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ii({name:"lpxSafeHtml",type:e,pure:!0});let i=e;return i})();var ku=(()=>{let e=class e{constructor(){this.store=new at({}),this.footerInfo$=this.store.sliceState(t=>t)}setFooterInfo(t){this.store.set(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Js=(()=>{let e=class e{constructor(){this.service=v(ku),this.footerValues$=this.service.footerInfo$}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-footer"]],decls:2,vars:3,consts:[[1,"lpx-footbar"],[1,"lpx-footbar-copyright"],[3,"routerLink"],[1,"lpx-footbar-solo-links"]],template:function(r,o){if(r&1&&(A(0,Jc,7,1,"div",0),D(1,"async")),r&2){let s;I((s=R(1,1,o.footerValues$))?0:-1,s)}},dependencies:[ot,he],encapsulation:2});let i=e;return i})();var Mt=(function(i){return i[i.Options=0]="Options",i[i.Icon=1]="Icon",i[i.Language=2]="Language",i[i.Navbar=3]="Navbar",i[i.NavbarChild=4]="NavbarChild",i[i.SkipDefaults=5]="SkipDefaults",i})(Mt||{});function mi(i,e){return{\u0275kind:i,\u0275providers:e}}var Xf=mi(Mt.SkipDefaults,[]);function Au(i={}){return mi(Mt.Icon,[{provide:Hs,useValue:i.iconSet||Bs}])}function Iu(i={}){return mi(Mt.Language,[{provide:Is,useValue:i.languages||[]},{provide:Ds,useValue:[eu],multi:!0},lt])}function Mu(i={}){let{menuItems:e,contentBeforeRoutes:n,contentAfterRoutes:t}=i;return mi(Mt.Navbar,[{provide:Gs,useValue:e||[]},{provide:Qs,useValue:t||[],multi:!0},{provide:qs,useValue:n||[],multi:!0}])}function Zs(i={}){let{responsiveSettings:e,window:n,iconSettings:t,languageSettings:r,navbarSettings:o,listenDirectionChanges:s}=i,a=Au(t),l=Iu(r),c=Mu(o);return[a,l,c,mi(Mt.Options,[tu(s||!0),ou(e),fu(n)])]}function Pu(){return z(()=>{v(Tu).subscribeRoute()})}function ea(...i){let e=[];return i.some(t=>t.\u0275kind===Mt.SkipDefaults)||e.push(Pu(),...mu,...du),i.forEach(({\u0275providers:t})=>e.push(...t)),J(e)}var ln=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-breadcrumb-panel",""]]});let i=e;return i})(),cn=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-content",""]]});let i=e;return i})(),ta=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-current-user-image-panel",""]]});let i=e;return i})();var un=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-footer-panel",""]]});let i=e;return i})();var dn=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-mobile-navbar-panel",""]]});let i=e;return i})();var pn=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-navbar-panel",""]]});let i=e;return i})(),ia=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-navitem-panel",""]]});let i=e;return i})();var mn=(()=>{let e=class e{constructor(){this.store=new at({items:[]}),this.items$=this.store.sliceState(({items:t})=>t)}setItems(t){this.store.patch({items:t.sort(su)})}addItem(t){this.setItems([...this.store.state.items,t])}patchItem(t,r){let{items:o}=this.store.state,s=o.findIndex(({id:l})=>l===t);if(s===-1)return;let a=[...o];a[s]=V({id:t},r),this.setItems(a)}removeItem(t){let{items:r}=this.store.state,o=r.findIndex(a=>a.id===t);if(o===-1)return;let s=[...r.slice(0,o),...r.slice(o+1)];this.store.patch({items:s})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Du(i,e){i&1&&P(0)}function Ru(i,e){if(i&1&&y(0,Du,1,0,"ng-container",7),i&2){let n=h().$implicit,t=h(5);g("ngComponentOutlet",n.component)("ngComponentOutletInjector",t.injector)}}function Fu(i,e){if(i&1){let n=pe();b(0,"a",8),W("click",function(){Q(n);let r=h().$implicit,o=h(5);return G(o.onActionClick(r))}),Y(1),D(2,"abpLocalization"),C()}if(i&2){let n=h().$implicit;g("routerLink",n.link),f(),me("",R(2,2,n.text||"")," ")}}function Ou(i,e){if(i&1&&(A(0,Ru,1,2,"ng-container"),A(1,Fu,3,4,"a",6)),i&2){let n=e.$implicit;I(n.component?0:-1),f(),I(n.component?-1:1)}}function ju(i,e){i&1&&M(0,"div",5)}function Uu(i,e){if(i&1&&(ce(0,Ou,2,2,null,null,le),A(2,ju,1,0,"div",5)),i&2){let n=e.$implicit,t=e.$index,r=e.$count;ue(n),f(2),I(t!==r-1?2:-1)}}function $u(i,e){if(i&1&&(b(0,"div",4),ce(1,Uu,3,1,null,null,le),C()),i&2){let n=h(2);f(),ue(n.userActionGroups)}}function Vu(i,e){if(i&1&&(b(0,"div",0)(1,"div",1),M(2,"lpx-avatar",2),b(3,"span",3),Y(4),C()(),A(5,$u,3,0,"div",4),C()),i&2){let n=h();f(2),g("avatar",n.avatar),f(2),rt(n.fullName),f(),I(n.userActionGroups?5:-1)}}function Bu(i,e){i&1&&A(0,Vu,6,3,"div",0),i&2&&I(e.userName?0:-1)}var Hu=i=>({"text-uppercase":i});function zu(i,e){if(i&1&&(b(0,"span",4),Y(1),C()),i&2){let n=e;g("ngClass",B(2,Hu,!!n.twoLetterISOLanguageName)),f(),me(" ",n.twoLetterISOLanguageName||n.displayName," ")}}function Ku(i,e){if(i&1&&(b(0,"div",1),M(1,"lpx-icon",3),A(2,zu,2,4,"span",4),C()),i&2){let n;f(2),I((n=e)?2:-1,n)}}function qu(i,e){if(i&1){let n=pe();b(0,"button",6),W("click",function(){let r=Q(n).$implicit,o=h(2);return G(o.onLanguageSelection(r))}),Y(1),C()}if(i&2){let n=e.$implicit;f(),me(" ",n.displayName," ")}}function Qu(i,e){i&1&&(b(0,"div",2),ce(1,qu,2,1,"button",5,le),C()),i&2&&(f(),ue(e))}var sr=new oe("LPX_LITE_STYLE_TOKEN"),Gu=i=>[z(()=>{v(sr)}),{provide:sr,deps:[ir,en],useFactory:Wu},{provide:nr,deps:[sr],useFactory:tn(i)}];function Wu(i,e){return i.push({bundleName:"bootstrap-dim"}),i.push({bundleName:"ng-bundle"}),i.push({bundleName:"font-bundle"}),[...i,...e]}function ra(...i){let e=[];if(!i.length){let n=t=>(t.push({bundleName:"abp-bundle"}),t);e.push(Gu(n),ea(...Zs()))}return i.forEach(({\u0275providers:n})=>e.push(...n)),J(e)}var hn=(()=>{let e=class e{constructor(){this.service=v(Qt),this.injector=v(Qe),this.user$=this.service.user$}onActionClick(t){t.action?.()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-user-profile"]],decls:2,vars:3,consts:[["ngbDropdown",""],["ngbDropdownToggle","","role","button",1,"lpx-user-profile"],[3,"avatar"],[1,"user-full-name"],["ngbDropdownMenu",""],[1,"dropdown-divider"],["ngbDropdownItem","",3,"routerLink"],[4,"ngComponentOutlet","ngComponentOutletInjector"],["ngbDropdownItem","",3,"click","routerLink"]],template:function(r,o){if(r&1&&(A(0,Bu,1,1),D(1,"async")),r&2){let s;I((s=R(1,1,o.user$))?0:-1,s)}},dependencies:[Vi,$i,rn,Ui,vt,ji,ot,he,Je],encapsulation:2});let i=e;return i})();var fn=(()=>{let e=class e{constructor(){this.service=v(lt),this.langs$=this.service.languages$,this.selectedLanguage$=this.service.selectedLanguage$}onLanguageSelection(t){this.service.setSelectedLanguage(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-language-selection"]],decls:5,vars:6,consts:[["ngbDropdown","",1,"lpx-language-selection"],["ngbDropdownToggle","","role","button"],["ngbDropdownMenu",""],["iconClass","bi bi-globe"],[3,"ngClass"],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"]],template:function(r,o){if(r&1&&(b(0,"div",0),A(1,Ku,3,1,"div",1),D(2,"async"),A(3,Qu,3,0,"div",2),D(4,"async"),C()),r&2){let s,a;f(),I((s=R(2,2,o.selectedLanguage$))?1:-1,s),f(2),I((a=R(4,4,o.langs$))?3:-1,a)}},dependencies:[mt,pt,he,is,Vi,$i,Ui,ji,ts,et],encapsulation:2});let i=e;return i})();var Yu=i=>({"alert-dismissible fade show":i});function Xu(i,e){if(i&1&&(M(0,"h4",3),D(1,"lpxSafeHtml"),D(2,"abpLocalization")),i&2){let n=h().$implicit;g("innerHTML",ri(2,3,R(1,1,n.title),n.titleLocalizationParams),Ut)}}function Ju(i,e){if(i&1){let n=pe();b(0,"button",6),W("click",function(){Q(n);let r=h().$index,o=h(2);return G(o.service.remove(r))}),C()}}function Zu(i,e){if(i&1&&(b(0,"div",2),A(1,Xu,3,6,"h4",3),M(2,"span",4),D(3,"lpxSafeHtml"),D(4,"abpLocalization"),A(5,Ju,1,0,"button",5),C()),i&2){let n=e.$implicit;_o(vo("alert alert-",n.type," fade show")),g("ngClass",B(12,Yu,n.dismissible)),f(),I(n.title?1:-1),f(),g("innerHTML",ri(4,9,R(3,7,n.message),n.messageLocalizationParams),Ut),f(3),I(n.dismissible?5:-1)}}function ed(i,e){if(i&1&&(Ce(0),ce(1,Zu,6,14,"div",1,le),D(3,"async"),Te()),i&2){let n=h();f(),ue(R(3,0,n.service.alerts$))}}var sa=(()=>{let e=class e{constructor(t,r,o){this.view=t,this.template=r,this.replaceableComponentsService=o}ngAfterViewInit(){this.replaceableComponentsService.get(this.abpIfReplaceableTemplateExists)&&this.view.createEmbeddedView(this.template)}};e.\u0275fac=function(r){return new(r||e)(H(ii),H(se),H(Oi))},e.\u0275dir=ae({type:e,selectors:[["","abpIfReplaceableTemplateExists",""]],inputs:{abpIfReplaceableTemplateExists:"abpIfReplaceableTemplateExists"}});let i=e;return i})(),aa=(()=>{let e=class e{constructor(){this.service=v(os),this.replaceableTemplateKey={componentKey:"Theme.PageAlertContainerComponent"}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["abp-page-alert-container"]],decls:1,vars:1,consts:[[4,"abpReplaceableTemplate"],["role","alert",3,"class","ngClass"],["role","alert",3,"ngClass"],[1,"alert-heading",3,"innerHTML"],[3,"innerHTML"],["type","button","data-dismiss","alert","aria-label","Close",1,"btn-close"],["type","button","data-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"]],template:function(r,o){r&1&&y(0,ed,4,2,"ng-container",0),r&2&&g("abpReplaceableTemplate",o.replaceableTemplateKey)},dependencies:[Je,zt,he,Xs,pt],encapsulation:2});let i=e;return i})();var td=(()=>{let e=class e{constructor(){this.documentDirHandler=v(ss),this.document=v(dt)}listenDir(){this.documentDirHandler.dir$.subscribe(t=>{this.document.documentElement.dir=t})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),id=z(()=>{nd()});function nd(){v(td).listenDir()}var la=new oe("MOBILE_NAVBAR_ITEMS_FILTER_TOKEN"),rd={provide:la,deps:[],useFactory:od};function od(){return(i,e)=>e===0||e===1}var sd=(()=>{let e=class e{shouldRender(t){return t!==ds.breadcrumb}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),ad={provide:us,useClass:sd};function ca(){return J([id,rd,ad])}var ua=(()=>{let e=class e{constructor(t,r,o,s){this.routes=t,this.navbarService=r,this.localizationService=o,this.mobileMenuItemFilterFn=s,this.mapRouteToNavItem=(a,l)=>{let c={text:this.localizationService.instant(a.name),link:a.children&&a.children.length?void 0:a.path,icon:a.iconClass,children:this.getRouteChildrenAsNavItems(a.children||[]),showOnMobileNavbar:this.mobileMenuItemFilterFn(a,l),group:a.group};return a.breadcrumbText&&(c.breadcrumbText=this.localizationService.instant(a.breadcrumbText)),c}}initRoutes(){this.routes.visible$.pipe(re(t=>t.filter(r=>r.path||r.children.length))).subscribe(t=>{this.navbarService.setNavbarItems(...t.map(this.mapRouteToNavItem))})}getRouteChildrenAsNavItems(t){return t.map(this.mapRouteToNavItem)}};e.\u0275fac=function(r){return new(r||e)(E(Ne),E(Gt),E(Ht),E(la))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),da=(()=>{let e=class e{constructor(){this.toolbar=v(mn),this.navItems=v(zi),this.permissionService=v(Go)}listenNavItems(){this.navItems.items$.pipe(Me(t=>this.permissionService.filterItemsByPolicy$(t))).subscribe(t=>this.toolbar.setItems(t))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function ld(i,e){if(i&1&&(b(0,"div",0),Y(1),D(2,"abpLocalization"),C()),i&2){let n=e.$implicit;f(),me(" ",ri(2,1,n.message,n.interpoliteParams)," ")}}var cd=(()=>{let e=class e extends Fo{get abpErrors(){return!this.errors||!this.errors.length?[]:this.errors.map(t=>{if(!t.message)return $e(V({},t),{interpoliteParams:[]});let r=t.message.indexOf("[");return r>-1?$e(V({},t),{message:t.message.slice(0,r),interpoliteParams:t.message.slice(r+1,t.message.length-1).split(",")}):$e(V({},t),{interpoliteParams:[]})})}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=jt(e)))(o||e)}})(),e.\u0275cmp=$({type:e,selectors:[["abp-validation-error"]],features:[fo],decls:2,vars:0,consts:[[1,"invalid-feedback"]],template:function(r,o){r&1&&ce(0,ld,3,4,"div",0,le),r&2&&ue(o.abpErrors)},dependencies:[Je],encapsulation:2,changeDetection:0});let i=e;return i})(),ud=(()=>{let e=class e{constructor(t,r,o){this.configState=t,this.languageService=r,this.sessionState=o,this.languages$=this.configState.getDeep$("localization.languages"),this.mapLang=s=>({cultureName:s.cultureName,displayName:s.displayName||"",selected:this.sessionState.getLanguage()===s.cultureName,twoLetterISOLanguageName:s.twoLetterISOLanguageName||"",isRTL:Bo(s.cultureName)==="rtl"})}subscribeLanguage(){this.languages$.pipe(j(Boolean)).subscribe(t=>{this.languageService.init(t.map(this.mapLang))}),this.languageService.selectedLanguage$.pipe(j(Boolean)).subscribe(t=>{this.sessionState.setLanguage(t?.cultureName||"")})}};e.\u0275fac=function(r){return new(r||e)(E(bt),E(lt),E(Bt))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),dd=z(()=>{v(ud).subscribeLanguage()}),pd=(()=>{let e=class e{constructor(t){this.localization=t}get(t,r){let o=this.getKey(t);return o?this.localization.instant({key:o,defaultValue:r}):r||t}get$(t,r){let o=this.getKey(t);return o?this.localization.get({key:o,defaultValue:r}):q(r||t)}getKey(t){return t.includes("::")?t:void 0}};e.\u0275fac=function(r){return new(r||e)(E(Ht))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),md={provide:nn,useClass:pd},hd=(()=>{let e=class e{constructor(t,r,o,s){this.configState=t,this.userProfileService=r,this.navigateToManageProfile=o,this.userMenuService=s,this.currentUser$=this.configState.getOne$("currentUser")}subscribeUser(){Ft([this.currentUser$.pipe(j(Boolean)),this.userMenuService.items$]).subscribe(([t,r])=>{let o=r.reduce((s,a)=>{let l={icon:a.textTemplate?.icon,text:a.textTemplate?.text,component:a?.component,action:()=>(a.action(),q(!0))};return s[0].push(l),s},[[]]);this.userProfileService.setUser({id:t.id,isAuthenticated:t.isAuthenticated,fullName:t.name||t.userName||"",email:t.email||"",userName:t.userName||"",avatar:{type:"icon",source:"bi bi-person-circle"},userActionGroups:o})})}};e.\u0275fac=function(r){return new(r||e)(E(bt),E(Qt),E(yt),E(Ki))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),fd=z(()=>{v(hd).subscribeUser()}),ar=(function(i){return i.MyAccount="MyAccount",i.Logout="Logout",i})(ar||{}),gd=[z(()=>{_d()})];function _d(){let i=v(Ki),e=v(st),n=v(yt);i.addItems([{id:ar.MyAccount,order:100,textTemplate:{text:"AbpAccount::MyAccount"},action:()=>n()},{id:ar.Logout,order:101,textTemplate:{text:"AbpUi::Logout"},action:()=>e.logout().subscribe()}])}var vd=z(()=>{let i=v(da),e=v(ua);i.listenNavItems(),e.initRoutes()});function yd(){return J([{provide:Lo,useValue:cd},{provide:Ro,useValue:".form-group"},{provide:Do,useValue:"is-invalid"}])}function pa(...i){let e=[fd,dd,md,gd,vd,ra(),yd(),ca()];return i.forEach(({\u0275providers:n})=>e.push(...n)),J(e)}var ma=["*"];function xd(i,e){i&1&&P(0)}function Ed(i,e){i&1&&M(0,"lpx-brand-logo")}function kd(i,e){if(i&1){let n=pe();b(0,"a",7),W("click",function(){let r=Q(n).$implicit,o=h(4);return G(o.onActionClick(r))}),Y(1),D(2,"lpxTranslate"),D(3,"async"),C()}if(i&2){let n=e.$implicit;g("routerLink",n.link),f(),me(" ",R(3,4,R(2,2,(n==null?null:n.text)||""))," ")}}function Ad(i,e){i&1&&M(0,"div",6)}function Id(i,e){if(i&1&&(ce(0,kd,4,6,"a",5,le),A(2,Ad,1,0,"div",6)),i&2){let n=e.$implicit,t=e.$index,r=e.$count;ue(n),f(2),I(t!==r-1?2:-1)}}function Md(i,e){if(i&1&&(b(0,"div",4),ce(1,Id,3,1,null,null,le),C()),i&2){let n=h(),t=h();nt("d-none",t.menuHidden),f(),ue(n.userActionGroups)}}function Pd(i,e){if(i&1){let n=pe();b(0,"ng-component")(1,"div",0),W("click",function(){Q(n);let r=h();return G(r.toggleMenu())}),M(2,"lpx-avatar",1),b(3,"span",2),Y(4),C()(),A(5,Md,3,2,"div",3),C()}if(i&2){let n=e;f(2),g("avatar",n.avatar),f(2),rt(n.fullName),f(),I(n.userActionGroups?5:-1)}}function Nd(i,e){if(i&1){let n=pe();b(0,"div",2),W("click",function(){Q(n);let r=h();return G(r.toggleMenu())}),M(1,"lpx-icon",3),Y(2),C()}if(i&2){let n=e;f(2),me(" ",n==null?null:n.displayName," ")}}function Ld(i,e){if(i&1){let n=pe();b(0,"a",6),W("click",function(){let r=Q(n).$implicit,o=h(2);return G(o.onLanguageSelection(r))}),Y(1),C()}if(i&2){let n=e.$implicit;f(),me(" ",n.displayName," ")}}function Dd(i,e){if(i&1&&(b(0,"div",4),ce(1,Ld,2,1,"a",5,le),C()),i&2){let n=h();nt("d-none",n.menuHidden),f(),ue(e)}}function Rd(i,e){i&1&&P(0)}function Fd(i,e){if(i&1){let n=pe();b(0,"div",1),W("click",function(){Q(n);let r=h();return G(r.actionClick())}),b(1,"div",2)(2,"div",3),y(3,Rd,1,0,"ng-container",4),C()()()}if(i&2){let n=h();f(3),g("ngComponentOutlet",n.component)}}function Od(i,e){if(i&1&&P(0,5),i&2){let n=h(2);g("ngTemplateOutlet",n.template)}}function jd(i,e){if(i&1){let n=pe();b(0,"div",8),W("click",function(){Q(n);let r=h(3);return G(r.actionClick())}),C()}if(i&2){let n=h(3);g("innerHtml",n.html,Ut)}}function Ud(i,e){i&1&&(b(0,"small",10),Y(1),C()),i&2&&(f(),rt(e))}function $d(i,e){if(i&1&&M(0,"lpx-icon",11),i&2){let n=h(4);g("iconClass",n.icon)}}function Vd(i,e){if(i&1){let n=pe();b(0,"a",9),W("click",function(){Q(n);let r=h(3);return G(r.actionClick())}),b(1,"span",2),A(2,Ud,2,1,"small",10),D(3,"async"),A(4,$d,1,1,"lpx-icon",11),C()()}if(i&2){let n,t=h(3);f(2),I((n=R(3,2,t.badge$))?2:-1,n),f(2),I(t.icon?4:-1)}}function Bd(i,e){if(i&1&&A(0,jd,1,1,"div",6)(1,Vd,5,4,"a",7),i&2){let n=h(2);I(n.html?0:1)}}function Hd(i,e){if(i&1&&A(0,Od,1,1,"ng-container",5)(1,Bd,2,1),i&2){let n=h();I(n.template?0:1)}}function zd(i,e){if(i&1&&M(0,"lpx-toolbar-item",0),i&2){let n=h().$implicit;g("icon",n==null?null:n.icon)("badge",n==null||n.badge==null?null:n.badge.count)("html",n==null?null:n.html)("component",n==null?null:n.component)("template",n==null?null:n.template)("action",n==null?null:n.action)}}function Kd(i,e){if(i&1&&y(0,zd,1,6,"lpx-toolbar-item",1),i&2){let n=e.$implicit;g("lpxVisible",!n.visible||n.visible(n))}}var qd=()=>[];function Qd(i,e){i&1&&P(0)}function Gd(i,e){i&1&&P(0)}function Wd(i,e){i&1&&M(0,"lpx-mn-user-profile",21)}function Yd(i,e){i&1&&P(0)}function Xd(i,e){i&1&&M(0,"lpx-mn-language-selection",21)}function Jd(i,e){i&1&&P(0)}function Zd(i,e){if(i&1&&y(0,Jd,1,0,"ng-container",12),i&2){let n=h(5);g("ngTemplateOutlet",n.logoPanel.template)}}function ep(i,e){i&1&&(Ce(0),y(1,Zd,1,1,"ng-template",22),Te())}function tp(i,e){if(i&1&&(b(0,"lpx-mobile-navbar"),y(1,Gd,1,0,"ng-container",12)(2,Wd,1,0,"ng-template",null,9,Z)(4,Yd,1,0,"ng-container",12)(5,Xd,1,0,"ng-template",null,10,Z),A(7,ep,2,0,"ng-container"),C()),i&2){let n=ie(3),t=ie(6),r=h(3);f(),g("ngTemplateOutlet",(r.mobileUserProfilePanelDirective==null?null:r.mobileUserProfilePanelDirective.template)||n),f(3),g("ngTemplateOutlet",(r.mobileLanguageSelectionDirective==null?null:r.mobileLanguageSelectionDirective.template)||t),f(3),I(r.logoPanel!=null&&r.logoPanel.template?7:-1)}}function ip(i,e){i&1&&y(0,tp,8,3,"lpx-mobile-navbar",18),i&2&&g("lpxResponsive","all md-none")}function np(i,e){i&1&&P(0)}function rp(i,e){if(i&1&&(b(0,"div",23)(1,"div",24),y(2,np,1,0,"ng-container",12),C()()),i&2){let n=h(2),t=ie(5);f(2),g("ngTemplateOutlet",(n.navbarPanel==null?null:n.navbarPanel.template)||t)}}function op(i,e){i&1&&P(0)}function sp(i,e){if(i&1&&(Ce(0),y(1,op,1,0,"ng-container",12),Te()),i&2){let n=h(2),t=ie(9);f(),g("ngTemplateOutlet",(n.breadcrumbPanel==null?null:n.breadcrumbPanel.template)||t)}}function ap(i,e){i&1&&P(0)}function lp(i,e){if(i&1&&(b(0,"div",25),y(1,ap,1,0,"ng-container",12),C()),i&2){let n=h(2),t=ie(3);f(),g("ngTemplateOutlet",(n.topbarContentPanelDirective==null?null:n.topbarContentPanelDirective.template)||t)}}function cp(i,e){i&1&&P(0)}function up(i,e){i&1&&Bn(0)}function dp(i,e){i&1&&P(0)}function pp(i,e){if(i&1&&(b(0,"div",11),y(1,Qd,1,0,"ng-container",12)(2,ip,1,1,"ng-template",null,7,Z)(4,rp,3,1,"div",13),b(5,"div",14)(6,"div",15)(7,"div",16)(8,"div",17),y(9,sp,2,1,"ng-container",18),C(),y(10,lp,2,1,"div",19),C()(),b(11,"div",20),y(12,cp,1,0,"ng-container",12)(13,up,1,0,"ng-template",null,8,Z)(15,dp,1,0,"ng-container",12),C()()()),i&2){let n=ie(3),t=ie(14),r=h(),o=ie(15);g("ngClass",e),f(),g("ngTemplateOutlet",(r.mobileNavbarPanel==null?null:r.mobileNavbarPanel.template)||n),f(3),g("lpxResponsive","md"),f(5),g("lpxResponsive","md"),f(),g("lpxResponsive","md"),f(2),g("ngTemplateOutlet",(r.contentPanel==null?null:r.contentPanel.template)||t),f(3),g("ngTemplateOutlet",(r.footerPanelDirective==null?null:r.footerPanelDirective.template)||o)}}function mp(i,e){i&1&&M(0,"lpx-toolbar-container")}function hp(i,e){i&1&&P(0)}function fp(i,e){if(i&1&&y(0,hp,1,0,"ng-container",12),i&2){let n=h(3);g("ngTemplateOutlet",n.logoPanel.template)}}function gp(i,e){i&1&&y(0,fp,1,1,"ng-template",22)}function _p(i,e){if(i&1&&(b(0,"lpx-navbar"),A(1,gp,1,0,null,22),C()),i&2){let n=h();f(),I(n.logoPanel!=null&&n.logoPanel.template?1:-1)}}function vp(i,e){i&1&&M(0,"lpx-brand-logo")}function yp(i,e){i&1&&M(0,"lpx-breadcrumb")}function bp(i,e){i&1&&M(0,"lpx-user-profile")}function Cp(i,e){i&1&&M(0,"lpx-language-selection")}function Tp(i,e){i&1&&M(0,"lpx-footer")}var Sp=(()=>{let e=class e{constructor(t,r){this.navService=t,this.layoutService=r,this.userMenuHidden=!0,this.navItemsHidden=!0,this.mobileMenuOpened="mobile-menu-opened"}ngOnDestroy(){this.layoutService.removeClass(this.mobileMenuOpened)}toggleUserMenu(){this.userMenuHidden=!this.userMenuHidden}toggleNavbar(){this.navItemsHidden=!this.navItemsHidden,this.setLayoutClass()}setLayoutClass(){this.navItemsHidden?this.layoutService.removeClass(this.mobileMenuOpened):this.layoutService.addClass(this.mobileMenuOpened)}};e.\u0275fac=function(r){return new(r||e)(H(Gt),H(di))},e.\u0275cmp=$({type:e,selectors:[["lpx-mobile-navbar"]],contentQueries:function(r,o,s){if(r&1&&ge(s,It,5),r&2){let a;_e(a=ve())&&(o.logoPanel=a.first)}},ngContentSelectors:ma,decls:14,vars:9,consts:[["defaultLogo",""],[1,"lpx-mobile-navbar-container"],[1,"lpx-mobile-navbar"],[1,"lpx-logo-container"],[4,"ngTemplateOutlet"],[1,"user-menu"],["iconClass","bi bi-person","role","button",3,"click"],["iconClass","bi bi-list","role","button",3,"click"],[1,"user-menu-groups"],[1,"lpx-mobile-nav-items"],[3,"routeClick","navbarItems","routerItem"]],template:function(r,o){if(r&1){let s=pe();Vn(),b(0,"div",1)(1,"header",2)(2,"div",3),y(3,xd,1,0,"ng-container",4),C(),b(4,"div",5)(5,"lpx-icon",6),W("click",function(){return Q(s),G(o.toggleUserMenu())}),C(),b(6,"lpx-icon",7),W("click",function(){return Q(s),G(o.toggleNavbar())}),C()()(),b(7,"div",8),Bn(8),C(),b(9,"nav",9)(10,"lpx-navbar-routes",10),D(11,"async"),W("routeClick",function(){return Q(s),G(o.toggleNavbar())}),C()()(),y(12,Ed,1,0,"ng-template",null,0,Z)}if(r&2){let s=ie(13);f(3),g("ngTemplateOutlet",(o.logoPanel==null?null:o.logoPanel.template)||s),f(4),nt("d-none",o.userMenuHidden),f(2),nt("d-none",o.navItemsHidden),f(),g("navbarItems",R(11,7,o.navService.navbarItems$))("routerItem",!0)}},dependencies:[We,et,pi,on,he],styles:[".mobile-menu-opened   [_nghost-%COMP%]{height:100vh;display:block}"]});let i=e;return i})();var wp=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-settings-panel",""]]});let i=e;return i})(),xp=(()=>{let e=class e{constructor(){this.service=v(Qt),this.user$=this.service.user$,this.menuHidden=!0}toggleMenu(){this.menuHidden=!this.menuHidden}onActionClick(t){t.action?.()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-mn-user-profile"]],decls:2,vars:3,consts:[["role","button",1,"lpx-user-profile","btn-","toggle",3,"click"],[3,"avatar"],[1,"user-full-name"],[1,"action-group-menu",3,"d-none"],[1,"action-group-menu"],["role","link",1,"action",3,"routerLink"],[1,"divider"],["role","link",1,"action",3,"click","routerLink"]],template:function(r,o){if(r&1&&(A(0,Pd,6,3,"ng-component"),D(1,"async")),r&2){let s;I((s=R(1,1,o.user$))?0:-1,s)}},dependencies:[Mo,rn,ot,he,sn],encapsulation:2});let i=e;return i})();var Ep=(()=>{let e=class e{constructor(){this.service=v(lt),this.langs$=this.service.languages$,this.selectedLanguage$=this.service.selectedLanguage$,this.menuHidden=!0}toggleMenu(){this.menuHidden=!this.menuHidden}onLanguageSelection(t){this.service.setSelectedLanguage(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-mn-language-selection"]],features:[yo([])],decls:4,vars:6,consts:[["role","button",1,"lpx-language-selection","btn-toggle"],[1,"action-group-menu",3,"d-none"],["role","button",1,"lpx-language-selection","btn-toggle",3,"click"],["iconClass","bi bi-globe"],[1,"action-group-menu"],["role","button",1,"action"],["role","button",1,"action",3,"click"]],template:function(r,o){if(r&1&&(A(0,Nd,3,1,"div",0),D(1,"async"),A(2,Dd,3,2,"div",1),D(3,"async")),r&2){let s,a;I((s=R(1,2,o.selectedLanguage$))?0:-1,s),f(2),I((a=R(3,4,o.langs$))?2:-1,a)}},dependencies:[et,he],encapsulation:2});let i=e;return i})();var kp=(()=>{let e=class e{get badge$(){return this.badge instanceof ei?this.badge:q(this.badge)}actionClick(){this.action&&this.action()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-toolbar-item"]],inputs:{component:"component",template:"template",icon:"icon",badge:"badge",html:"html",action:"action"},decls:2,vars:1,consts:[[1,"lpx-menu-item-link"],[1,"lpx-menu-item-link",3,"click"],[1,"lpx-menu-item-icon"],[1,"lpx-icon"],[4,"ngComponentOutlet"],[3,"ngTemplateOutlet"],[3,"innerHtml"],[1,"lpx-menu-item-link","active-menu-item"],[3,"click","innerHtml"],[1,"lpx-menu-item-link","active-menu-item",3,"click"],[1,"menu-item-badge"],[1,"action-icon",3,"iconClass"]],template:function(r,o){r&1&&A(0,Fd,4,1,"div",0)(1,Hd,2,1),r&2&&I(o.component?0:1)},dependencies:[mt,vt,We,he,et],encapsulation:2});let i=e;return i})(),Ap=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-toolbar-items"]],inputs:{items:"items"},decls:2,vars:0,consts:[[3,"icon","badge","html","component","template","action"],[3,"icon","badge","html","component","template","action",4,"lpxVisible"]],template:function(r,o){r&1&&ce(0,Kd,1,1,"lpx-toolbar-item",0,le),r&2&&ue(o.items)},dependencies:[kp,Zi],encapsulation:2,changeDetection:0});let i=e;return i})(),Ip=(()=>{let e=class e{constructor(){this.toolbarService=v(mn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-toolbar"]],decls:2,vars:4,consts:[[1,"lpx-topbar-content",3,"items"]],template:function(r,o){r&1&&(M(0,"lpx-toolbar-items",0),D(1,"async")),r&2&&g("items",R(1,1,o.toolbarService.items$)||bo(3,qd))},dependencies:[he,Ap],encapsulation:2,changeDetection:0});let i=e;return i})(),Mp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-toolbar-container"]],decls:1,vars:0,template:function(r,o){r&1&&M(0,"lpx-toolbar")},dependencies:[Ip],encapsulation:2});let i=e;return i})(),cr=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-language-selection",""]]});let i=e;return i})(),ur=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-mn-language-selection",""]]});let i=e;return i})(),dr=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-mn-user-profile-panel",""]]});let i=e;return i})(),gn=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-topbar-content",""]]});let i=e;return i})(),pr=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(H(se))},e.\u0275dir=ae({type:e,selectors:[["ng-template","lpx-user-profile",""]]});let i=e;return i})(),ha=(()=>{let e=class e{constructor(){this.layoutService=v(di)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["lpx-layout"]],contentQueries:function(r,o,s){if(r&1&&(ge(s,pn,5),ge(s,dn,5),ge(s,ln,5),ge(s,wp,5),ge(s,cr,5),ge(s,gn,5),ge(s,gn,5),ge(s,pr,5),ge(s,un,5),ge(s,ia,5),ge(s,dr,5),ge(s,ur,5),ge(s,It,5),ge(s,cn,5)),r&2){let a;_e(a=ve())&&(o.navbarPanel=a.first),_e(a=ve())&&(o.mobileNavbarPanel=a.first),_e(a=ve())&&(o.breadcrumbPanel=a.first),_e(a=ve())&&(o.settingsPanel=a.first),_e(a=ve())&&(o.languageSelectionPanelDirective=a.first),_e(a=ve())&&(o.topbarContentPanelDirective=a.first),_e(a=ve())&&(o.navItemsPanelDirective=a.first),_e(a=ve())&&(o.userProfilePanelDirective=a.first),_e(a=ve())&&(o.footerPanelDirective=a.first),_e(a=ve())&&(o.navitemPanelDirective=a.first),_e(a=ve())&&(o.mobileUserProfilePanelDirective=a.first),_e(a=ve())&&(o.mobileLanguageSelectionDirective=a.first),_e(a=ve())&&(o.logoPanel=a.first),_e(a=ve())&&(o.contentPanel=a.first)}},ngContentSelectors:ma,decls:16,vars:3,consts:[["defaultTopbarContent",""],["defaultNavbar",""],["defaultLogo",""],["defaultBreadcrumb",""],["defaultUserProfile",""],["defaultLanguageSelection",""],["defaultFooter",""],["defaultMobileNavbar",""],["defaultContent",""],["defaultMobileUserProfile",""],["defaultMobilLanguageSelection",""],["id","lpx-wrapper",3,"ngClass"],[4,"ngTemplateOutlet"],["class","lpx-sidebar-container",4,"lpxResponsive"],[1,"lpx-content-container"],[1,"lpx-topbar-container"],[1,"lpx-topbar"],[1,"lpx-breadcrumb-container"],[4,"lpxResponsive"],["class","lpx-topbar-content",4,"lpxResponsive"],[1,"lpx-content"],[1,"d-block"],["lpx-logo-panel",""],[1,"lpx-sidebar-container"],[1,"lpx-sidebar","lpx-scroll-container"],[1,"lpx-topbar-content"]],template:function(r,o){if(r&1&&(Vn(),A(0,pp,16,7,"div",11),D(1,"async"),y(2,mp,1,0,"ng-template",null,0,Z)(4,_p,2,1,"ng-template",null,1,Z)(6,vp,1,0,"ng-template",null,2,Z)(8,yp,1,0,"ng-template",null,3,Z)(10,bp,1,0,"ng-template",null,4,Z)(12,Cp,1,0,"ng-template",null,5,Z)(14,Tp,1,0,"ng-template",null,6,Z)),r&2){let s;I((s=R(1,1,o.layoutService.containerClass$))?0:-1,s)}},dependencies:[pt,We,Ls,Sp,xp,Ep,It,Mp,an,on,Ks,hn,fn,Js,he],encapsulation:2,changeDetection:0});let i=e;return i})(),lr=new oe("LPX_SIDE_MENU_LAYOUT_STYLE_TOKEN"),Pp="layout-bundle",Np=i=>[{provide:lr,useFactory:()=>[{bundleName:Pp}]},z(()=>{v(lr)}),{provide:en,deps:[lr],useFactory:tn(i)}],fa=(function(i){return i[i.Options=0]="Options",i[i.AppendDefaults=1]="AppendDefaults",i})(fa||{});function Lp(i,e){return{\u0275kind:i,\u0275providers:e}}var ga=Lp(fa.AppendDefaults,[Np()]);function _a(...i){let e=[];return i.forEach(({\u0275providers:n})=>e.push(...n)),J(e)}var xe=i=>({componentKey:i});function Dp(i,e){i&1&&M(0,"lpx-language-selection")}function Rp(i,e){i&1&&M(0,"lpx-user-profile")}var Fp=i=>({navbarItems:i}),Op=(i,e)=>({componentKey:i,inputs:e});function jp(i,e){i&1&&P(0)}function Up(i,e){if(i&1&&y(0,jp,1,0,"ng-container",4),i&2){let n=h(4);g("abpReplaceableTemplate",B(1,xe,n.logoKey))}}function $p(i,e){i&1&&(Ce(0),y(1,Up,1,3,"ng-template",6),Te())}function Vp(i,e){if(i&1&&M(0,"lpx-navbar-routes",8),i&2){let n=h().$implicit;g("navbarItems",n)}}function Bp(i,e){if(i&1&&y(0,Vp,1,1,"lpx-navbar-routes",7),i&2){let n=e.$implicit,t=h(3);g("abpReplaceableTemplate",Pi(3,Op,t.routesKey,B(1,Fp,n)))}}function Hp(i,e){if(i&1&&(b(0,"lpx-navbar"),y(1,$p,2,0,"ng-container",2)(2,Bp,1,6,"ng-template",5),C()),i&2){let n=h(2);f(),g("abpIfReplaceableTemplateExists",n.logoKey)}}function zp(i,e){if(i&1&&y(0,Hp,3,1,"lpx-navbar",4),i&2){let n=h();g("abpReplaceableTemplate",B(1,xe,n.navbarKey))}}function Kp(i,e){i&1&&P(0)}function qp(i,e){if(i&1&&y(0,Kp,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.navItemsKey))}}function Qp(i,e){i&1&&(Ce(0),y(1,qp,1,3,"ng-template",9),Te())}function Gp(i,e){i&1&&P(0)}function Wp(i,e){if(i&1&&y(0,Gp,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.logoKey))}}function Yp(i,e){i&1&&(Ce(0),y(1,Wp,1,3,"ng-template",6),Te())}function Xp(i,e){i&1&&P(0)}function Jp(i,e){if(i&1&&y(0,Xp,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.currentUserKey))}}function Zp(i,e){i&1&&(Ce(0),y(1,Jp,1,3,"ng-template",10),Te())}function em(i,e){i&1&&P(0)}function tm(i,e){if(i&1&&y(0,em,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.currentUserImageKey))}}function im(i,e){i&1&&(Ce(0),y(1,tm,1,3,"ng-template",11),Te())}function nm(i,e){i&1&&P(0)}function rm(i,e){if(i&1&&y(0,nm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.languageKey))}}function om(i,e){i&1&&(Ce(0),y(1,rm,1,3,"ng-template",12),Te())}function sm(i,e){i&1&&P(0)}function am(i,e){if(i&1&&y(0,sm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.breadcrumbKey))}}function lm(i,e){i&1&&(Ce(0),y(1,am,1,3,"ng-template",13),Te())}function cm(i,e){i&1&&P(0)}function um(i,e){if(i&1&&y(0,cm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.mobileNavbarKey))}}function dm(i,e){i&1&&(Ce(0),y(1,um,1,3,"ng-template",14),Te())}function pm(i,e){i&1&&P(0)}function mm(i,e){if(i&1&&y(0,pm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.mobileUserProfile))}}function hm(i,e){i&1&&(Ce(0),y(1,mm,1,3,"ng-template",15),Te())}function fm(i,e){i&1&&P(0)}function gm(i,e){if(i&1&&y(0,fm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.footerKey))}}function _m(i,e){i&1&&(Ce(0),y(1,gm,1,3,"ng-template",16),Te())}function vm(i,e){i&1&&P(0)}function ym(i,e){if(i&1&&y(0,vm,1,0,"ng-container",4),i&2){let n=h(2);g("abpReplaceableTemplate",B(1,xe,n.mobileLanguageSelection))}}function bm(i,e){i&1&&(Ce(0),y(1,ym,1,3,"ng-template",17),Te())}function Cm(i,e){i&1&&M(0,"abp-page-alert-container")}function Tm(i,e){if(i&1&&(y(0,Cm,1,0,"abp-page-alert-container",4),M(1,"router-outlet")),i&2){let n=h();g("abpReplaceableTemplate",B(1,xe,n.pageAlertContainerKey))}}var Sm=(()=>{let e=class e{};e.type="empty",e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["abp-layout-empty"]],decls:1,vars:0,template:function(r,o){r&1&&M(0,"router-outlet")},dependencies:[oi,Ri],encapsulation:2});let i=e;return i})(),wm=(()=>{let e=class e{constructor(){this.languageSelectionKey="Theme.LanguagesComponent"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["abp-language-selection"]],decls:1,vars:3,consts:[[4,"abpReplaceableTemplate"]],template:function(r,o){r&1&&y(0,Dp,1,0,"lpx-language-selection",0),r&2&&g("abpReplaceableTemplate",B(1,xe,o.languageSelectionKey))},dependencies:[zt,fn],encapsulation:2});let i=e;return i})();var xm=(()=>{let e=class e{constructor(){this.key="Theme.CurrentUserComponent"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["abp-user-profile"]],decls:1,vars:3,consts:[[4,"abpReplaceableTemplate"]],template:function(r,o){r&1&&y(0,Rp,1,0,"lpx-user-profile",0),r&2&&g("abpReplaceableTemplate",B(1,xe,o.key))},dependencies:[zt,hn],encapsulation:2});let i=e;return i})(),Em=(()=>{let e=class e{constructor(t){this.authService=t}navigateToLogin(t){t.preventDefault(),this.authService.navigateToLogin()}};e.\u0275fac=function(r){return new(r||e)(H(st))},e.\u0275cmp=$({type:e,selectors:[["abp-navigate-to-login"]],decls:4,vars:3,consts:[["href","#",1,"nav-link",3,"click"]],template:function(r,o){r&1&&(b(0,"a",0),W("click",function(a){return o.navigateToLogin(a)}),b(1,"span"),Y(2),D(3,"abpLocalization"),C()()),r&2&&(f(2),rt(R(3,1,"AbpUi::Login")))},dependencies:[Je],encapsulation:2});let i=e;return i})(),km=(()=>{let e=class e{constructor(){this.toolbarKey="Theme.ToolbarComponent",this.navbarKey="Theme.NavbarComponent",this.routesKey="Theme.RoutesComponent",this.navItemsKey="Theme.NavItemsComponent",this.breadcrumbKey="Theme.BreadcrumbComponent",this.footerKey="Theme.FooterComponent",this.mobileNavbarKey="Theme.MobileNavbarComponent",this.pageAlertContainerKey="Theme.PageAlertContainerComponent",this.logoKey="Theme.LogoComponent",this.currentUserKey="Theme.CurrentUserComponent",this.currentUserImageKey="Theme.CurrentUserImageComponent",this.languageKey="Theme.LanguagesComponent",this.mobileUserProfile="Theme.MobileUserProfileComponent",this.mobileLanguageSelection="Theme.MobileLanguageSelectionComponent"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=$({type:e,selectors:[["abp-application-layout"]],decls:14,vars:10,consts:[["layout",""],["lpx-navbar-panel",""],[4,"abpIfReplaceableTemplateExists"],["lpx-content",""],[4,"abpReplaceableTemplate"],["lpx-navbar-routes",""],["lpx-logo-panel",""],[3,"navbarItems",4,"abpReplaceableTemplate"],[3,"navbarItems"],["lpx-topbar-content",""],["lpx-user-profile",""],["lpx-current-user-image-panel",""],["lpx-language-selection",""],["lpx-breadcrumb-panel",""],["lpx-mobile-navbar-panel",""],["lpx-mn-user-profile-panel",""],["lpx-footer-panel",""],["lpx-mn-language-selection",""]],template:function(r,o){r&1&&(b(0,"lpx-layout",null,0),y(2,zp,1,3,"ng-template",1)(3,Qp,2,0,"ng-container",2)(4,Yp,2,0,"ng-container",2)(5,Zp,2,0,"ng-container",2)(6,im,2,0,"ng-container",2)(7,om,2,0,"ng-container",2)(8,lm,2,0,"ng-container",2)(9,dm,2,0,"ng-container",2)(10,hm,2,0,"ng-container",2)(11,_m,2,0,"ng-container",2)(12,bm,2,0,"ng-container",2)(13,Tm,2,3,"ng-template",3),C()),r&2&&(f(3),g("abpIfReplaceableTemplateExists",o.navItemsKey),f(),g("abpIfReplaceableTemplateExists",o.logoKey),f(),g("abpIfReplaceableTemplateExists",o.currentUserKey),f(),g("abpIfReplaceableTemplateExists",o.currentUserImageKey),f(),g("abpIfReplaceableTemplateExists",o.languageKey),f(),g("abpIfReplaceableTemplateExists",o.breadcrumbKey),f(),g("abpIfReplaceableTemplateExists",o.mobileNavbarKey),f(),g("abpIfReplaceableTemplateExists",o.mobileUserProfile),f(),g("abpIfReplaceableTemplateExists",o.footerKey),f(),g("abpIfReplaceableTemplateExists",o.mobileLanguageSelection))},dependencies:[sa,pn,It,zt,rr,gn,pr,ta,cr,ln,dn,dr,un,ur,cn,aa,ha,an,pi,Ri],encapsulation:2});let i=e;return i})(),Am=z(()=>{Im()});function Im(){let i=v(Oi);i.add({key:"Theme.ApplicationLayoutComponent",component:km}),i.add({key:"Theme.EmptyLayoutComponent",component:Sm})}var Mm=z(()=>{Pm()});function Pm(){let i=v(zi),e=v(De);i.addItems([{id:"Theme.LoginComponent",order:100,visible:()=>!e.hasValidAccessToken(),component:Em},{id:"Theme.LanguagesComponent",order:100,component:wm},{id:"Theme.CurrentUserComponent",order:100,component:xm}])}function va(){let i=[Am,Mm,_a(ga)];return J(i)}function ya(i){return new U(3e3,!1)}function Nm(){return new U(3100,!1)}function Lm(){return new U(3101,!1)}function Dm(i){return new U(3001,!1)}function Rm(i){return new U(3003,!1)}function Fm(i){return new U(3004,!1)}function Ca(i,e){return new U(3005,!1)}function Ta(){return new U(3006,!1)}function Sa(){return new U(3007,!1)}function wa(i,e){return new U(3008,!1)}function xa(i){return new U(3002,!1)}function Ea(i,e,n,t,r){return new U(3010,!1)}function ka(){return new U(3011,!1)}function Aa(){return new U(3012,!1)}function Ia(){return new U(3200,!1)}function Ma(){return new U(3202,!1)}function Pa(){return new U(3013,!1)}function Na(i){return new U(3014,!1)}function La(i){return new U(3015,!1)}function Da(i){return new U(3016,!1)}function Ra(i,e){return new U(3404,!1)}function Om(i){return new U(3502,!1)}function Fa(i){return new U(3503,!1)}function Oa(){return new U(3300,!1)}function ja(i){return new U(3504,!1)}function Ua(i){return new U(3301,!1)}function $a(i,e){return new U(3302,!1)}function Va(i){return new U(3303,!1)}function Ba(i,e){return new U(3400,!1)}function Ha(i){return new U(3401,!1)}function za(i){return new U(3402,!1)}function Ka(i,e){return new U(3505,!1)}function ct(i){switch(i.length){case 0:return new Et;case 1:return i[0];default:return new Hi(i)}}function gr(i,e,n=new Map,t=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,m=d&&a||new Map;l.forEach((u,_)=>{let p=_,T=u;if(_!=="offset")switch(p=i.normalizePropertyName(p,r),T){case si:T=n.get(_);break;case Be:T=t.get(_);break;default:T=i.normalizeStyleValue(_,p,T,r);break}m.set(p,T)}),d||o.push(m),a=m,s=c}),r.length)throw Om(r);return o}function _n(i,e,n,t){switch(e){case"start":i.onStart(()=>t(n&&mr(n,"start",i)));break;case"done":i.onDone(()=>t(n&&mr(n,"done",i)));break;case"destroy":i.onDestroy(()=>t(n&&mr(n,"destroy",i)));break}}function mr(i,e,n){let t=n.totalTime,r=!!n.disabled,o=vn(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t??i.totalTime,r),s=i._data;return s!=null&&(o._data=s),o}function vn(i,e,n,t,r="",o=0,s){return{element:i,triggerName:e,fromState:n,toState:t,phaseName:r,totalTime:o,disabled:!!s}}function ke(i,e,n){let t=i.get(e);return t||i.set(e,t=n),t}function _r(i){let e=i.indexOf(":"),n=i.substring(1,e),t=i.slice(e+1);return[n,t]}var jm=typeof document>"u"?null:document.documentElement;function yn(i){let e=i.parentNode||i.host||null;return e===jm?null:e}function Um(i){return i.substring(1,6)=="ebkit"}var Pt=null,ba=!1;function qa(i){Pt||(Pt=$m()||{},ba=Pt.style?"WebkitAppearance"in Pt.style:!1);let e=!0;return Pt.style&&!Um(i)&&(e=i in Pt.style,!e&&ba&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Pt.style)),e}function $m(){return typeof document<"u"?document.body:null}function vr(i,e){for(;e;){if(e===i)return!0;e=yn(e)}return!1}function yr(i,e,n){if(n)return Array.from(i.querySelectorAll(e));let t=i.querySelector(e);return t?[t]:[]}var Vm=1e3,br="{{",Bm="}}",Cr="ng-enter",bn="ng-leave",hi="ng-trigger",fi=".ng-trigger",Tr="ng-animating",Cn=".ng-animating";function tt(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hr(parseFloat(e[1]),e[2])}function hr(i,e){switch(e){case"s":return i*Vm;default:return i}}function gi(i,e,n){return i.hasOwnProperty("duration")?i:Hm(i,e,n)}function Hm(i,e,n){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof i=="string"){let a=i.match(t);if(a===null)return e.push(ya(i)),{duration:0,delay:0,easing:""};r=hr(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=hr(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=i;if(!n){let a=!1,l=e.length;r<0&&(e.push(Nm()),a=!0),o<0&&(e.push(Lm()),a=!0),a&&e.splice(l,0,ya(i))}return{duration:r,delay:o,easing:s}}function Qa(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function He(i,e,n){e.forEach((t,r)=>{let o=Tn(r);n&&!n.has(r)&&n.set(r,i.style[o]),i.style[o]=t})}function ht(i,e){e.forEach((n,t)=>{let r=Tn(t);i.style[r]=""})}function Wt(i){return Array.isArray(i)?i.length==1?i[0]:ns(i):i}function Ga(i,e,n){let t=e.params||{},r=Sr(i);r.length&&r.forEach(o=>{t.hasOwnProperty(o)||n.push(Dm(o))})}var fr=new RegExp(`${br}\\s*(.+?)\\s*${Bm}`,"g");function Sr(i){let e=[];if(typeof i=="string"){let n;for(;n=fr.exec(i);)e.push(n[1]);fr.lastIndex=0}return e}function Yt(i,e,n){let t=`${i}`,r=t.replace(fr,(o,s)=>{let a=e[s];return a==null&&(n.push(Rm(s)),a=""),a.toString()});return r==t?i:r}var zm=/-+([a-z0-9])/g;function Tn(i){return i.replace(zm,(...e)=>e[1].toUpperCase())}function Wa(i,e){return i===0||e===0}function Ya(i,e,n){if(n.size&&e.length){let t=e[0],r=[];if(n.forEach((o,s)=>{t.has(s)||r.push(s),t.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Sn(i,a)))}}return e}function Ae(i,e,n){switch(e.type){case F.Trigger:return i.visitTrigger(e,n);case F.State:return i.visitState(e,n);case F.Transition:return i.visitTransition(e,n);case F.Sequence:return i.visitSequence(e,n);case F.Group:return i.visitGroup(e,n);case F.Animate:return i.visitAnimate(e,n);case F.Keyframes:return i.visitKeyframes(e,n);case F.Style:return i.visitStyle(e,n);case F.Reference:return i.visitReference(e,n);case F.AnimateChild:return i.visitAnimateChild(e,n);case F.AnimateRef:return i.visitAnimateRef(e,n);case F.Query:return i.visitQuery(e,n);case F.Stagger:return i.visitStagger(e,n);default:throw Fm(e.type)}}function Sn(i,e){return window.getComputedStyle(i)[e]}var $r=(()=>{class i{validateStyleProperty(n){return qa(n)}containsElement(n,t){return vr(n,t)}getParentElement(n){return yn(n)}query(n,t,r){return yr(n,t,r)}computeStyle(n,t,r){return r||""}animate(n,t,r,o,s,a=[],l){return new Et(r,o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=L({token:i,factory:i.\u0275fac})}return i})(),Lt=class{static NOOP=new $r},Dt=class{};var Km=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),An=class extends Dt{normalizePropertyName(e,n){return Tn(e)}normalizeStyleValue(e,n,t,r){let o="",s=t.toString().trim();if(Km.has(n)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Ca(e,t))}return s+o}};var In="*";function qm(i,e){let n=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(t=>Qm(t,n,e)):n.push(i),n}function Qm(i,e,n){if(i[0]==":"){let l=Gm(i,n);if(typeof l=="function"){e.push(l);return}i=l}let t=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return n.push(La(i)),e;let r=t[1],o=t[2],s=t[3];e.push(Xa(r,s));let a=r==In&&s==In;o[0]=="<"&&!a&&e.push(Xa(s,r))}function Gm(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,t)=>parseFloat(t)>parseFloat(n);case":decrement":return(n,t)=>parseFloat(t)<parseFloat(n);default:return e.push(Da(i)),"* => *"}}var wn=new Set(["true","1"]),xn=new Set(["false","0"]);function Xa(i,e){let n=wn.has(i)||xn.has(i),t=wn.has(e)||xn.has(e);return(r,o)=>{let s=i==In||i==r,a=e==In||e==o;return!s&&n&&typeof r=="boolean"&&(s=r?wn.has(i):xn.has(i)),!a&&t&&typeof o=="boolean"&&(a=o?wn.has(e):xn.has(e)),s&&a}}var al=":self",Wm=new RegExp(`s*${al}s*,?`,"g");function ll(i,e,n,t){return new Ir(i).build(e,n,t)}var Ja="",Ir=class{_driver;constructor(e){this._driver=e}build(e,n,t){let r=new Mr(n);return this._resetContextStyleTimingState(r),Ae(this,Wt(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ja,e.collectedStyles=new Map,e.collectedStyles.set(Ja,new Map),e.currentTime=0}visitTrigger(e,n){let t=n.queryCount=0,r=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push(Ta()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==F.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,n))}),l.name=c}else if(a.type==F.Transition){let l=this.visitTransition(a,n);t+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(Sa())}),{type:F.Trigger,name:e.name,states:o,transitions:s,queryCount:t,depCount:r,options:null}}visitState(e,n){let t=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=r||{};t.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Sr(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&n.errors.push(wa(e.name,[...o.values()]))}return{type:F.State,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let t=Ae(this,Wt(e.animation),n),r=qm(e.expr,n.errors);return{type:F.Transition,matchers:r,animation:t,queryCount:n.queryCount,depCount:n.depCount,options:Nt(e.options)}}visitSequence(e,n){return{type:F.Sequence,steps:e.steps.map(t=>Ae(this,t,n)),options:Nt(e.options)}}visitGroup(e,n){let t=n.currentTime,r=0,o=e.steps.map(s=>{n.currentTime=t;let a=Ae(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:F.Group,steps:o,options:Nt(e.options)}}visitAnimate(e,n){let t=Zm(e.timings,n.errors);n.currentAnimateTimings=t;let r,o=e.styles?e.styles:de({});if(o.type==F.Keyframes)r=this.visitKeyframes(o,n);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};t.easing&&(c.easing=t.easing),s=de(c)}n.currentTime+=t.duration+t.delay;let l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:F.Animate,timings:t,style:r,options:null}}visitStyle(e,n){let t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t}_makeStyleAst(e,n){let t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Be?t.push(a):n.errors.push(xa(a)):t.push(new Map(Object.entries(a)));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(br)>=0){o=!0;break}}}),{type:F.Style,styles:t,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let t=n.currentAnimateTimings,r=n.currentTime,o=n.currentTime;t&&o>0&&(o-=t.duration+t.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=n.collectedStyles.get(n.currentQuerySelector),d=c.get(l),m=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(n.errors.push(Ea(l,d.startTime,d.endTime,o,r)),m=!1),o=d.startTime),m&&c.set(l,{startTime:o,endTime:r}),n.options&&Ga(a,n.options,n.errors)})})}visitKeyframes(e,n){let t={type:F.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(ka()),t;let r=1,o=0,s=[],a=!1,l=!1,c=0,d=e.steps.map(K=>{let ee=this._makeStyleAst(K,n),k=ee.offset!=null?ee.offset:Jm(ee.styles),ne=0;return k!=null&&(o++,ne=ee.offset=k),l=l||ne<0||ne>1,a=a||ne<c,c=ne,s.push(ne),ee});l&&n.errors.push(Aa()),a&&n.errors.push(Ia());let m=e.steps.length,u=0;o>0&&o<m?n.errors.push(Ma()):o==0&&(u=r/(m-1));let _=m-1,p=n.currentTime,T=n.currentAnimateTimings,N=T.duration;return d.forEach((K,ee)=>{let k=u>0?ee==_?1:u*ee:s[ee],ne=k*N;n.currentTime=p+T.delay+ne,T.duration=ne,this._validateStyleAst(K,n),K.offset=k,t.styles.push(K)}),t}visitReference(e,n){return{type:F.Reference,animation:Ae(this,Wt(e.animation),n),options:Nt(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:F.AnimateChild,options:Nt(e.options)}}visitAnimateRef(e,n){return{type:F.AnimateRef,animation:this.visitReference(e.animation,n),options:Nt(e.options)}}visitQuery(e,n){let t=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=Ym(e.selector);n.currentQuerySelector=t.length?t+" "+o:o,ke(n.collectedStyles,n.currentQuerySelector,new Map);let a=Ae(this,Wt(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:F.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Nt(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(Pa());let t=e.timings==="full"?{duration:0,delay:0,easing:"full"}:gi(e.timings,n.errors,!0);return{type:F.Stagger,animation:Ae(this,Wt(e.animation),n),timings:t,options:null}}};function Ym(i){let e=!!i.split(/\s*,\s*/).find(n=>n==al);return e&&(i=i.replace(Wm,"")),i=i.replace(/@\*/g,fi).replace(/@\w+/g,n=>fi+"-"+n.slice(1)).replace(/:animating/g,Cn),[i,e]}function Xm(i){return i?V({},i):null}var Mr=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Jm(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(n=>{if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let n=i;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function Zm(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=gi(i,e).duration;return wr(o,0,"")}let n=i;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=wr(0,0,"");return o.dynamic=!0,o.strValue=n,o}let r=gi(n,e);return wr(r.duration,r.delay,r.easing)}function Nt(i){return i?(i=V({},i),i.params&&(i.params=Xm(i.params))):i={},i}function wr(i,e,n){return{duration:i,delay:e,easing:n}}function Vr(i,e,n,t,r,o,s=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:n,postStyleProps:t,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var vi=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,n){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},eh=1,th=":enter",ih=new RegExp(th,"g"),nh=":leave",rh=new RegExp(nh,"g");function cl(i,e,n,t,r,o=new Map,s=new Map,a,l,c=[]){return new Pr().buildKeyframes(i,e,n,t,r,o,s,a,l,c)}var Pr=class{buildKeyframes(e,n,t,r,o,s,a,l,c,d=[]){c=c||new vi;let m=new Nr(e,n,c,r,o,d,[]);m.options=l;let u=l.delay?tt(l.delay):0;m.currentTimeline.delayNextStep(u),m.currentTimeline.setStyles([s],null,m.errors,l),Ae(this,t,m);let _=m.timelines.filter(p=>p.containsAnimation());if(_.length&&a.size){let p;for(let T=_.length-1;T>=0;T--){let N=_[T];if(N.element===n){p=N;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,m.errors,l)}return _.length?_.map(p=>p.buildKeyframes()):[Vr(n,[],[],[],0,u,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let t=n.subInstructions.get(n.element);if(t){let r=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(t,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,t),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,t){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:tt(Yt(o,r?.params??{},n.errors));t.delayNextStep(s)}}}_visitSubInstructions(e,n,t){let o=n.currentTimeline.currentTime,s=t.duration!=null?tt(t.duration):null,a=t.delay!=null?tt(t.delay):null;return s!==0&&e.forEach(l=>{let c=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),Ae(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let t=n.subContextCount,r=n,o=e.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==F.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Mn);let s=tt(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Ae(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let t=[],r=n.currentTimeline.currentTime,o=e.options&&e.options.delay?tt(e.options.delay):0;e.steps.forEach(s=>{let a=n.createSubContext(e.options);o&&a.delayNextStep(o),Ae(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let t=e.strValue,r=n.params?Yt(t,n.params,n.errors):t;return gi(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let t=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),r.snapshotCurrentStyles());let o=e.style;o.type==F.Keyframes?this.visitKeyframes(o,n):(n.incrementTime(t.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let t=n.currentTimeline,r=n.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(o):t.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let t=n.currentAnimateTimings,r=n.currentTimeline.duration,o=t.duration,a=n.createSubContext().currentTimeline;a.easing=t.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=e}visitQuery(e,n){let t=n.currentTimeline.currentTime,r=e.options||{},o=r.delay?tt(r.delay):0;o&&(n.previousNode.type===F.Style||t==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Mn);let s=t,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{n.currentQueryIndex=d;let m=n.createSubContext(e.options,c);o&&m.delayNextStep(o),c===n.element&&(l=m.currentTimeline),Ae(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let u=m.currentTimeline.currentTime;s=Math.max(s,u)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let t=n.parentContext,r=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1),l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=t.currentStaggerTime;break}let d=n.currentTimeline;l&&d.delayNextStep(l);let m=d.currentTime;Ae(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=r.currentTime-m+(r.startTime-t.currentTimeline.startTime)}},Mn={},Nr=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Mn;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,n,t,r,o,s,a,l){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new Pn(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let t=e,r=this.options;t.duration!=null&&(r.duration=tt(t.duration)),t.delay!=null&&(r.delay=tt(t.delay));let o=t.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=Yt(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let t=e.params={};Object.keys(n).forEach(r=>{t[r]=n[r]})}}return e}createSubContext(e=null,n,t){let r=n||this.element,o=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Mn,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,t){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},o=new Lr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,t,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(ih,"."+this._enterClassName),e=e.replace(rh,"."+this._leaveClassName);let l=t!=1,c=this._driver.query(this.element,e,l);t!==0&&(c=t<0?c.slice(c.length+t,c.length):c.slice(0,t)),a.push(...c)}return!o&&a.length==0&&s.push(Na(n)),a}},Pn=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,n,t,r){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new i(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=eh,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,t]of this._globalTimelineStyles)this._backFill.set(n,t||Be),this._currentKeyframe.set(n,Be);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,t,r){n&&this._previousKeyframe.set("easing",n);let o=r&&r.params||{},s=oh(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Yt(l,o,t);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Be),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,t)=>{let r=this._styleSummary.get(t);(!r||n.time>r.time)&&this._updateStyle(t,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,t=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,m)=>{d===si?e.add(m):d===Be&&n.add(m)}),t||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],s=[...n.values()];if(t){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Vr(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},Lr=class extends Pn{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,n,t,r,o,s,a=!1){super(e,n,s.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=t+n,a=n/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",Za(a)),o.push(c);let d=e.length-1;for(let m=1;m<=d;m++){let u=new Map(e[m]),_=u.get("offset"),p=n+_*t;u.set("offset",Za(p/s)),o.push(u)}t=s,n=0,r="",e=o}return Vr(this.element,e,this.preStyleProps,this.postStyleProps,t,n,r,!0)}};function Za(i,e=3){let n=Math.pow(10,e-1);return Math.round(i*n)/n}function oh(i,e){let n=new Map,t;return i.forEach(r=>{if(r==="*"){t??=e.keys();for(let o of t)n.set(o,Be)}else for(let[o,s]of r)n.set(o,s)}),n}function el(i,e,n,t,r,o,s,a,l,c,d,m,u){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:m,errors:u}}var xr={},Nn=class{_triggerName;ast;_stateStyles;constructor(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}match(e,n,t,r){return sh(this.ast.matchers,e,n,t,r)}buildStyles(e,n,t){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,t):new Map}build(e,n,t,r,o,s,a,l,c,d){let m=[],u=this.ast.options&&this.ast.options.params||xr,_=a&&a.params||xr,p=this.buildStyles(t,_,m),T=l&&l.params||xr,N=this.buildStyles(r,T,m),K=new Set,ee=new Map,k=new Map,ne=r==="void",it={params:ul(T,u),delay:this.ast.options?.delay},Re=d?[]:cl(e,n,this.ast.animation,o,s,p,N,it,c,m),ye=0;return Re.forEach(Ee=>{ye=Math.max(Ee.duration+Ee.delay,ye)}),m.length?el(n,this._triggerName,t,r,ne,p,N,[],[],ee,k,ye,m):(Re.forEach(Ee=>{let ft=Ee.element,Rt=ke(ee,ft,new Set);Ee.preStyleProps.forEach(gt=>Rt.add(gt));let Br=ke(k,ft,new Set);Ee.postStyleProps.forEach(gt=>Br.add(gt)),ft!==n&&K.add(ft)}),el(n,this._triggerName,t,r,ne,p,N,Re,[...K.values()],ee,k,ye))}};function sh(i,e,n,t,r){return i.some(o=>o(e,n,t,r))}function ul(i,e){let n=V({},e);return Object.entries(i).forEach(([t,r])=>{r!=null&&(n[t]=r)}),n}var Dr=class{styles;defaultParams;normalizer;constructor(e,n,t){this.styles=e,this.defaultParams=n,this.normalizer=t}buildStyles(e,n){let t=new Map,r=ul(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Yt(s,r,n));let l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),t.set(a,s)})}),t}};function ah(i,e,n){return new Rr(i,e,n)}var Rr=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,n,t){this.name=e,this.ast=n,this._normalizer=t,n.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Dr(r.style,o,t))}),tl(this.states,"true","1"),tl(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Nn(e,r,this.states))}),this.fallbackTransition=lh(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,t,r){return this.transitionFactories.find(s=>s.match(e,n,t,r))||null}matchStyles(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)}};function lh(i,e,n){let t=[(s,a)=>!0],r={type:F.Sequence,steps:[],options:null},o={type:F.Transition,animation:r,matchers:t,options:null,queryCount:0,depCount:0};return new Nn(i,o,e)}function tl(i,e,n){i.has(e)?i.has(n)||i.set(n,i.get(e)):i.has(n)&&i.set(e,i.get(n))}var ch=new vi,Fr=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t}register(e,n){let t=[],r=[],o=ll(this._driver,n,t,r);if(t.length)throw Fa(t);this._animations.set(e,o)}_buildPlayer(e,n,t){let r=e.element,o=gr(this._normalizer,e.keyframes,n,t);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,t={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=cl(this._driver,n,o,Cr,bn,new Map,new Map,t,ch,r),s.forEach(d=>{let m=ke(a,d.element,new Map);d.postStyleProps.forEach(u=>m.set(u,null))})):(r.push(Oa()),s=[]),r.length)throw ja(r);a.forEach((d,m)=>{d.forEach((u,_)=>{d.set(_,this._driver.computeStyle(m,_,Be))})});let l=s.map(d=>{let m=a.get(d.element);return this._buildPlayer(d,new Map,m)}),c=ct(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw Ua(e);return n}listen(e,n,t,r){let o=vn(n,"","","");return _n(this._getPlayer(e),t,o,r),()=>{}}command(e,n,t,r){if(t=="register"){this.register(e,r[0]);return}if(t=="create"){let s=r[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},il="ng-animate-queued",uh=".ng-animate-queued",Er="ng-animate-disabled",dh=".ng-animate-disabled",ph="ng-star-inserted",mh=".ng-star-inserted",hh=[],dl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ze="__ng_removed",yi=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let t=e&&e.hasOwnProperty("value"),r=t?e.value:e;if(this.value=_h(r),t){let o=e,{value:s}=o,a=qr(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let t=this.options.params;Object.keys(n).forEach(r=>{t[r]==null&&(t[r]=n[r])})}}},_i="void",kr=new yi(_i),Or=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this._hostClassName="ng-tns-"+e,Ue(n,this._hostClassName)}listen(e,n,t,r){if(!this._triggers.has(n))throw $a(t,n);if(t==null||t.length==0)throw Va(n);if(!vh(t))throw Ba(t,n);let o=ke(this._elementListeners,e,[]),s={name:n,phase:t,callback:r};o.push(s);let a=ke(this._engine.statesByElement,e,new Map);return a.has(n)||(Ue(e,hi),Ue(e,hi+"-"+n),a.set(n,kr)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw Ha(e);return n}trigger(e,n,t,r=!0){let o=this._getTrigger(n),s=new bi(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Ue(e,hi),Ue(e,hi+"-"+n),this._engine.statesByElement.set(e,a=new Map));let l=a.get(n),c=new yi(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=kr),!(c.value===_i)&&l.value===c.value){if(!Ch(l.params,c.params)){let T=[],N=o.matchStyles(l.value,l.params,T),K=o.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{ht(e,N),He(e,K)})}return}let u=ke(this._engine.playersByElement,e,[]);u.forEach(T=>{T.namespaceId==this.id&&T.triggerName==n&&T.queued&&T.destroy()});let _=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!_){if(!r)return;_=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:_,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(Ue(e,il),s.onStart(()=>{Xt(e,il)})),s.onDone(()=>{let T=this.players.indexOf(s);T>=0&&this.players.splice(T,1);let N=this._engine.playersByElement.get(e);if(N){let K=N.indexOf(s);K>=0&&N.splice(K,1)}}),this.players.push(s),u.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,t)=>{this._elementListeners.set(t,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let t=this._engine.driver.query(e,fi,!0);t.forEach(r=>{if(r[ze])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,t,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,_i,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),t&&ct(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(n&&t){let r=new Set;n.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=t.get(s)||kr,d=new yi(_i),m=new bi(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:m,isFallbackTransition:!0})})}}removeNode(e,n){let t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(t.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,n);else{let o=e[ze];(!o||o===dl)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,n))}}insertNode(e,n){Ue(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(t=>{let r=t.player;if(r.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let l=vn(o,t.triggerName,t.fromState.value,t.toState.value);l._data=e,_n(t.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(t)}),this._queue=[],n.sort((t,r)=>{let o=t.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},jr=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,n)=>{};_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,n){let t=new Or(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,n){let t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){let l=r.get(a);if(l){let c=t.indexOf(l);t.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(e)}else t.push(e);return r.set(n,e),e}register(e,n){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t}registerTrigger(e,n,t){let r=this._namespaceLookup[e];r&&r.register(n,t)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);let r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,t=this.statesByElement.get(e);if(t){for(let r of t.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}}return n}trigger(e,n,t,r){if(En(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,t,r),!0}return!1}insertNode(e,n,t,r){if(!En(n))return;let o=n[ze];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,t)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ue(e,Er)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xt(e,Er))}removeNode(e,n,t){if(En(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,t)}else this._onRemovalComplete(n,t)}markElementAsRemoved(e,n,t,r,o){this.collectedLeaveElements.push(n),n[ze]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,t,r,o){return En(n)?this._fetchNamespace(e).listen(n,t,r,o):()=>{}}_buildInstruction(e,n,t,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,fi,!0);n.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,Cn,!0),n.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ct(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[ze];if(n&&n.setForRemoval){if(e[ze]=dl,n.namespaceId){this.destroyInnerAnimations(e);let t=this._fetchNamespace(n.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(Er)&&this.markElementAsDisabled(e,!1),this.driver.query(e,dh,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let r=this.collectedEnterElements[t];Ue(r,ph)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{n=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let r=this.collectedLeaveElements[t];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],n.length?ct(n).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw za(e)}_flushAnimations(e,n){let t=new vi,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(S=>{d.add(S);let w=this.driver.query(S,uh,!0);for(let x=0;x<w.length;x++)d.add(w[x])});let m=this.bodyNode,u=Array.from(this.statesByElement.keys()),_=ol(u,this.collectedEnterElements),p=new Map,T=0;_.forEach((S,w)=>{let x=Cr+T++;p.set(w,x),S.forEach(O=>Ue(O,x))});let N=[],K=new Set,ee=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let w=this.collectedLeaveElements[S],x=w[ze];x&&x.setForRemoval&&(N.push(w),K.add(w),x.hasAnimation?this.driver.query(w,mh,!0).forEach(O=>K.add(O)):ee.add(w))}let k=new Map,ne=ol(u,Array.from(K));ne.forEach((S,w)=>{let x=bn+T++;k.set(w,x),S.forEach(O=>Ue(O,x))}),e.push(()=>{_.forEach((S,w)=>{let x=p.get(w);S.forEach(O=>Xt(O,x))}),ne.forEach((S,w)=>{let x=k.get(w);S.forEach(O=>Xt(O,x))}),N.forEach(S=>{this.processLeaveNode(S)})});let it=[],Re=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(n).forEach(x=>{let O=x.player,be=x.element;if(it.push(O),this.collectedEnterElements.length){let Se=be[ze];if(Se&&Se.setForMove){if(Se.previousTriggersValues&&Se.previousTriggersValues.has(x.triggerName)){let _t=Se.previousTriggersValues.get(x.triggerName),Fe=this.statesByElement.get(x.element);if(Fe&&Fe.has(x.triggerName)){let Ci=Fe.get(x.triggerName);Ci.value=_t,Fe.set(x.triggerName,Ci)}}O.destroy();return}}let Ke=!m||!this.driver.containsElement(m,be),Ie=k.get(be),ut=p.get(be),te=this._buildInstruction(x,t,ut,Ie,Ke);if(te.errors&&te.errors.length){Re.push(te);return}if(Ke){O.onStart(()=>ht(be,te.fromStyles)),O.onDestroy(()=>He(be,te.toStyles)),r.push(O);return}if(x.isFallbackTransition){O.onStart(()=>ht(be,te.fromStyles)),O.onDestroy(()=>He(be,te.toStyles)),r.push(O);return}let Kr=[];te.timelines.forEach(Se=>{Se.stretchStartingKeyframe=!0,this.disabledNodes.has(Se.element)||Kr.push(Se)}),te.timelines=Kr,t.append(be,te.timelines);let yl={instruction:te,player:O,element:be};s.push(yl),te.queriedElements.forEach(Se=>ke(a,Se,[]).push(O)),te.preStyleProps.forEach((Se,_t)=>{if(Se.size){let Fe=l.get(_t);Fe||l.set(_t,Fe=new Set),Se.forEach((Ci,jn)=>Fe.add(jn))}}),te.postStyleProps.forEach((Se,_t)=>{let Fe=c.get(_t);Fe||c.set(_t,Fe=new Set),Se.forEach((Ci,jn)=>Fe.add(jn))})});if(Re.length){let S=[];Re.forEach(w=>{S.push(Ka(w.triggerName,w.errors))}),it.forEach(w=>w.destroy()),this.reportError(S)}let ye=new Map,Ee=new Map;s.forEach(S=>{let w=S.element;t.has(w)&&(Ee.set(w,w),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,ye))}),r.forEach(S=>{let w=S.element;this._getPreviousPlayers(w,!1,S.namespaceId,S.triggerName,null).forEach(O=>{ke(ye,w,[]).push(O),O.destroy()})});let ft=N.filter(S=>sl(S,l,c)),Rt=new Map;rl(Rt,this.driver,ee,c,Be).forEach(S=>{sl(S,l,c)&&ft.push(S)});let gt=new Map;_.forEach((S,w)=>{rl(gt,this.driver,new Set(S),l,si)}),ft.forEach(S=>{let w=Rt.get(S),x=gt.get(S);Rt.set(S,new Map([...w?.entries()??[],...x?.entries()??[]]))});let On=[],Hr=[],zr={};s.forEach(S=>{let{element:w,player:x,instruction:O}=S;if(t.has(w)){if(d.has(w)){x.onDestroy(()=>He(w,O.toStyles)),x.disabled=!0,x.overrideTotalTime(O.totalTime),r.push(x);return}let be=zr;if(Ee.size>1){let Ie=w,ut=[];for(;Ie=Ie.parentNode;){let te=Ee.get(Ie);if(te){be=te;break}ut.push(Ie)}ut.forEach(te=>Ee.set(te,be))}let Ke=this._buildAnimation(x.namespaceId,O,ye,o,gt,Rt);if(x.setRealPlayer(Ke),be===zr)On.push(x);else{let Ie=this.playersByElement.get(be);Ie&&Ie.length&&(x.parentPlayer=ct(Ie)),r.push(x)}}else ht(w,O.fromStyles),x.onDestroy(()=>He(w,O.toStyles)),Hr.push(x),d.has(w)&&r.push(x)}),Hr.forEach(S=>{let w=o.get(S.element);if(w&&w.length){let x=ct(w);S.setRealPlayer(x)}}),r.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<N.length;S++){let w=N[S],x=w[ze];if(Xt(w,bn),x&&x.hasAnimation)continue;let O=[];if(a.size){let Ke=a.get(w);Ke&&Ke.length&&O.push(...Ke);let Ie=this.driver.query(w,Cn,!0);for(let ut=0;ut<Ie.length;ut++){let te=a.get(Ie[ut]);te&&te.length&&O.push(...te)}}let be=O.filter(Ke=>!Ke.destroyed);be.length?yh(this,w,be):this.processLeaveNode(w)}return N.length=0,On.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let w=this.players.indexOf(S);this.players.splice(w,1)}),S.play()}),On}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,t,r,o){let s=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==_i;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(t||r)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,n,t){let r=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let l of n.timelines){let c=l.element,d=c!==o,m=ke(t,c,[]);this._getPreviousPlayers(c,d,s,a,n.toState).forEach(_=>{let p=_.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),_.destroy(),m.push(_)})}ht(o,n.fromStyles)}_buildAnimation(e,n,t,r,o,s){let a=n.triggerName,l=n.element,c=[],d=new Set,m=new Set,u=n.timelines.map(p=>{let T=p.element;d.add(T);let N=T[ze];if(N&&N.removedBeforeQueried)return new Et(p.duration,p.delay);let K=T!==l,ee=bh((t.get(T)||hh).map(ye=>ye.getRealPlayer())).filter(ye=>{let Ee=ye;return Ee.element?Ee.element===T:!1}),k=o.get(T),ne=s.get(T),it=gr(this._normalizer,p.keyframes,k,ne),Re=this._buildPlayer(p,it,ee);if(p.subTimeline&&r&&m.add(T),K){let ye=new bi(e,a,T);ye.setRealPlayer(Re),c.push(ye)}return Re});c.forEach(p=>{ke(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>gh(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Ue(p,Tr));let _=ct(u);return _.onDestroy(()=>{d.forEach(p=>Xt(p,Tr)),He(l,n.toStyles)}),m.forEach(p=>{ke(r,p,[]).push(_)}),_}_buildPlayer(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new Et(e.duration,e.delay)}},bi=class{namespaceId;triggerName;element;_player=new Et;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,t)=>{n.forEach(r=>_n(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){ke(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function gh(i,e,n){let t=i.get(e);if(t){if(t.length){let r=t.indexOf(n);t.splice(r,1)}t.length==0&&i.delete(e)}return t}function _h(i){return i??null}function En(i){return i&&i.nodeType===1}function vh(i){return i=="start"||i=="done"}function nl(i,e){let n=i.style.display;return i.style.display=e??"none",n}function rl(i,e,n,t,r){let o=[];n.forEach(l=>o.push(nl(l)));let s=[];t.forEach((l,c)=>{let d=new Map;l.forEach(m=>{let u=e.computeStyle(c,m,r);d.set(m,u),(!u||u.length==0)&&(c[ze]=fh,s.push(c))}),i.set(c,d)});let a=0;return n.forEach(l=>nl(l,o[a++])),s}function ol(i,e){let n=new Map;if(i.forEach(a=>n.set(a,[])),e.length==0)return n;let t=1,r=new Set(e),o=new Map;function s(a){if(!a)return t;let l=o.get(a);if(l)return l;let c=a.parentNode;return n.has(c)?l=c:r.has(c)?l=t:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==t&&n.get(l).push(a)}),n}function Ue(i,e){i.classList?.add(e)}function Xt(i,e){i.classList?.remove(e)}function yh(i,e,n){ct(n).onDone(()=>i.processLeaveNode(e))}function bh(i){let e=[];return pl(i,e),e}function pl(i,e){for(let n=0;n<i.length;n++){let t=i[n];t instanceof Hi?pl(t.players,e):e.push(t)}}function Ch(i,e){let n=Object.keys(i),t=Object.keys(e);if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r];if(!e.hasOwnProperty(o)||i[o]!==e[o])return!1}return!0}function sl(i,e,n){let t=n.get(i);if(!t)return!1;let r=e.get(i);return r?t.forEach(o=>r.add(o)):e.set(i,t),n.delete(i),!0}var Jt=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,n)=>{};constructor(e,n,t){this._driver=n,this._normalizer=t,this._transitionEngine=new jr(e.body,n,t),this._timelineEngine=new Fr(e.body,n,t),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,n,t,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],d=ll(this._driver,o,l,c);if(l.length)throw Ra(r,l);a=ah(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,t,r){this._transitionEngine.insertNode(e,n,t,r)}onRemove(e,n,t){this._transitionEngine.removeNode(e,n,t)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,t,r){if(t.charAt(0)=="@"){let[o,s]=_r(t),a=r;this._timelineEngine.command(o,n,s,a)}else this._transitionEngine.trigger(e,n,t,r)}listen(e,n,t,r,o){if(t.charAt(0)=="@"){let[s,a]=_r(t);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(e,n,t,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Th(i,e){let n=null,t=null;return Array.isArray(e)&&e.length?(n=Ar(e[0]),e.length>1&&(t=Ar(e[e.length-1]))):e instanceof Map&&(n=Ar(e)),n||t?new Sh(i,n,t):null}var Sh=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(n,t,r){this._element=n,this._startStyles=t,this._endStyles=r;let o=i.initialStylesByElement.get(n);o||i.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&He(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(He(this._element,this._initialStyles),this._endStyles&&(He(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ht(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ht(this._element,this._endStyles),this._endStyles=null),He(this._element,this._initialStyles),this._state=3)}}return i})();function Ar(i){let e=null;return i.forEach((n,t)=>{wh(t)&&(e=e||new Map,e.set(t,n))}),e}function wh(i){return i==="display"||i==="position"}var Ln=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,n,t,r){this.element=e,this.keyframes=n,this.options=t,this._specialStyles=r,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(t=>{n.push(Object.fromEntries(t))}),n}_triggerWebAnimation(e,n,t){return e.animate(this._convertKeyframesToObject(n),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{r!=="offset"&&e.set(r,this._finished?t:Sn(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}},Dn=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,n){return vr(e,n)}getParentElement(e){return yn(e)}query(e,n,t){return yr(e,n,t)}computeStyle(e,n,t){return Sn(e,n)}animate(e,n,t,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:t,delay:r,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(_=>_ instanceof Ln);Wa(t,r)&&d.forEach(_=>{_.currentSnapshot.forEach((p,T)=>c.set(T,p))});let m=Qa(n).map(_=>new Map(_));m=Ya(e,m,c);let u=Th(e,m);return new Ln(e,m,l,u)}};var kn="@",ml="@.disabled",Rn=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,n,t,r){this.namespaceId=e,this.delegate=n,this.engine=t,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,t,r=!0){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,t){this.parentNode(n)&&this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,t,r){this.delegate.setAttribute(e,n,t,r)}removeAttribute(e,n,t){this.delegate.removeAttribute(e,n,t)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,t,r){this.delegate.setStyle(e,n,t,r)}removeStyle(e,n,t){this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){n.charAt(0)==kn&&n==ml?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,t,r){return this.delegate.listen(e,n,t,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},Ur=class extends Rn{factory;constructor(e,n,t,r,o){super(n,t,r,o),this.factory=e,this.namespaceId=n}setProperty(e,n,t){n.charAt(0)==kn?n.charAt(1)=="."&&n==ml?(t=t===void 0?!0:!!t,this.disableAnimations(e,t)):this.engine.process(this.namespaceId,e,n.slice(1),t):this.delegate.setProperty(e,n,t)}listen(e,n,t,r){if(n.charAt(0)==kn){let o=xh(e),s=n.slice(1),a="";return s.charAt(0)!=kn&&([s,a]=Eh(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,t,l)})}return this.delegate.listen(e,n,t,r)}};function xh(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Eh(i){let e=i.indexOf("."),n=i.substring(0,e),t=i.slice(e+1);return[n,t]}var Fn=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,n,t){this.delegate=e,this.engine=n,this._zone=t,n.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let m=()=>c.delete(r);d=new Rn("",r,this.engine,m),c.set(r,d)}return d}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return n.data.animation.forEach(a),new Ur(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,t){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(t));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Ah=(()=>{class i extends Jt{constructor(n,t,r){super(n,t,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(t){return new(t||i)(E(dt),E(Lt),E(Dt))};static \u0275prov=L({token:i,factory:i.\u0275fac})}return i})();function Ih(){return new An}function Mh(i,e,n){return new Fn(i,e,n)}var hl=[{provide:Dt,useFactory:Ih},{provide:Jt,useClass:Ah},{provide:mo,useFactory:Mh,deps:[Eo,Jt,Mi]}],q0=[{provide:Lt,useClass:$r},{provide:$n,useValue:"NoopAnimations"},...hl],Ph=[{provide:Lt,useFactory:()=>new Dn},{provide:$n,useFactory:()=>"BrowserAnimations"},...hl];function fl(){return ho("NgEagerAnimations"),[...Ph]}var gl=[{path:"",pathMatch:"full",redirectTo:"/home"},{path:"home",loadComponent:()=>import("./chunk-GVHBIAWU.js").then(i=>i.HomeComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-QGXLOOUS.js").then(i=>i.DashboardPage),canActivate:[Xe]},{path:"jobs",canActivate:[Xe],children:[{path:"",loadComponent:()=>import("./chunk-KQZD54WH.js").then(i=>i.JobList)},{path:"new",loadComponent:()=>import("./chunk-EASCCZBM.js").then(i=>i.JobForm)},{path:":id",loadComponent:()=>import("./chunk-UTR3A7GR.js").then(i=>i.JobDetail)},{path:":id/edit",loadComponent:()=>import("./chunk-EASCCZBM.js").then(i=>i.JobForm)}]},{path:"candidates",canActivate:[Xe],children:[{path:"",loadComponent:()=>import("./chunk-B2Z5TYYS.js").then(i=>i.CandidateList)},{path:"new",loadComponent:()=>import("./chunk-ZUDLIPL2.js").then(i=>i.CandidateForm)},{path:":id",loadComponent:()=>import("./chunk-VYIW43H2.js").then(i=>i.CandidateDetail)},{path:":id/edit",loadComponent:()=>import("./chunk-ZUDLIPL2.js").then(i=>i.CandidateForm)}]},{path:"departments",loadComponent:()=>import("./chunk-UNHUQFKP.js").then(i=>i.DepartmentListComponent),canActivate:[Xe]},{path:"applications",loadComponent:()=>import("./chunk-CZ4EJKA7.js").then(i=>i.ApplicationList),canActivate:[Xe]},{path:"pipeline",loadComponent:()=>import("./chunk-OBBR7ORR.js").then(i=>i.PipelineBoard),canActivate:[Xe]},{path:"apply/success",loadComponent:()=>import("./chunk-KIELIECV.js").then(i=>i.ApplicationSuccessComponent)},{path:"apply/:slug",loadComponent:()=>import("./chunk-EO4OALPB.js").then(i=>i.PublicJobDetailComponent)},{path:"register",loadComponent:()=>import("./chunk-TIOG2U7P.js").then(i=>i.CandidateRegisterComponent)},{path:"candidate",canActivate:[Xe],children:[{path:"dashboard",loadComponent:()=>import("./chunk-LCCC7M3N.js").then(i=>i.CandidateDashboardComponent)},{path:"applications/:id",loadComponent:()=>import("./chunk-2H46R7FW.js").then(i=>i.ApplicationDetailViewComponent)}]},{path:"account",loadChildren:()=>import("./chunk-GY7EOHQR.js").then(i=>i.createRoutes())},{path:"identity",loadChildren:()=>import("./chunk-YY3EUV6W.js").then(i=>i.createRoutes())},{path:"tenant-management",loadChildren:()=>import("./chunk-7ESULS5D.js").then(i=>i.createRoutes())},{path:"setting-management",loadChildren:()=>import("./chunk-BVETHPJI.js").then(i=>i.createRoutes())}];var _l=[z(()=>{Nh()})];function Nh(){v(Ne).add([{path:"/dashboard",name:"Dashboard",iconClass:"fas fa-chart-line",order:1,layout:"application",requiredPolicy:"ATS.Dashboard"},{path:"/jobs",name:"Jobs",iconClass:"fas fa-briefcase",order:2,layout:"application",requiredPolicy:"ATS.Jobs"},{path:"/candidates",name:"Candidates",iconClass:"fas fa-users",order:3,layout:"application",requiredPolicy:"ATS.Candidates"},{path:"/departments",name:"Departments",iconClass:"fas fa-sitemap",order:4,layout:"application",requiredPolicy:"ATS.Departments"},{path:"/applications",name:"Applications",iconClass:"fas fa-file-alt",order:5,layout:"application",requiredPolicy:"ATS.Applications"},{path:"/pipeline",name:"Pipeline",iconClass:"fas fa-tasks",order:6,layout:"application",requiredPolicy:"ATS.Pipeline"},{path:"/candidate/dashboard",name:"My Applications",iconClass:"fas fa-user-circle",order:7,layout:"application",requiredPolicy:"ATS.CandidatePortal.ViewApplications"},{path:"/home",name:"::Menu:Home",iconClass:"fas fa-home",order:100,layout:"application"}])}var vl={providers:[Po(gl),_l,fl(),es(Zo({environment:ai,registerLocaleFn:ks()})),Ts(),Ss(),ls(),cs(),pa(),va(),Vs($s(ai)),ws(),xs(),as()]};ai.production&&void 0;ko(ps,vl).catch(i=>console.error(i));
